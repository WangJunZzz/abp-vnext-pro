{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Abp Vnext Pro","text":"<p>Abp vNext Pro \u662f\u4e00\u4e2a\u57fa\u4e8e Vben Admin, Abp vNext \u6253\u9020\u7684\u4e00\u4e2a\u5f00\u7bb1\u5373\u7528\u7684\u4e2d\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf\u89e3\u51b3\u65b9\u6848\u3002\u89c9\u5f97\u8be5\u9879\u76ee\u5bf9\u60a8\u6709\u5e2e\u52a9,\u8bf7\u518d Github \u4e0a\u7ed9\u6211\u4e00\u9897</p> <p>\u5feb\u901f\u5f00\u59cb </p>"},{"location":"#abp-vnext-pro_1","title":"Abp Vnext Pro","text":"<p>\u6f14\u793a  GitHub </p>"},{"location":"#abp-vnext-pro-suite","title":"Abp Vnext Pro Suite","text":"<p>\u57fa\u4e8e Abp Vnext Pro \u5f00\u53d1\u7684\u4ee3\u7801\u751f\u6210\u5668,\u53ef\u81ea\u52a8\u751f\u6210\u524d\u540e\u7aef CURD \u4ee3\u7801,\u63d0\u4f9b\u751f\u4ea7\u529b\u3002</p> <p>\u6f14\u793a  GitHub </p>"},{"location":"#_1","title":"\u89c6\u9891\u6559\u7a0b","text":"<p>B \u7ad9 </p>"},{"location":"about/6.0-7.0/","title":"6.0 \u5347\u7ea7\u5230 7.0","text":""},{"location":"about/6.0-7.0/#net","title":"\u66f4\u65b0 .NET \u7248\u672c","text":"<ul> <li>\u4fee\u6539\u89e3\u51b3\u2f45\u6848\u4e2d global.json</li> </ul> JSON<pre><code>{\n  \"sdk\": {\n    \"version\": \"7.0.304\",\n    \"rollForward\": \"latestFeature\"\n  }\n}\n</code></pre>"},{"location":"about/6.0-7.0/#_1","title":"\u4fee\u6539\u7a0b\u5e8f\u96c6\u7248\u672c","text":"<ul> <li>Directory.Build.Volo.targets</li> <li>6.0.1 \u6539\u4e3a 7.0.0</li> <li>Directory.Build.Microsoft.targets</li> <li>\u5fae\u8f6f\u5b98\u65b9\u5305\u5347\u7ea7\u5230 7.0.2</li> <li>Microsoft.Extensions.Hosting 6.0.1-&gt;7.0.0</li> <li>Microsoft.NET.Test.Sdk 16.9.1-&gt;17.2.0</li> <li>Directory.Build.targets</li> <li>DotNetCore.CAP \u5347\u7ea7\u5230 7.0.2</li> <li>\u79fb\u9664 Newtonsoft.Json</li> </ul>"},{"location":"about/6.0-7.0/#_2","title":"\u4fee\u6539\u76ee\u6807\u6846\u67b6","text":"<ul> <li>\u2f6c\u6807\u6846\u67b6(TargetFramework)\u4e3a net6.0 -&gt; net7.0</li> <li>\u4fee\u6539 Lion.AbpPro.CAP \u76ee\u6807\u6846\u67b6(TargetFramework) netstandard2.1 -&gt; net7.0</li> </ul>"},{"location":"about/6.0-7.0/#_3","title":"\u65b0\u589e\u4e86\u56db\u5f20\u8868","text":"<ul> <li>AbpFeatureGroups \u529f\u80fd\u7ec4\u8868</li> <li>AbpFeatures \u529f\u80fd\u8868</li> <li>AbpPermissionGroups \u6743\u9650\u7ec4\u8868</li> <li>AbpPermissions \u6743\u9650\u8868</li> <li>\u6267\u884c EF \u547d\u4ee4\u751f\u6210\u8fc1\u79fb\u6587\u4ef6\u5e76\u66f4\u65b0\u6570\u636e\u5e93</li> </ul>"},{"location":"about/6.0-7.0/#_4","title":"\u52a8\u6001\u6743\u9650\u5e26\u6765\u7684\u5f71\u54cd","text":"<ul> <li> <p>\u4fee\u6539 LionAbpApplicationConfigurationAppService.cs</p> </li> <li> <p>\u52a8\u6001\u6743\u9650 UI \u540e\u7eed\u5728\u6dfb\u52a0,\u76ee\u524d\u662f\u4e0d\u4f1a\u5f71\u54cd\u4e4b\u524d\u7684\u529f\u80fd\u3002</p> </li> </ul>"},{"location":"about/6.0-7.0/#_5","title":"\u524d\u7aef","text":"<ul> <li>\u4fee\u6539 package.json</li> <li>\"@microsoft/signalr\": \"^6.0.1\" -&gt; \"@microsoft/signalr\": \"^7.0.2\"</li> </ul>"},{"location":"about/contact-us/","title":"Contact Us","text":""},{"location":"about/contact-us/#authors","title":"Authors","text":"<ul> <li>Author: @WangJunZzz</li> <li>Email: 510423039@qq.com</li> <li>Blogs: https://www.cnblogs.com/WangJunZzz</li> </ul>"},{"location":"about/contact-us/#_1","title":"\u8d5e\u52a9","text":"<p>\u5982\u679c\u4f60\u89c9\u5f97\u8fd9\u4e2a\u9879\u76ee\u5bf9\u4f60\u6709\u5e2e\u52a9\uff0c\u4f60\u53ef\u4ee5\u5e2e\u4f5c\u8005\u4e70\u4e00\u676f\u5496\u5561\u8868\u793a\u652f\u6301! </p>"},{"location":"about/license/","title":"License","text":"<p>MIT License</p> <p>MIT License</p> <p>Copyright \u00a9 2021 WangJunZzz</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"about/release-notes/","title":"\u53d1\u884c\u8bf4\u660e","text":""},{"location":"about/release-notes/#5327","title":"5.3.2.7","text":"<p>\u529f\u80fd</p> <ul> <li>\u5c01\u88c5abp \u81ea\u5e26\u6a21\u677f\u5230BasicManagement</li> </ul>"},{"location":"about/release-notes/#5325","title":"5.3.2.5","text":"<p>\u529f\u80fd</p> <ul> <li>\u79fb\u9664IdentityServer4 #45</li> </ul> <p>Bug</p> <ul> <li>\u5bfc\u51fa\u7528\u6237\u6743\u9650\u9519\u8bef</li> </ul>"},{"location":"about/release-notes/#5324","title":"5.3.2.4","text":"<p>Bug</p> <ul> <li>\u5347\u7ea7Vben2.8\uff0c\u7ec4\u7ec7\u673a\u6784\u7f16\u8f91\u9519\u8bef #62</li> </ul>"},{"location":"about/release-notes/#5323","title":"5.3.2.3","text":"<p>\u529f\u80fd</p> <ul> <li>\u6743\u9650\u83dc\u5355\u7ea7\u8054\u64cd\u4f5c #48</li> </ul> <p>Bug</p> <ul> <li>\u7edf\u4e00\u53c2\u6570\u8fd4\u56de\u503c\u8fc7\u6ee4\u5668\uff0c\u7a7a\u6307\u9488\u5f02\u5e38 #61</li> </ul>"},{"location":"about/release-notes/#5322","title":"5.3.2.2","text":"<p>\u529f\u80fd</p> <ul> <li>\u542f\u7528GlobalUsing\u529f\u80fd #56</li> <li>\u91c7\u7528Directory.Build.targets\u7ba1\u7406 nuget\u5305 #55</li> </ul> <p>Bug</p> <ul> <li>Vben \u5206\u9875\u7ec4\u4ef6\u603b\u6761\u6570\u663e\u793a\u5f02\u5e38 #59</li> </ul>"},{"location":"about/release-notes/#5321","title":"5.3.2.1","text":"<p>\u529f\u80fd</p> <ul> <li>\u8c03\u6574NotificationManagement\u805a\u5408\u8bbe\u8ba1 #51</li> <li>\u8c03\u6574NotificationManagement,Redis\u914d\u7f6e #50</li> <li>\u5347\u7ea7Abp5.3.2</li> </ul> <p>Bug</p> <ul> <li>\u591a\u4e2ahangfire\u5b9a\u65f6\u4efb\u52a1\uff0c\u53ea\u6267\u884c\u5355\u4e2a\u95ee\u9898 #54</li> <li>vue\u5ba2\u6237\u7aef\u5148\u542f\u52a8\uff0cSignalR\u4e0d\u5c1d\u8bd5\u91cd\u8fde #49</li> </ul>"},{"location":"user-guide/zh/deploy/docker/","title":"Docker \u90e8\u7f72","text":""},{"location":"user-guide/zh/deploy/docker/#_1","title":"\u540e\u7aef","text":"<ul> <li>\u5728 aspnetcore \u76ee\u5f55\u4e0b\u6267\u884c</li> <li>\u4fee\u6539 appsetting.Production.json \u914d\u7f6e</li> <li>\u6570\u636e\u5e93\u8fde\u63a5</li> <li>Redis \u8fde\u63a5</li> <li>Rabbitmq \u8fde\u63a5(\u53ef\u9009)</li> </ul>"},{"location":"user-guide/zh/deploy/docker/#dockerfile","title":"Dockerfile","text":"YAML<pre><code>FROM mcr.microsoft.com/dotnet/aspnet:7.0 AS base\nWORKDIR /app\nEXPOSE 80\nEXPOSE 443\nENV TZ=Asia/Shanghai\nENV ASPNETCORE_ENVIRONMENT=Production\n\nFROM mcr.microsoft.com/dotnet/sdk:7.0 AS build\nWORKDIR /src\nCOPY . .\nWORKDIR \"/src/services/host/Lion.AbpPro.HttpApi.Host\"\nRUN dotnet build \"Lion.AbpPro.HttpApi.Host.csproj\" -c Release -o /app/build\n\nFROM build AS publish\nRUN dotnet publish \"Lion.AbpPro.HttpApi.Host.csproj\" -c Release -o /app/publish /p:UseAppHost=false\n\nFROM base AS final\nWORKDIR /app\nCOPY --from=publish /app/publish .\nENTRYPOINT [\"dotnet\", \"Lion.AbpPro.HttpApi.Host.dll\"]\n</code></pre>"},{"location":"user-guide/zh/deploy/docker/#_2","title":"\u6784\u5efa\u955c\u50cf","text":"Bash<pre><code>docker build -t Lion.AbpPro.HttpApi.Host .\n</code></pre>"},{"location":"user-guide/zh/deploy/docker/#_3","title":"\u542f\u52a8\u5bb9\u5668","text":"Bash<pre><code>docker run -itd --name Lion.AbpPro.HttpApi.Host -p 8011:80 Lion.AbpPro.HttpApi.Host\n</code></pre>"},{"location":"user-guide/zh/deploy/docker/#_4","title":"\u524d\u7aef","text":"<ul> <li>\u4fee\u6539 env.production \u63a5\u53e3\u5730\u5740\u4e3a\u4ee5\u4e0a\u4f60\u53d1\u5e03\u7684\u5730\u5740</li> <li>\u6253\u5305\u9879\u76ee</li> </ul>"},{"location":"user-guide/zh/deploy/docker/#dockerfile_1","title":"Dockerfile","text":"Text Only<pre><code>FROM node:16-alpine as build-stage\nWORKDIR /app\nCOPY . ./\nENV NODE_OPTIONS=--max-old-space-size=16384\nRUN npm install pnpm -g\nRUN pnpm i\nRUN pnpm build\n\n\nFROM nginx:1.17.3-alpine as production-stage\nCOPY --from=build-stage app/_nginx/nginx.conf /etc/nginx/nginx.conf\nCOPY --from=build-stage app/_nginx/env.js /etc/nginx/env.js\nCOPY --from=build-stage app/_nginx/default.conf /etc/nginx/conf.d/default.conf\nCOPY --from=build-stage app/dist/ /usr/share/nginx/html\nEXPOSE 80\n\nCMD [\"nginx\", \"-g\", \"daemon off;\"]\n</code></pre>"},{"location":"user-guide/zh/deploy/docker/#_5","title":"\u6784\u5efa\u955c\u50cf","text":"Bash<pre><code>docker build -t Lion.AbpPro.Vue3 .\n</code></pre>"},{"location":"user-guide/zh/deploy/docker/#_6","title":"\u542f\u52a8\u5bb9\u5668","text":"Bash<pre><code>docker run -itd --name Lion.AbpPro.Vue3 -p 8012:80 Lion.AbpPro.Vue3\n</code></pre> <p>\u68c0\u67e5\u8de8\u57df\u8bbe\u7f6e,\u8bf7\u67e5\u770b\u8de8\u57df\u6587\u6863</p>"},{"location":"user-guide/zh/deploy/github/","title":"Github \u81ea\u52a8\u5316\u90e8\u7f72","text":""},{"location":"user-guide/zh/deploy/github/#yaml","title":"\u6dfb\u52a0\u90e8\u7f72 yaml","text":"<ul> <li>\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u6dfb\u52a0 .github/workflow/</li> </ul>"},{"location":"user-guide/zh/deploy/github/#_1","title":"\u540e\u7aef\u9879\u76ee","text":"YAML<pre><code>name: \u540e\u7aef\u90e8\u7f72(API,IdentityServer4,Gateways) # \u6307\u5b9a\u540d\u79f0\non:\n  push:\n    branches:\n      - main # \u4ee3\u7801\u63a8\u9001\u5230main\u5206\u652f\u7684\u65f6\u5019\u89e6\u53d1jobs\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v2\n      - name: Install Dotnet 6.x\n        uses: actions/setup-dotnet@v1\n        with:\n          dotnet-version: \"6.0\" # \u5b89\u88c5Dotnet \u73af\u5883\n          include-prerelease: True\n      - name: \u7f16\u8bd1\n        run: dotnet build aspnet-core/Lion.AbpPro.sln # \u7f16\u8bd1\u9879\u76ee\n\n      - name: \u5355\u5143\u6d4b\u8bd5\n        run: dotnet test aspnet-core/services/test/Lion.AbpPro.Domain.Tests/Lion.AbpPro.Domain.Tests.csproj # \u8fd0\u884c\u5355\u5143\u6d4b\u8bd5\n\n      - name: \u53d1\u5e03-&gt;Lion.AbpPro.HttpApi.Host\n        run: dotnet publish aspnet-core/services/host/Lion.AbpPro.HttpApi.Host/Lion.AbpPro.HttpApi.Host.csproj -o Lion.AbpPro.HttpApi.Host # \u53d1\u5e03Host\u9879\u76ee\n\n      - name: \u53d1\u5e03-&gt;Lion.AbpPro.IdentityServer\n        run: dotnet publish aspnet-core/services/host/Lion.AbpPro.IdentityServer/Lion.AbpPro.IdentityServer.csproj -o Lion.AbpPro.IdentityServer # \u53d1\u5e03IdentityServer\u9879\u76ee\n\n      - name: \u53d1\u5e03-&gt;Lion.AbpPro.IdentityServer\n        run: dotnet publish aspnet-core/gateways/Lion.AbpPro.WebGateway/Lion.AbpPro.WebGateway.csproj -o Lion.AbpPro.WebGateway # \u53d1\u5e03\u7f51\u5173\u9879\u76ee\n\n      - name: \u90e8\u7f72-&gt;Lion.AbpPro.HttpApi.Host\n        uses: easingthemes/ssh-deploy@v2.2.11\n        env:\n          SSH_PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }} # \u670d\u52a1\u5668\u751f\u6210\u7684ssh key \u5728github \u4e0b\u6dfb\u52a0secret\n          ARGS: \"-avzr --delete --exclude 'appsettings.json'\" # \u628a\u53d1\u5e03\u597d\u7684\u9879\u76ee\u590d\u5236\u5230\u670d\u52a1\u5668\uff0c\u5e76\u4e14\u5220\u9664\u670d\u52a1\u5668\u4e0a\u7684/root/wwwroot/Lion.AbpPro.HttpApi.Host\u4e0b\u7684\u6587\u4ef6\u4f46\u662f\u4e0d\u5305\u62ecappsettings.json\n          SOURCE: \"Lion.AbpPro.HttpApi.Host\" # \u5bf9\u5e94\u4e0a\u9762\u53d1\u5e03\u597d\u7684\u76ee\u5f55\n          REMOTE_HOST: ${{ secrets.REMOTE_HOST }} #  \u670d\u52a1\u5668\u516c\u7f51ip\u5730\u5740\n          REMOTE_USER: ${{ secrets.REMOTE_USER }} #  \u7528\u6237\u540d\n          TARGET: \"/root/wwwroot\" # \u53d1\u5e03\u5230\u670d\u52a1\u5668\u6307\u5b9a\u76ee\u5f55\n\n      - name: \u90e8\u7f72-&gt;Lion.AbpPro.IdentityServer\n        uses: easingthemes/ssh-deploy@v2.2.11\n        env:\n          SSH_PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }}\n          ARGS: \"-avzr --delete --exclude 'appsettings.json'\"\n          SOURCE: \"Lion.AbpPro.IdentityServer\"\n          REMOTE_HOST: ${{ secrets.REMOTE_HOST }}\n          REMOTE_USER: ${{ secrets.REMOTE_USER }}\n          TARGET: \"/root/wwwroot\"\n\n      - name: \u90e8\u7f72-&gt;Lion.AbpPro.WebGateway\n        uses: easingthemes/ssh-deploy@v2.2.11\n        env:\n          SSH_PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }}\n          ARGS: \"-avzr --delete --exclude 'appsettings.json'\"\n          SOURCE: \"Lion.AbpPro.WebGateway\"\n          REMOTE_HOST: ${{ secrets.REMOTE_HOST }}\n          REMOTE_USER: ${{ secrets.REMOTE_USER }}\n          TARGET: \"/root/wwwroot\"\n</code></pre>"},{"location":"user-guide/zh/deploy/github/#supervisor","title":"\u5b89\u88c5 supervisor","text":"Bash<pre><code>yum install -y supervisor\nsystemctl start supervisord\nsystemctl enable supervisord # \u8bbe\u7f6e\u4e3a\u5f00\u673a\u542f\u52a8\n</code></pre> <ul> <li>\u9ed8\u8ba4\u914d\u7f6e\u76ee\u5f55\u5728 /etc/supervisord.d</li> </ul> Bash<pre><code>yum install -y supervisor\nsystemctl start supervisord\nsystemctl enable supervisord # \u8bbe\u7f6e\u4e3a\u5f00\u673a\u542f\u52a8\n</code></pre> <ul> <li>\u5f00\u542f web \u7ba1\u7406\u754c\u9762</li> </ul> Bash<pre><code># vi vi /etc/supervisord.conf\n[inet_http_server]         ; inet (TCP) server disabled by default\nport=0.0.0.0:9001        ; (ip_address:port specifier, *:port for all iface)\nusername=admin              ; # \u7ba1\u7406web\u7aef\u767b\u5f55\u7528\u6237\u540d\npassword=1q2w3E*.               ; # \u7ba1\u7406web\u7aef\u767b\u5f55\u5bc6\u7801\n</code></pre> <ul> <li> <p>\u67e5\u770b\u662f\u5426\u80fd\u8bbf\u95ee http://ip:9001   </p> </li> <li> <p>\u6dfb\u52a0 Lion.AbpPro.HttpApi.Host.ini</p> </li> </ul> Bash<pre><code>[program:Lion.AbpPro.HttpApi.Host]\ncommand=/bin/bash -c \"dotnet Lion.AbpPro.HttpApi.Host.dll --urls=http://*:8011\"\ndirectory=/root/wwwroot/Lion.AbpPro.HttpApi.Host\nautostart=true\nautorestart=true\nstderr_logfile=/root/wwwroot/Lion.AbpPro.HttpApi.Host/err.log\nstdout_logfile=/root/wwwroot/Lion.AbpPro.HttpApi.Host/out.log\nuser=root\n</code></pre> <ul> <li>\u6dfb\u52a0 Lion.AbpPro.IdentityServer.ini</li> </ul> Bash<pre><code>[program:Lion.AbpPro.IdentityServer]\ncommand=/bin/bash -c \"dotnet Lion.AbpPro.IdentityServer.dll --urls=http://*:8013\"\ndirectory=/root/wwwroot/Lion.AbpPro.IdentityServer\nautostart=true\nautorestart=true\nstderr_logfile=/root/wwwroot/Lion.AbpPro.IdentityServer/err.log\nstdout_logfile=/root/wwwroot/Lion.AbpPro.IdentityServer/out.log\nuser=root\n</code></pre> <ul> <li>\u6dfb\u52a0 Lion.AbpPro.WebGateway.ini</li> </ul> Bash<pre><code>[program:Lion.AbpPro.WebGateway]\ncommand=/bin/bash -c \"dotnet Lion.AbpPro.WebGateway.dll --urls=http://*:8014\"\ndirectory=/root/wwwroot/Lion.AbpPro.WebGateway\nautostart=true\nautorestart=true\nstderr_logfile=/root/wwwroot/Lion.AbpPro.WebGateway/err.log\nstdout_logfile=/root/wwwroot/Lion.AbpPro.WebGateway/out.log\nuser=root\n</code></pre> <ul> <li>\u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e supervisorctl reload</li> </ul>"},{"location":"user-guide/zh/deploy/github/#_2","title":"\u524d\u7aef\u914d\u7f6e","text":"<ul> <li>\u5b89\u88c5 Nginx</li> </ul> Bash<pre><code>sudo yum install -y nginx\nsystemctl start nginx # \u542f\u52a8 Nginx\nsystemctl enable nginx # \u542f\u7528\u5f00\u673a\u542f\u52a8 Nginx\n</code></pre> <ul> <li>\u8bbf\u95ee http://ip:80   </li> </ul> <p>-- \u914d\u7f6e Yml</p> YAML<pre><code>name: \u524d\u7aef\u90e8\u7f72(vue)\non:\n  push:\n    branches:\n      - main\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v2.3.1\n        with:\n          persist-credentials: false\n\n      - name: \u7f16\u8bd1|\u53d1\u5e03\n        run: |\n          cd vben271\n          yarn\n          npm run build\n\n      - name: \u90e8\u7f72-&gt;Vue\n        uses: easingthemes/ssh-deploy@v2.2.11\n        env:\n          SSH_PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }}\n          ARGS: \"-avzr --delete\"\n          SOURCE: \"vben271/dist\"\n          REMOTE_HOST: ${{ secrets.REMOTE_HOST }}\n          REMOTE_USER: ${{ secrets.REMOTE_USER }}\n          TARGET: \"/root/wwwroot\"\n</code></pre> <ul> <li>\u914d\u7f6e Nginx</li> </ul> Bash<pre><code># vi /etc/nginx/nginx.conf\n    server {\n        listen       8012;\n        listen       [::]:8012;\n        server_name  _;\n        root         /root/wwwroot/dist;\n\n        # Load configuration files for the default server block.\n        include /etc/nginx/default.d/*.conf;\n\n        #vue-router\u914d\u7f6e \u89e3\u51b3\u5237\u65b0\u6d4f\u89c8\u5668 404\u95ee\u9898\n        location / {\n            try_files $uri $uri/ @router;\n            index index.html;\n        }\n        location @router {\n            rewrite ^.*$ /index.html last;\n        }\n\n        error_page 404 /404.html;\n        location = /404.html {\n        }\n\n        error_page 500 502 503 504 /50x.html;\n        location = /50x.html {\n        }\n    }\n</code></pre>"},{"location":"user-guide/zh/extension/MagicodesIE/","title":"\u914d\u7f6e","text":"C#<pre><code>/// &lt;summary&gt;\n/// \u914d\u7f6eMagicodes.IE \u5bfc\u5165\u5bfc\u51fa\n/// &lt;/summary&gt;\nprivate void ConfigureMagicodes(ServiceConfigurationContext context)\n{\n    context.Services.AddTransient&lt;IExporter, ExcelExporter&gt;();\n    context.Services.AddTransient&lt;IExcelExporter, ExcelExporter&gt;();\n}\n</code></pre>"},{"location":"user-guide/zh/extension/MagicodesIE/#_2","title":"\u793a\u4f8b","text":"C#<pre><code>/// &lt;summary&gt;\n/// \u7528\u6237\u5bfc\u51fa\u5217\u8868\n/// &lt;/summary&gt;\n/// &lt;returns&gt;&lt;/returns&gt;\n[Authorize(AbpProPermissions.SystemManagement.UserExport)]\npublic async Task&lt;ActionResult&gt; ExportAsync(PagingUserListInput input)\n{\n    var request = new GetIdentityUsersInput\n    {\n        Filter = input.Filter?.Trim(),\n        MaxResultCount = input.PageSize,\n        SkipCount = input.SkipCount,\n        Sorting = \" LastModificationTime desc\"\n    };\n    List&lt;Volo.Abp.Identity.IdentityUser&gt; source = await _identityUserRepository\n        .GetListAsync(request.Sorting, request.MaxResultCount, request.SkipCount, request.Filter);\n    var result = ObjectMapper.Map&lt;List&lt;Volo.Abp.Identity.IdentityUser&gt;, List&lt;ExportIdentityUserOutput&gt;&gt;(source);\n    var bytes = await _excelExporter.ExportAsByteArray&lt;ExportIdentityUserOutput&gt;(result);\n    return new XlsxFileResult(bytes: bytes, fileDownloadName: $\"\u7528\u6237\u5bfc\u51fa\u5217\u8868{DateTime.Now:yyyyMMdd}\");\n}\n</code></pre>"},{"location":"user-guide/zh/extension/%E7%BB%9F%E4%B8%80%E8%BF%94%E5%9B%9E%E5%80%BC%E6%A0%BC%E5%BC%8F/","title":"\u7edf\u4e00\u8fd4\u56de\u503c\u683c\u5f0f","text":"<ul> <li>\u5728\u4f7f\u7528 abp \u7684\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u63d0\u4f9b\u7ed9\u7b2c\u4e09\u65b9\u63a5\u53e3\u8981\u5b9e\u73b0\u8fd4\u56de\u503c\u7edf\u4e00\u9700\u8981\u600e\u4e48\u505a\uff1f</li> </ul> C#<pre><code>{\n    // \u8fd4\u56de\u683c\u5f0f\u7c7b\u4f3c\u8fd9\u79cd\n    \"success\": false,\n    \"message\": \"\u8bf7\u6c42\u5931\u8d25\",\n    \"data\": null,\n    \"code\": 500\n}\n</code></pre> <ul> <li>\u5b9a\u4e49\u8fd4\u56de\u7c7b\u578b</li> </ul> C#<pre><code>public class WrapResult&lt;T&gt;\n{\n        public bool Success { get; private set; }\n\n        public string Message { get; private set; }\n\n        public T Data { get; private set; }\n\n        public int Code { get; private set; }\n\n        public WrapResult()\n        {\n            Success = true;\n            Message = \"Success\";\n            Data = default;\n            Code = 200;\n        }\n\n        public void SetSuccess(T data, string message = \"Success\", int code = 200)\n        {\n            Success = true;\n            Data = data;\n            Code = code;\n        }\n\n        public void SetFail(string message = \"Fail\", int code = 500)\n        {\n            Success = false;\n            Message = message;\n            Code = code;\n        }\n}\n</code></pre>"},{"location":"user-guide/zh/extension/%E7%BB%9F%E4%B8%80%E8%BF%94%E5%9B%9E%E5%80%BC%E6%A0%BC%E5%BC%8F/#_2","title":"\u5b9e\u73b0\u601d\u8def","text":"<ul> <li>\u5b9a\u4e49 WrapResultAttribute</li> </ul> C#<pre><code>public class WrapResultAttribute : Attribute\n{\n}\n</code></pre> <ul> <li> <p>\u6dfb\u52a0\u5f02\u5e38\u8fc7\u6ee4\u5668(\u62e6\u622a\u5f02\u5e38,\u629b\u5f02\u5e38\u65f6\u6307\u5b9a\u8fd4\u56de\u683c\u5f0f)</p> </li> <li> <p>LionExceptionFilter</p> </li> <li> <p>\u6dfb\u52a0\u7ed3\u679c\u8fc7\u6ee4\u5668</p> </li> <li>LionResultFilter</li> </ul>"},{"location":"user-guide/zh/extension/%E7%BB%9F%E4%B8%80%E8%BF%94%E5%9B%9E%E5%80%BC%E6%A0%BC%E5%BC%8F/#filter","title":"\u6ce8\u518c Filter","text":"C#<pre><code>    /// &lt;summary&gt;\n    /// \u5f02\u5e38\u5904\u7406\n    /// &lt;/summary&gt;\n    private void ConfigureAbpExceptions(ServiceConfigurationContext context)\n    {\n        context.Services.AddMvc\n        (\n            options =&gt;\n            {\n                options.Filters.Add(typeof(LionExceptionFilter));\n                options.Filters.Add(typeof(LionResultFilter));\n            }\n        );\n    }\n\n    public override void ConfigureServices(ServiceConfigurationContext context)\n    {\n        ConfigureAbpExceptions(context);\n    }\n</code></pre>"},{"location":"user-guide/zh/extension/%E7%BB%9F%E4%B8%80%E8%BF%94%E5%9B%9E%E5%80%BC%E6%A0%BC%E5%BC%8F/#_3","title":"\u4f7f\u7528","text":"<ul> <li>\u5728 Controller \u4e0a\u6216\u8005 Action \u4e0a\u6253\u4e0a WrapResultAttribute \u7279\u6027</li> <li>\u4f8b\u5982</li> </ul> C#<pre><code>    [Route(\"Permissions\")]\n    [WrapResult]\n    public class PermissionController : AbpProController,IRolePermissionAppService\n    {\n        private readonly IRolePermissionAppService _rolePermissionAppService;\n\n        public PermissionController(IRolePermissionAppService rolePermissionAppService)\n        {\n            _rolePermissionAppService = rolePermissionAppService;\n        }\n\n        [HttpPost(\"tree\")]\n        [SwaggerOperation(summary: \"\u83b7\u53d6\u89d2\u8272\u6743\u9650\", Tags = new[] { \"Permissions\" })]\n        [WrapResult] //\u63a7\u5236\u5668\u4e0a\u6253\u4e86 action\u4e0a\u5c31\u4e0d\u9700\u8981\n        public Task&lt;PermissionOutput&gt; GetPermissionAsync(GetPermissionInput input)\n        {\n            return _rolePermissionAppService.GetPermissionAsync(input);\n        }\n\n    }\n</code></pre> <ul> <li>\u4e0d\u7ba1\u63a5\u53e3\u65f6\u6709\u5f02\u5e38\u8fd8\u662f\u6210\u529f\u8fd4\u56de\u7ed3\u679c\u90fd\u662f WrapResult,PermissionOutput \u5728 WrapResult.Data \u4e2d\u3002</li> </ul>"},{"location":"user-guide/zh/getting-started/contributing/","title":"\u8d21\u732e","text":"<p>\u8d21\u732e\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u4e4b\u4e00\u5c31\u662f\u53c2\u4e0e\u8ba8\u8bba\u548cissue\u8ba8\u8bba\u3002</p> <p>\u5982\u679c\u60a8\u6709\u4efb\u4f55\u7591\u95ee\u6216\u95ee\u9898\uff0c\u8bf7\u5728Lion.AbpPro\u4ed3\u5e93\u4e2d\u62a5\u544a\uff1a</p> <p>\u63d0\u4ea4Issue</p>"},{"location":"user-guide/zh/getting-started/contributing/#_2","title":"\u63d0\u4ea4\u66f4\u6539","text":"<p>\u60a8\u8fd8\u53ef\u4ee5\u901a\u8fc7\u63d0\u4ea4\u4ee3\u7801\u66f4\u6539PR\u6765\u505a\u51fa\u8d21\u732e\u3002</p> <p>Pull requests \u53ef\u8ba9\u60a8\u544a\u8bc9\u5176\u4ed6\u4eba\u5df2\u63a8\u9001\u5230GitHub\u4e0a\u5b58\u50a8\u5e93\u7684\u66f4\u6539\u3002 \u6253\u5f00 Pull requests \u540e\uff0c\u60a8\u53ef\u4ee5\u4e0e\u534f\u4f5c\u8005\u8ba8\u8bba\u548c\u5ba1\u67e5\u505a\u51fa\u7684\u66f4\u6539\uff0c\u5e76\u5728\u66f4\u6539\u5408\u5e76\u5230\u5b58\u50a8\u5e93\u4e4b\u524d\u6dfb\u52a0\u540e\u7eed\u63d0\u4ea4\u3002</p>"},{"location":"user-guide/zh/getting-started/contributing/#_3","title":"\u5176\u4ed6\u8d44\u6e90","text":"<ul> <li> <p>issue \u548c pull requests</p> </li> <li> <p>\u4f7f\u7528\u641c\u7d22\u8fc7\u6ee4 issue \u548c pull requests</p> </li> </ul>"},{"location":"user-guide/zh/getting-started/introduction/","title":"\u4ecb\u7ecd","text":"<p>Lion.AbpPro \u662f Abp Vnext \u7684 Vue3 \u7248\u672c\u5b9e\u73b0\uff0c\u540c\u65f6\u4e5f\u662f\u514d\u8d39\u5f00\u6e90\u3002\u5b83\u6709\u52a9\u4e8e\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\uff0c\u5c5e\u4e8e\u5f00\u7bb1\u5373\u7528\u7684\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf\uff0c\u4e5f\u80fd\u9002\u7528\u5fae\u670d\u52a1\u3002</p>"},{"location":"user-guide/zh/getting-started/introduction/#_2","title":"\u540e\u7aef\u9879\u76ee\u7ed3\u6784","text":"Bash<pre><code>\u251c\u2500\u2500 Directory.Build.props nuget \u7248\u672c\u63a7\u5236\n\u251c\u2500\u2500 frameworks # \u516c\u5171\u6a21\u5757\n\u2502       \u251c\u2500\u2500 src #\n\u2502           \u251c\u2500\u2500 Lion.AbpPro.Core  # \u6838\u5fc3\u6269\u5c55\n\u2502           \u251c\u2500\u2500 Lion.AbpPro.CAP # dotnetcore.cap\n\u2502           \u251c\u2500\u2500 Lion.AbpPro.CAP.EntityFrameworkCore # dotnetcore.cap ef \u6269\u5c55\n\u2502           \u251c\u2500\u2500 Lion.AbpPro.Cli # cli\n\u2502           \u251c\u2500\u2500 Lion.AbpPro.Cli.Core # cli \u6838\u5fc3\n\u2502           \u251c\u2500\u2500 Lion.AbpPro.ElasticSearch # es \u6269\u5c55\n\u2502           \u251c\u2500\u2500 Lion.AbpPro.EntityFrameworkCore # ef \u6269\u5c55 \u4e3b\u8981\u662f\u6279\u91cf\u65b0\u589e\n\u2502           \u251c\u2500\u2500 Lion.AbpPro.EntityFrameworkCore.Mysql # mysql ef \u6269\u5c55 \u4e3b\u8981\u662f\u6279\u91cf\u65b0\u589e\n\u2502           \u251c\u2500\u2500 Lion.AbpPro.Starter # \u9996\u6b21\u542f\u52a8\n\u2502           \u2514\u2500\u2500 Lion.AbpPro.Localization # \u672c\u5730\u5316\n\u251c\u2500\u2500 gateways # \u7f51\u5173\n\u2502       \u2514\u2500\u2500 Lion.AbpPro.WebGateway # \u57fa\u4e8eocelot\u7f51\u5173\n\u251c\u2500\u2500 modules # \u6a21\u5757\n\u2502       \u251c\u2500\u2500 BasicManagement # abp \u57fa\u7840\u6a21\u5757\u5c01\u88c5\n\u2502       \u251c\u2500\u2500 DataDictionaryManagement # \u6570\u636e\u5b57\u5178\n\u2502       \u251c\u2500\u2500 LanguageManagement # \u591a\u8bed\u8a00\n\u2502       \u2514\u2500\u2500 NotificationManagement # \u901a\u77e5\u670d\u52a1\n\u251c\u2500\u2500 services # \u516c\u5171\u9759\u6001\u8d44\u6e90\u76ee\u5f55\n\u2502       \u251c\u2500\u2500 host # \u542f\u52a8\u6a21\u5757\n\u2502           \u251c\u2500\u2500 CompanyName.ProjectName.HttpApi.Host # admin ui host\n\u2502       \u251c\u2500\u2500 src  # \u6e90\u7801\n\u2502           \u2514\u2500\u2500 CompanyName.ProjectName.DbMigrator # \u8fc1\u79fb\u63a7\u5236\u53f0\u7a0b\u5e8f\n\u2502       \u2514\u2500\u2500 test # \u5355\u5143\u6d4b\u8bd5\n\u251c\u2500\u2500 shared # \u516c\u5171Host\n\u2502       \u251c\u2500\u2500 Lion.AbpPro.Shared.Hosting.Gateways # \u7f51\u5173host\u6a21\u5757\n\u2502       \u2514\u2500\u2500 Lion.AbpPro.Shared.Hosting.Microservices # \u670d\u52a1host\u6a21\u5757\n</code></pre>"},{"location":"user-guide/zh/getting-started/introduction/#_3","title":"\u524d\u7aef\u9879\u76ee\u7ed3\u6784","text":"Bash<pre><code>\u251c\u2500\u2500 _nginx # docker \u6253\u5305\n\u251c\u2500\u2500 build # \u6253\u5305\u811a\u672c\u76f8\u5173\n\u2502   \u251c\u2500\u2500 config # \u914d\u7f6e\u6587\u4ef6\n\u2502   \u251c\u2500\u2500 generate # \u751f\u6210\u5668\n\u2502   \u251c\u2500\u2500 script # \u811a\u672c\n\u2502   \u2514\u2500\u2500 vite # vite\u914d\u7f6e\n\u251c\u2500\u2500 mock # mock\u6587\u4ef6\u5939\n\u251c\u2500\u2500 public # \u516c\u5171\u9759\u6001\u8d44\u6e90\u76ee\u5f55\n\u251c\u2500\u2500 src # \u4e3b\u76ee\u5f55\n\u2502   \u251c\u2500\u2500 api # \u63a5\u53e3\u6587\u4ef6\n\u2502   \u251c\u2500\u2500 assets # \u8d44\u6e90\u6587\u4ef6\n\u2502   \u2502   \u251c\u2500\u2500 icons # icon sprite \u56fe\u6807\u6587\u4ef6\u5939\n\u2502   \u2502   \u251c\u2500\u2500 images # \u9879\u76ee\u5b58\u653e\u56fe\u7247\u7684\u6587\u4ef6\u5939\n\u2502   \u2502   \u2514\u2500\u2500 svg # \u9879\u76ee\u5b58\u653esvg\u56fe\u7247\u7684\u6587\u4ef6\u5939\n\u2502   \u251c\u2500\u2500 components # \u516c\u5171\u7ec4\u4ef6\n\u2502   \u251c\u2500\u2500 design # \u6837\u5f0f\u6587\u4ef6\n\u2502   \u251c\u2500\u2500 directives # \u6307\u4ee4\n\u2502   \u251c\u2500\u2500 enums # \u679a\u4e3e/\u5e38\u91cf\n\u2502   \u251c\u2500\u2500 hooks # hook\n\u2502   \u2502   \u251c\u2500\u2500 component # \u7ec4\u4ef6\u76f8\u5173hook\n\u2502   \u2502   \u251c\u2500\u2500 core # \u57fa\u7840hook\n\u2502   \u2502   \u251c\u2500\u2500 event # \u4e8b\u4ef6\u76f8\u5173hook\n\u2502   \u2502   \u251c\u2500\u2500 setting # \u914d\u7f6e\u76f8\u5173hook\n\u2502   \u2502   \u2514\u2500\u2500 web # web\u76f8\u5173hook\n\u2502   \u251c\u2500\u2500 layouts # \u5e03\u5c40\u6587\u4ef6\n\u2502   \u2502   \u251c\u2500\u2500 default # \u9ed8\u8ba4\u5e03\u5c40\n\u2502   \u2502   \u251c\u2500\u2500 iframe # iframe\u5e03\u5c40\n\u2502   \u2502   \u2514\u2500\u2500 page # \u9875\u9762\u5e03\u5c40\n\u2502   \u251c\u2500\u2500 locales # \u591a\u8bed\u8a00\n\u2502   \u251c\u2500\u2500 logics # \u903b\u8f91\n\u2502   \u251c\u2500\u2500 main.ts # \u4e3b\u5165\u53e3\n\u2502   \u251c\u2500\u2500 router # \u8def\u7531\u914d\u7f6e\n\u2502   \u251c\u2500\u2500 services # Nswag\u751f\u6210\u7684\u4ee3\u7406\n\u2502   \u2502   \u251c\u2500\u2500 ServiceProxies.ts # Nswag\u751f\u6210\u7684\u4ee3\u7406\n\u2502   \u2502   \u251c\u2500\u2500 ServiceProxyBase.ts # Nswag\u751f\u6210\u7684\u4ee3\u7406\u62e6\u622a\u5668\n\u2502   \u251c\u2500\u2500 settings # \u9879\u76ee\u914d\u7f6e\n\u2502   \u2502   \u251c\u2500\u2500 componentSetting.ts # \u7ec4\u4ef6\u914d\u7f6e\n\u2502   \u2502   \u251c\u2500\u2500 designSetting.ts # \u6837\u5f0f\u914d\u7f6e\n\u2502   \u2502   \u251c\u2500\u2500 encryptionSetting.ts # \u52a0\u5bc6\u914d\u7f6e\n\u2502   \u2502   \u251c\u2500\u2500 localeSetting.ts # \u591a\u8bed\u8a00\u914d\u7f6e\n\u2502   \u2502   \u251c\u2500\u2500 projectSetting.ts # \u9879\u76ee\u914d\u7f6e\n\u2502   \u2502   \u2514\u2500\u2500 siteSetting.ts # \u7ad9\u70b9\u914d\u7f6e\n\u2502   \u251c\u2500\u2500 store # \u6570\u636e\u4ed3\u5e93\n\u2502   \u251c\u2500\u2500 utils # \u5de5\u5177\u7c7b\n\u2502   \u2514\u2500\u2500 views # \u9875\u9762\n\u251c\u2500\u2500 test # \u6d4b\u8bd5\n\u2502   \u2514\u2500\u2500 server # \u6d4b\u8bd5\u7528\u5230\u7684\u670d\u52a1\n\u2502       \u251c\u2500\u2500 api # \u6d4b\u8bd5\u670d\u52a1\u5668\n\u2502       \u251c\u2500\u2500 upload # \u6d4b\u8bd5\u4e0a\u4f20\u670d\u52a1\u5668\n\u2502       \u2514\u2500\u2500 websocket # \u6d4b\u8bd5ws\u670d\u52a1\u5668\n\u251c\u2500\u2500 types # \u7c7b\u578b\u6587\u4ef6\n\u251c\u2500\u2500 vite.config.ts # vite\u914d\u7f6e\u6587\u4ef6\n\u2514\u2500\u2500 windi.config.ts # windcss\u914d\u7f6e\u6587\u4ef6\n</code></pre>"},{"location":"user-guide/zh/getting-started/quick-start/","title":"\u5feb\u901f\u5f00\u59cb","text":""},{"location":"user-guide/zh/getting-started/quick-start/#_2","title":"\u5148\u51b3\u6761\u4ef6","text":"<ul> <li>dotnet core 7.0.401</li> <li>nodejs 16+</li> <li>pnpm</li> <li>mysql</li> <li>redis</li> <li>rabbitmq \u53ef\u9009</li> </ul>"},{"location":"user-guide/zh/getting-started/quick-start/#cli","title":"\u5b89\u88c5 CLI \u5de5\u5177","text":"Bash<pre><code>dotnet tool install Lion.AbpPro.Cli -g\n</code></pre>"},{"location":"user-guide/zh/getting-started/quick-start/#_3","title":"\u521b\u5efa\u9879\u76ee","text":"<ul> <li>\u9879\u76ee\u9009\u62e9</li> </ul> Bash<pre><code>lion.abp new -t pro -c \u516c\u53f8\u540d\u79f0 -p \u9879\u76ee\u540d\u79f0  -o \u8f93\u51fa\u8def\u5f84(\u53ef\u9009)\nlion.abp new -t pro.all -c \u516c\u53f8\u540d\u79f0 -p \u9879\u76ee\u540d\u79f0  -o \u8f93\u51fa\u8def\u5f84(\u53ef\u9009)\nlion.abp new -t pro.simplify -c \u516c\u53f8\u540d\u79f0 -p \u9879\u76ee\u540d\u79f0  -o \u8f93\u51fa\u8def\u5f84(\u53ef\u9009)\nlion.abp new -t pro.module -c \u516c\u53f8\u540d\u79f0 -p \u9879\u76ee\u540d\u79f0  -m \u6a21\u5757\u540d\u79f0  -o \u8f93\u51fa\u8def\u5f84(\u53ef\u9009)\n</code></pre> <ul> <li>\u521b\u5efa\u793a\u4f8b\u9879\u76ee</li> </ul> Bash<pre><code># \u521b\u5efa\u4e00\u4e2a\u516c\u53f8\u540d\u79f0\u4e3aAcme\u9879\u76ee\u540d\u4e3aBookStore\u7684\u5355\u4f53\u9879\u76ee\nlion.abp new -t pro.simplify -c Acme -p BookStore\n</code></pre>"},{"location":"user-guide/zh/getting-started/quick-start/#_4","title":"\u540e\u7aef\u4fee\u6539\u914d\u7f6e","text":"<ul> <li>\u4fee\u6539 HttpApi.Host-&gt; appsettings.json \u914d\u7f6e</li> <li>Mysql \u8fde\u63a5\u5b57\u7b26\u4e32</li> <li>Redis \u8fde\u63a5\u5b57\u7b26\u4e32</li> <li>\u4fee\u6539 DbMigrator-&gt; appsettings.json \u6570\u636e\u5e93\u8fde\u63a5\u5b57\u7b26\u4e32</li> <li>\u53f3\u952e\u5355\u51fb.DbMigrator \u9879\u76ee,\u8bbe\u7f6e\u4e3a\u542f\u52a8\u9879\u76ee\u8fd0\u884c\uff0c\u6309 F5(\u6216 Ctrl + F5) \u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f. \u5b83\u5c06\u5177\u6709\u5982\u4e0b\u6240\u793a\u7684\u8f93\u51fa:   </li> </ul> <p>Note</p> <p>\u521d\u59cb\u7684\u79cd\u5b50\u6570\u636e\u5728\u6570\u636e\u5e93\u4e2d\u521b\u5efa\u4e86 admin \u7528\u6237(\u5bc6\u7801\u4e3a1q2w3E*) \u7528\u4e8e\u767b\u5f55\u5e94\u7528\u7a0b\u5e8f. \u6240\u4ee5, \u5bf9\u4e8e\u65b0\u6570\u636e\u5e93\u81f3\u5c11\u4f7f\u7528 .DbMigrator \u4e00\u6b21.</p> <ul> <li>\u542f\u52a8 HttpApi.Host\uff0c\u5c31\u80fd\u770b\u5230\u540e\u53f0\u670d\u52a1\u767b\u9646\u9875\u9762\uff0c\u5982\u4e0b\uff1a   </li> </ul>"},{"location":"user-guide/zh/getting-started/quick-start/#_5","title":"\u524d\u7aef","text":"<ul> <li>Vben Admin \u6587\u6863</li> </ul>"},{"location":"user-guide/zh/getting-started/quick-start/#_6","title":"\u5b89\u88c5\u4f9d\u8d56","text":"Bash<pre><code>pnpm install\n</code></pre>"},{"location":"user-guide/zh/getting-started/quick-start/#_7","title":"\u542f\u52a8\u9879\u76ee","text":"Bash<pre><code>pnpm run dev\n</code></pre>"},{"location":"user-guide/zh/infrastructure/AutoMapper/","title":"\u5bf9\u8c61\u5230\u5bf9\u8c61\u6620\u5c04","text":"<p>\u5c06\u5bf9\u8c61\u6620\u5c04\u5230\u53e6\u4e00\u4e2a\u5bf9\u8c61\u662f\u5e38\u7528\u5e76\u4e14\u7e41\u7410\u91cd\u590d\u7684\u5de5\u4f5c,\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\u4e24\u4e2a\u7c7b\u90fd\u5177\u6709\u76f8\u540c\u6216\u76f8\u4f3c\u7684\u5c5e\u6027. ABP \u63d0\u4f9b\u4e86\u5bf9\u8c61\u5230\u5bf9\u8c61\u6620\u5c04\u7684\u62bd\u8c61\u5e76\u96c6\u6210\u4e86AutoMapper\u505a\u4e3a\u5bf9\u8c61\u6620\u5c04\u5668.</p>"},{"location":"user-guide/zh/infrastructure/AutoMapper/#automapper","title":"AutoMapper \u96c6\u6210","text":"<p>AutoMapper \u662f\u6700\u6d41\u884c\u7684\u5bf9\u8c61\u5230\u5bf9\u8c61\u6620\u5c04\u5e93\u4e4b\u4e00. Volo.Abp.AutoMapper\u7a0b\u5e8f\u5305\u4f7f\u7528 AutoMapper \u5b9e\u73b0\u4e86 <code>IObjectMapper</code>.</p>"},{"location":"user-guide/zh/infrastructure/AutoMapper/#_2","title":"\u5b9a\u4e49\u6620\u5c04","text":"<p>AutoMapper \u63d0\u4f9b\u4e86\u591a\u79cd\u5b9a\u4e49\u7c7b\u4e4b\u95f4\u6620\u5c04\u7684\u65b9\u6cd5. \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\u8bf7\u53c2\u9605AutoMapper \u7684\u6587\u6863.</p> <p>\u5176\u4e2d\u5b9a\u4e49\u4e00\u79cd\u6620\u5c04\u7684\u65b9\u6cd5\u662f\u521b\u5efa\u4e00\u4e2aProfile \u7c7b. \u4f8b\u5982:</p> C#<pre><code>public class MyProfile : Profile\n{\n    public MyProfile()\n    {\n        CreateMap&lt;User, UserDto&gt;();\n    }\n}\n</code></pre> <p>\u7136\u540e\u4f7f\u7528<code>AbpAutoMapperOptions</code>\u6ce8\u518c\u914d\u7f6e\u6587\u4ef6:</p> C#<pre><code>[DependsOn(typeof(AbpAutoMapperModule))]\npublic class MyModule : AbpModule\n{\n    public override void ConfigureServices(ServiceConfigurationContext context)\n    {\n        Configure&lt;AbpAutoMapperOptions&gt;(options =&gt;\n        {\n            //Add all mappings defined in the assembly of the MyModule class\n            options.AddMaps&lt;MyModule&gt;();\n        });\n    }\n}\n</code></pre> <p><code>AddMaps</code> \u6ce8\u518c\u7ed9\u5b9a\u7c7b\u7684\u7a0b\u5e8f\u96c6\u4e2d\u6240\u6709\u7684\u914d\u7f6e\u7c7b,\u901a\u5e38\u4f7f\u7528\u6a21\u5757\u7c7b. \u5b83\u8fd8\u4f1a\u6ce8\u518c attribute \u6620\u5c04.</p>"},{"location":"user-guide/zh/infrastructure/AutoMapper/#_3","title":"\u914d\u7f6e\u9a8c\u8bc1","text":"<p><code>AddMaps</code> \u4f7f\u7528\u53ef\u9009\u7684 <code>bool</code> \u53c2\u6570\u63a7\u5236\u6a21\u5757\u7684\u914d\u7f6e\u9a8c\u8bc1:</p> C#<pre><code>options.AddMaps&lt;MyModule&gt;(validate: true);\n</code></pre> <p>\u5982\u679c\u6b64\u9009\u9879\u9ed8\u8ba4\u662f <code>false</code> , \u4f46\u6700\u4f73\u5b9e\u8df5\u5efa\u8bae\u542f\u7528. \u53ef\u4ee5\u4f7f\u7528 <code>AddProfile</code> \u800c\u4e0d\u662f <code>AddMaps</code> \u6765\u63a7\u5236\u6bcf\u4e2a\u914d\u7f6e\u6587\u4ef6\u7c7b\u7684\u914d\u7f6e\u9a8c\u8bc1:</p> C#<pre><code>options.AddProfile&lt;MyProfile&gt;(validate: true);\n</code></pre> <p>\u5982\u679c\u4f60\u6709\u591a\u4e2a\u914d\u7f6e\u6587\u4ef6,\u5e76\u4e14\u53ea\u9700\u8981\u4e3a\u5176\u4e2d\u51e0\u4e2a\u542f\u7528\u9a8c\u8bc1,\u90a3\u4e48\u9996\u5148\u4f7f\u7528<code>AddMaps</code>\u800c\u4e0d\u8fdb\u884c\u9a8c\u8bc1,\u7136\u540e\u4e3a\u4f60\u60f3\u8981\u9a8c\u8bc1\u7684\u6bcf\u4e2a\u914d\u7f6e\u6587\u4ef6\u4f7f\u7528<code>AddProfile</code>.</p>"},{"location":"user-guide/zh/infrastructure/AutoMapper/#_4","title":"\u6620\u5c04\u5bf9\u8c61\u6269\u5c55","text":"<p>\u5bf9\u8c61\u6269\u5c55\u7cfb\u7edf \u5141\u8bb8\u4e3a\u5df2\u5b58\u5728\u7684\u7c7b\u5b9a\u4e49\u989d\u5916\u5c5e\u6027. ABP \u6846\u67b6\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6620\u5c04\u5b9a\u4e49\u6269\u5c55\u53ef\u4ee5\u6b63\u786e\u7684\u6620\u5c04\u4e24\u4e2a\u5bf9\u8c61\u7684\u989d\u5916\u5c5e\u6027.</p> C#<pre><code>public class MyProfile : Profile\n{\n    public MyProfile()\n    {\n        CreateMap&lt;User, UserDto&gt;()\n            .MapExtraProperties();\n    }\n}\n</code></pre> <p>\u5982\u679c\u4e24\u4e2a\u7c7b\u90fd\u662f\u53ef\u6269\u5c55\u5bf9\u8c61(\u5b9e\u73b0\u4e86 <code>IHasExtraProperties</code> \u63a5\u53e3),\u5efa\u8bae\u4f7f\u7528 <code>MapExtraProperties</code> \u65b9\u6cd5. \u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u9605\u5bf9\u8c61\u6269\u5c55\u6587\u6863.</p>"},{"location":"user-guide/zh/infrastructure/AutoMapper/#_5","title":"\u5176\u4ed6\u6709\u7528\u7684\u6269\u5c55\u65b9\u6cd5","text":"<p>\u6709\u4e00\u4e9b\u6269\u5c55\u65b9\u6cd5\u53ef\u4ee5\u7b80\u5316\u6620\u5c04\u4ee3\u7801.</p>"},{"location":"user-guide/zh/infrastructure/AutoMapper/#_6","title":"\u5ffd\u89c6\u5ba1\u8ba1\u5c5e\u6027","text":"<p>\u5f53\u4f60\u5c06\u4e00\u4e2a\u5bf9\u8c61\u6620\u5c04\u5230\u53e6\u4e00\u4e2a\u5bf9\u8c61\u65f6,\u901a\u5e38\u4f1a\u5ffd\u7565\u5ba1\u6838\u5c5e\u6027.</p> <p>\u5047\u8bbe\u4f60\u9700\u8981\u5c06 <code>ProductDto</code> (DTO)\u6620\u5c04\u5230 Product\u5b9e\u4f53,\u8be5\u5b9e\u4f53\u662f\u4ece <code>AuditedEntity</code> \u7c7b\u7ee7\u627f\u7684(\u8be5\u7c7b\u63d0\u4f9b\u4e86 <code>CreationTime</code>, <code>CreatorId</code>, <code>IHasModificationTime</code> \u7b49\u5c5e\u6027).</p> <p>\u4ece DTO \u6620\u5c04\u65f6\u4f60\u53ef\u80fd\u60f3\u5ffd\u7565\u8fd9\u4e9b\u57fa\u672c\u5c5e\u6027,\u53ef\u4ee5\u4f7f\u7528 <code>IgnoreAuditedObjectPropertie()</code> \u65b9\u6cd5\u5ffd\u7565\u6240\u6709\u5ba1\u8ba1\u5c5e\u6027(\u800c\u4e0d\u662f\u624b\u52a8\u9010\u4e2a\u5ffd\u7565\u5b83\u4eec):</p> C#<pre><code>public class MyProfile : Profile\n{\n    public MyProfile()\n    {\n        CreateMap&lt;ProductDto, Product&gt;()\n            .IgnoreAuditedObjectProperties();\n    }\n}\n</code></pre> <p>\u8fd8\u6709\u66f4\u591a\u6269\u5c55\u65b9\u6cd5, \u5982 <code>IgnoreFullAuditedObjectProperties()</code> \u548c <code>IgnoreCreationAuditedObjectProperties()</code>,\u4f60\u53ef\u4ee5\u6839\u636e\u5b9e\u4f53\u7c7b\u578b\u4f7f\u7528.</p> <p>\u8bf7\u53c2\u9605\u5b9e\u4f53\u6587\u6863\u4e2d\u7684\"\u57fa\u7c7b\u548c\u63a5\u53e3\u7684\u5ba1\u8ba1\u5c5e\u6027\"\u90e8\u5206\u4e86\u89e3\u6709\u5173\u5ba1\u8ba1\u5c5e\u6027\u7684\u66f4\u591a\u4fe1\u606f\u3002</p>"},{"location":"user-guide/zh/infrastructure/AutoMapper/#_7","title":"\u5ffd\u89c6\u5176\u4ed6\u5c5e\u6027","text":"<p>\u5728 AutoMapper \u4e2d,\u901a\u5e38\u53ef\u4ee5\u7f16\u5199\u8fd9\u6837\u7684\u6620\u5c04\u4ee3\u7801\u6765\u5ffd\u7565\u5c5e\u6027:</p> C#<pre><code>public class MyProfile : Profile\n{\n    public MyProfile()\n    {\n        CreateMap&lt;SimpleClass1, SimpleClass2&gt;()\n            .ForMember(x =&gt; x.CreationTime, map =&gt; map.Ignore());\n    }\n}\n</code></pre> <p>\u6211\u4eec\u53d1\u73b0\u5b83\u7684\u957f\u5ea6\u662f\u4e0d\u5fc5\u8981\u7684\u5e76\u4e14\u521b\u5efa\u4e86 <code>Ignore()</code> \u6269\u5c55\u65b9\u6cd5:</p> C#<pre><code>public class MyProfile : Profile\n{\n    public MyProfile()\n    {\n        CreateMap&lt;SimpleClass1, SimpleClass2&gt;()\n            .Ignore(x =&gt; x.CreationTime);\n    }\n}\n</code></pre>"},{"location":"user-guide/zh/infrastructure/AutoMapper/#_8","title":"\u4f7f\u7528","text":"C#<pre><code>// \u6ce8\u5165IObjectMapper\npublic virtual async Task&lt;LanguageDto&gt; GetAsync(string cultureName)\n{\n    var entity = await _languageRepository.FindAsync(cultureName);\n    return ObjectMapper.Map&lt;Language, LanguageDto&gt;(entity);\n}\n</code></pre>"},{"location":"user-guide/zh/infrastructure/CorsOrigins/","title":"\u8de8\u57df","text":""},{"location":"user-guide/zh/infrastructure/CorsOrigins/#cors","title":"\u8de8\u57df(CORS)","text":"<ul> <li>\u5141\u8bb8\u6307\u5b9a\u7b56\u7565</li> </ul> appsetting.json<pre><code>\"App\": {\n    // \u9017\u53f7\u5206\u9694\n    \"CorsOrigins\": \"http://*.com,http://localhost:4200\"\n  },\n</code></pre> <ul> <li>\u914d\u7f6e\u8de8\u57df</li> </ul> C#<pre><code>private void ConfigureCors(ServiceConfigurationContext context)\n{\n    var configuration = context.Services.GetConfiguration();\n    context.Services.AddCors(options =&gt;\n    {\n        options.AddPolicy(DefaultCorsPolicyName, builder =&gt;\n        {\n            builder\n                .WithOrigins(\n                    configuration[\"App:CorsOrigins\"]\n                        .Split(\",\", StringSplitOptions.RemoveEmptyEntries)\n                        .Select(o =&gt; o.RemovePostFix(\"/\"))\n                        .ToArray()\n                )\n                .WithAbpExposedHeaders()\n                .SetIsOriginAllowedToAllowWildcardSubdomains()\n                .AllowAnyHeader()\n                .AllowAnyMethod()\n                .AllowCredentials();\n        });\n    });\n}\n</code></pre>"},{"location":"user-guide/zh/infrastructure/CurrentUser/","title":"\u5f53\u524d\u7528\u6237","text":"<p>\u5728 Web \u5e94\u7528\u7a0b\u5e8f\u4e2d\u68c0\u7d22\u6709\u5173\u5df2\u767b\u5f55\u7528\u6237\u7684\u4fe1\u606f\u662f\u5f88\u5e38\u89c1\u7684. \u5f53\u524d\u7528\u6237\u662f\u4e0e Web \u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u5f53\u524d\u8bf7\u6c42\u76f8\u5173\u7684\u6d3b\u52a8\u7528\u6237.</p>"},{"location":"user-guide/zh/infrastructure/CurrentUser/#icurrentuser","title":"ICurrentUser","text":"<p><code>ICurrentUser</code> \u662f\u4e3b\u8981\u7684\u670d\u52a1,\u7528\u4e8e\u83b7\u53d6\u6709\u5173\u5f53\u524d\u6d3b\u52a8\u7684\u7528\u6237\u4fe1\u606f.</p> <p>\u793a\u4f8b: [\u6ce8\u5165] <code>ICurrentUser</code> \u5230\u670d\u52a1\u4e2d:</p> C#<pre><code>using System;\nusing Volo.Abp.DependencyInjection;\nusing Volo.Abp.Users;\n\nnamespace AbpDemo\n{\n    public class MyService : ITransientDependency\n    {\n        private readonly ICurrentUser _currentUser;\n\n        public MyService(ICurrentUser currentUser)\n        {\n            _currentUser = currentUser;\n        }\n\n        public void Foo()\n        {\n            Guid? userId = _currentUser.Id;\n        }\n    }\n}\n</code></pre> <p>\u516c\u5171\u57fa\u7c7b\u5df2\u7ecf\u5c06\u6b64\u670d\u52a1\u4f5c\u4e3a\u57fa\u672c\u5c5e\u6027\u6ce8\u5165. \u4f8b\u5982\u4f60\u53ef\u4ee5\u76f4\u63a5\u5728\u5e94\u7528\u670d\u52a1\u4e2d\u4f7f\u7528 <code>CurrentUser</code> \u5c5e\u6027:</p> C#<pre><code>using System;\nusing Volo.Abp.Application.Services;\n\nnamespace AbpDemo\n{\n    public class MyAppService : ApplicationService\n    {\n        public void Foo()\n        {\n            Guid? userId = CurrentUser.Id;\n        }\n    }\n}\n</code></pre>"},{"location":"user-guide/zh/infrastructure/CurrentUser/#_2","title":"\u5c5e\u6027","text":"<p>\u4ee5\u4e0b\u662f <code>ICurrentUser</code> \u63a5\u53e3\u7684\u57fa\u672c\u5c5e\u6027:</p> <ul> <li>IsAuthenticated \u5982\u679c\u5f53\u524d\u7528\u6237\u5df2\u767b\u5f55(\u5df2\u8ba4\u8bc1),\u5219\u8fd4\u56de <code>true</code>. \u5982\u679c\u7528\u6237\u5c1a\u672a\u767b\u5f55,\u5219 <code>Id</code> \u548c <code>UserName</code> \u5c06\u8fd4\u56de <code>null</code>.</li> <li>Id (Guid?): \u5f53\u524d\u7528\u6237\u7684 Id,\u5982\u679c\u7528\u6237\u672a\u767b\u5f55,\u8fd4\u56de <code>null</code>.</li> <li>UserName (string): \u5f53\u524d\u7528\u6237\u7684\u7528\u6237\u540d\u79f0. \u5982\u679c\u7528\u6237\u672a\u767b\u5f55,\u8fd4\u56de <code>null</code>.</li> <li>TenantId (Guid?): \u5f53\u524d\u7528\u6237\u7684\u79df\u6237 Id. \u5bf9\u4e8e\u591a\u79df\u6237 \u5e94\u7528\u7a0b\u5e8f\u5f88\u6709\u7528. \u5982\u679c\u5f53\u524d\u7528\u6237\u672a\u5206\u914d\u7ed9\u79df\u6237,\u8fd4\u56de <code>null</code>.</li> <li>Email (string): \u5f53\u524d\u7528\u6237\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740. \u5982\u679c\u5f53\u524d\u7528\u6237\u5c1a\u672a\u767b\u5f55\u6216\u672a\u8bbe\u7f6e\u7535\u5b50\u90ae\u4ef6\u5730\u5740,\u8fd4\u56de <code>null</code>.</li> <li>EmailVerified (bool): \u5982\u679c\u5f53\u524d\u7528\u6237\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u5df2\u7ecf\u8fc7\u9a8c\u8bc1,\u8fd4\u56de <code>true</code>.</li> <li>PhoneNumber (string): \u5f53\u524d\u7528\u6237\u7684\u7535\u8bdd\u53f7\u7801. \u5982\u679c\u5f53\u524d\u7528\u6237\u5c1a\u672a\u767b\u5f55\u6216\u672a\u8bbe\u7f6e\u7535\u8bdd\u53f7\u7801,\u8fd4\u56de <code>null</code>.</li> <li>PhoneNumberVerified (bool): \u5982\u679c\u5f53\u524d\u7528\u6237\u7684\u7535\u8bdd\u53f7\u7801\u5df2\u7ecf\u8fc7\u9a8c\u8bc1,\u8fd4\u56de <code>true</code>.</li> <li>Roles (string[]): \u5f53\u524d\u7528\u6237\u7684\u89d2\u8272. \u8fd4\u56de\u5f53\u524d\u7528\u6237\u89d2\u8272\u540d\u79f0\u7684\u5b57\u7b26\u4e32\u6570\u7ec4.</li> </ul>"},{"location":"user-guide/zh/infrastructure/CurrentUser/#methods","title":"Methods","text":"<p><code>ICurrentUser</code> \u662f\u5728 <code>ICurrentPrincipalAccessor</code> \u4e0a\u5b9e\u73b0\u7684(\u8bf7\u53c2\u9605\u4ee5\u4e0b\u90e8\u5206),\u5e76\u53ef\u4ee5\u5904\u7406\u58f0\u660e. \u5b9e\u9645\u4e0a\u6240\u6709\u4e0a\u8ff0\u5c5e\u6027\u90fd\u662f\u4ece\u5f53\u524d\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u7684\u7528\u6237\u7684\u58f0\u660e\u4e2d\u68c0\u7d22\u7684.</p> <p>\u5982\u679c\u4f60\u6709\u81ea\u5b9a\u4e49\u58f0\u660e\u6216\u83b7\u53d6\u5176\u4ed6\u975e\u5e38\u89c1\u58f0\u660e\u7c7b\u578b, <code>ICurrentUser</code> \u6709\u4e00\u4e9b\u76f4\u63a5\u4f7f\u7528\u58f0\u660e\u7684\u65b9\u6cd5.</p> <ul> <li>FindClaim: \u83b7\u53d6\u7ed9\u5b9a\u540d\u79f0\u7684\u58f0\u660e,\u5982\u679c\u672a\u627e\u5230\u8fd4\u56de <code>null</code>.</li> <li>FindClaims: \u83b7\u53d6\u5177\u6709\u7ed9\u5b9a\u540d\u79f0\u7684\u6240\u6709\u58f0\u660e(\u5141\u8bb8\u5177\u6709\u76f8\u540c\u540d\u79f0\u7684\u591a\u4e2a\u58f0\u660e\u503c).</li> <li>GetAllClaims: \u83b7\u53d6\u6240\u6709\u58f0\u660e.</li> <li>IsInRole: \u4e00\u79cd\u68c0\u67e5\u5f53\u524d\u7528\u6237\u662f\u5426\u5728\u6307\u5b9a\u89d2\u8272\u4e2d\u7684\u7b80\u5316\u65b9\u6cd5.</li> </ul> <p>\u9664\u4e86\u8fd9\u4e9b\u6807\u51c6\u65b9\u6cd5,\u8fd8\u6709\u4e00\u4e9b\u6269\u5c55\u65b9\u6cd5:</p> <ul> <li>FindClaimValue: \u83b7\u53d6\u5177\u6709\u7ed9\u5b9a\u540d\u79f0\u7684\u58f0\u660e\u7684\u503c,\u5982\u679c\u672a\u627e\u5230\u8fd4\u56de <code>null</code>. \u5b83\u6709\u4e00\u4e2a\u6cdb\u578b\u91cd\u8f7d\u5c06\u503c\u5f3a\u5236\u8f6c\u6362\u4e3a\u7279\u5b9a\u7c7b\u578b.</li> <li>GetId: \u8fd4\u56de\u5f53\u524d\u7528\u6237\u7684 <code>Id</code>. \u5982\u679c\u5f53\u524d\u7528\u6237\u6ca1\u6709\u767b\u5f55\u5b83\u4f1a\u629b\u51fa\u4e00\u4e2a\u5f02\u5e38(\u800c\u4e0d\u662f\u8fd4\u56de<code>null</code>). \u4ec5\u5728\u4f60\u786e\u5b9a\u7528\u6237\u5df2\u7ecf\u5728\u4f60\u7684\u4ee3\u7801\u4e0a\u4e0b\u6587\u4e2d\u8fdb\u884c\u4e86\u8eab\u4efd\u9a8c\u8bc1\u65f6\u624d\u4f7f\u7528\u6b64\u9009\u9879.</li> </ul>"},{"location":"user-guide/zh/infrastructure/CurrentUser/#_3","title":"\u9a8c\u8bc1\u548c\u6388\u6743","text":"<p><code>ICurrentUser</code> \u7684\u5de5\u4f5c\u65b9\u5f0f\u4e0e\u7528\u6237\u7684\u8eab\u4efd\u9a8c\u8bc1\u6216\u6388\u6743\u65b9\u5f0f\u65e0\u5173. \u5b83\u53ef\u4ee5\u4e0e\u4f7f\u7528\u5f53\u524d\u4e3b\u4f53\u7684\u4efb\u4f55\u8eab\u4efd\u9a8c\u8bc1\u7cfb\u7edf\u65e0\u7f1d\u5730\u914d\u5408\u4f7f\u7528(\u8bf7\u53c2\u9605\u4e0b\u9762\u7684\u90e8\u5206).</p>"},{"location":"user-guide/zh/infrastructure/CurrentUser/#icurrentprincipalaccessor","title":"ICurrentPrincipalAccessor","text":"<p><code>ICurrentPrincipalAccessor</code> \u662f\u5f53\u9700\u8981\u5f53\u524d\u7528\u6237\u7684 Principal \u65f6\u4f7f\u7528\u7684\u670d\u52a1(\u7531 ABP \u6846\u67b6\u548c\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\u4f7f\u7528).</p> <p>\u5bf9\u4e8e Web \u5e94\u7528\u7a0b\u5e8f, \u5b83\u83b7\u53d6\u5f53\u524d <code>HttpContext</code> \u7684 <code>User</code> \u5c5e\u6027,\u5bf9\u4e8e\u975e Web \u5e94\u7528\u7a0b\u5e8f\u5b83\u5c06\u8fd4\u56de <code>Thread.CurrentPrincipal</code>.</p> <p>\u901a\u5e38\u4f60\u4e0d\u9700\u8981\u8fd9\u79cd\u4f4e\u7ea7\u522b\u7684 <code>ICurrentPrincipalAccessor</code> \u670d\u52a1,\u76f4\u63a5\u4f7f\u7528\u4e0a\u8ff0\u7684 <code>ICurrentUser</code> \u5373\u53ef.</p>"},{"location":"user-guide/zh/infrastructure/CurrentUser/#_4","title":"\u57fa\u672c\u7528\u6cd5","text":"<p>\u4f60\u53ef\u4ee5\u6ce8\u5165 <code>ICurrentPrincipalAccessor</code> \u5e76\u4e14\u4f7f\u7528 <code>Principal</code> \u5c5e\u6027\u83b7\u53d6\u5f53\u524d principal:</p> C#<pre><code>public class MyService : ITransientDependency\n{\n    private readonly ICurrentPrincipalAccessor _currentPrincipalAccessor;\n\n    public MyService(ICurrentPrincipalAccessor currentPrincipalAccessor)\n    {\n        _currentPrincipalAccessor = currentPrincipalAccessor;\n    }\n\n    public void Foo()\n    {\n        var allClaims = _currentPrincipalAccessor.Principal.Claims.ToList();\n        //...\n    }\n}\n</code></pre>"},{"location":"user-guide/zh/infrastructure/CurrentUser/#principal","title":"\u66f4\u6539\u5f53\u524d Principal","text":"<p>\u9664\u4e86\u67d0\u4e9b\u9ad8\u7ea7\u573a\u666f\u5916,\u4f60\u4e0d\u9700\u8981\u8bbe\u7f6e\u6216\u66f4\u6539\u5f53\u524d Principal. \u5982\u679c\u9700\u8981\u53ef\u4ee5\u4f7f\u7528 <code>ICurrentPrincipalAccessor</code> \u7684 <code>Change</code> \u65b9\u6cd5. \u5b83\u63a5\u53d7\u4e00\u4e2a <code>ClaimsPrincipal</code> \u5bf9\u8c61\u5e76\u4f7f\u5176\u6210\u4e3a\u4f5c\u7528\u57df\u7684\"\u5f53\u524d\"\u5bf9\u8c61.</p> <p>\u793a\u4f8b:</p> C#<pre><code>public class MyAppService : ApplicationService\n{\n    private readonly ICurrentPrincipalAccessor _currentPrincipalAccessor;\n\n    public MyAppService(ICurrentPrincipalAccessor currentPrincipalAccessor)\n    {\n        _currentPrincipalAccessor = currentPrincipalAccessor;\n    }\n\n    public void Foo()\n    {\n        var newPrincipal = new ClaimsPrincipal(\n            new ClaimsIdentity(\n                new Claim[]\n                {\n                    new Claim(AbpClaimTypes.UserId, Guid.NewGuid().ToString()),\n                    new Claim(AbpClaimTypes.UserName, \"john\"),\n                    new Claim(\"MyCustomCliam\", \"42\")\n                }\n            )\n        );\n\n        using (_currentPrincipalAccessor.Change(newPrincipal))\n        {\n            var userName = CurrentUser.UserName; //returns \"john\"\n            //...\n        }\n    }\n}\n</code></pre> <p>\u59cb\u7ec8\u5728 <code>using</code> \u8bed\u53e5\u4e2d\u4f7f\u7528 <code>Change</code> \u65b9\u6cd5,\u5728 <code>using</code> \u8303\u56f4\u7ed3\u675f\u540e\u5b83\u5c06\u6062\u590d\u4e3a\u539f\u59cb\u503c.</p> <p>\u8fd9\u53ef\u4ee5\u662f\u4e00\u79cd\u6a21\u62df\u7528\u6237\u767b\u5f55\u7684\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\u8303\u56f4\u7684\u65b9\u6cd5,\u4f46\u662f\u8bf7\u5c1d\u8bd5\u8c28\u614e\u4f7f\u7528\u5b83.</p>"},{"location":"user-guide/zh/infrastructure/CurrentUser/#abpclaimtypes","title":"AbpClaimTypes","text":"<p><code>AbpClaimTypes</code> \u662f\u4e00\u4e2a\u9759\u6001\u7c7b\u5b83\u5b9a\u4e49\u4e86\u6807\u51c6\u58f0\u660e\u7684\u540d\u79f0\u88ab ABP \u6846\u67b6\u4f7f\u7528.</p> <ul> <li> <p><code>UserName</code>, <code>UserId</code>, <code>Role</code> \u548c <code>Email</code> \u5c5e\u6027\u7684\u9ed8\u8ba4\u503c\u662f\u901a\u5e38System.Security.Claims.ClaimTypes\u7c7b\u8bbe\u7f6e\u7684, \u4f46\u4f60\u53ef\u4ee5\u6539\u53d8\u5b83\u4eec.</p> </li> <li> <p>\u5176\u4ed6\u5c5e\u6027,\u5982 <code>EmailVerified</code>, <code>PhoneNumber</code>, <code>TenantId</code> ...\u662f\u7531 ABP \u6846\u67b6\u901a\u8fc7\u5c3d\u53ef\u80fd\u9075\u5faa\u6807\u51c6\u540d\u79f0\u6765\u5b9a\u4e49\u7684.</p> </li> </ul> <p>\u5efa\u8bae\u4f7f\u7528\u8fd9\u4e2a\u7c7b\u7684\u5c5e\u6027\u6765\u4ee3\u66ff\u58f0\u660e\u540d\u79f0\u7684\u9b54\u672f\u5b57\u7b26\u4e32.</p>"},{"location":"user-guide/zh/infrastructure/DataFiltering/","title":"\u6570\u636e\u8fc7\u6ee4","text":"<p>Volo.Abp.Data \u5305\u5b9a\u4e49\u4e86\u5728\u67e5\u8be2\u6570\u636e\u5e93\u65f6\u81ea\u52a8\u8fc7\u6ee4\u6570\u636e\u7684\u670d\u52a1.</p>"},{"location":"user-guide/zh/infrastructure/DataFiltering/#_2","title":"\u9884\u5b9a\u4e49\u7684\u8fc7\u6ee4","text":""},{"location":"user-guide/zh/infrastructure/DataFiltering/#isoftdelete","title":"ISoftDelete","text":"<p>\u5c06\u5b9e\u4f53\u6807\u8bb0\u4e3a\u5df2\u5220\u9664,\u5e76\u4e0d\u662f\u7269\u7406\u5220\u9664. \u5b9e\u73b0 <code>ISoftDelete</code> \u63a5\u53e3\u5c06\u4f60\u7684\u5b9e\u4f53\"\u8f6f\u5220\u9664\".</p> <p>\u793a\u4f8b:</p> C#<pre><code>namespace Acme.BookStore\n{\n    public class Book : AggregateRoot&lt;Guid&gt;, ISoftDelete\n    {\n        public string Name { get; set; }\n\n        public bool IsDeleted { get; set; } //Defined by ISoftDelete\n    }\n}\n</code></pre> <p><code>ISoftDelete</code> \u5b9a\u4e49\u4e86 <code>IsDeleted</code> \u5c5e\u6027. \u5f53\u4f60\u4f7f\u7528\u4ed3\u50a8\u5220\u9664\u4e00\u6761\u8bb0\u5f55\u65f6, ABP \u4f1a\u81ea\u52a8\u5c06 <code>IsDeleted</code> \u8bbe\u7f6e\u4e3a true,\u5e76\u5c06\u5220\u9664\u64cd\u4f5c\u66ff\u6362\u4e3a\u4fee\u6539\u64cd\u4f5c(\u5982\u679c\u9700\u8981,\u4e5f\u53ef\u4ee5\u624b\u52a8\u5c06 <code>IsDeleted</code> \u8bbe\u7f6e\u4e3a true). \u5728\u67e5\u8be2\u6570\u636e\u5e93\u65f6\u4f1a\u81ea\u52a8\u8fc7\u6ee4\u8f6f\u5220\u9664\u7684\u5b9e\u4f53.</p> <p><code>ISoftDelete</code> \u8fc7\u6ee4\u9ed8\u8ba4\u542f\u7528, \u60f3\u8981\u771f\u6b63\u7684\u4ece\u6570\u636e\u5e93\u5220\u9664\u5b9e\u4f53\u9700\u8981\u663e\u793a\u7684\u7981\u7528\u8fc7\u6ee4. \u53c2\u89c1\u4e0b\u9762\u63d0\u5230\u7684 <code>IDataFilter</code> \u670d\u52a1.</p>"},{"location":"user-guide/zh/infrastructure/DataFiltering/#imultitenant","title":"IMultiTenant","text":"<p>[\u591a\u79df\u6237]\u662f\u521b\u5efa SaaS \u5e94\u7528\u7a0b\u5e8f\u7684\u6709\u6548\u65b9\u6cd5. \u591a\u79df\u6237\u5e94\u7528\u7a0b\u5e8f\u901a\u5e38\u9700\u8981\u5728\u79df\u6237\u95f4\u9694\u79bb\u6570\u636e. \u5b9e\u73b0 <code>IMultiTenant</code> \u63a5\u53e3\u4f7f\u4f60\u7684\u5b9e\u4f53\u652f\u6301 \"\u591a\u79df\u6237\".</p> <p>\u793a\u4f8b:</p> C#<pre><code>namespace Acme.BookStore\n{\n    public class Book : AggregateRoot&lt;Guid&gt;, ISoftDelete, IMultiTenant\n    {\n        public string Name { get; set; }\n\n        public bool IsDeleted { get; set; } //Defined by ISoftDelete\n\n        public Guid? TenantId { get; set; } //Defined by IMultiTenant\n    }\n}\n</code></pre> <p><code>IMultiTenant</code> \u63a5\u53e3\u5b9a\u4e49\u4e86 <code>TenantId</code> \u5c5e\u6027\u7528\u4e8e\u81ea\u52a8\u8fc7\u6ee4\u5f53\u524d\u79df\u6237\u5b9e\u4f53. \u66f4\u591a\u4fe1\u606f\u53c2\u89c1[\u591a\u79df\u6237]\u6587\u6863.</p>"},{"location":"user-guide/zh/infrastructure/DataFiltering/#idatafilter","title":"IDataFilter \u670d\u52a1: \u542f\u7528/\u7981\u7528 \u6570\u636e\u8fc7\u6ee4","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>IDataFilter</code> \u670d\u52a1\u63a7\u5236\u6570\u636e\u8fc7\u6ee4.</p> <p>\u793a\u4f8b:</p> C#<pre><code>namespace Acme.BookStore\n{\n    public class MyBookService : ITransientDependency\n    {\n        private readonly IDataFilter _dataFilter;\n        private readonly IRepository&lt;Book, Guid&gt; _bookRepository;\n\n        public MyBookService(\n            IDataFilter dataFilter,\n            IRepository&lt;Book, Guid&gt; bookRepository)\n        {\n            _dataFilter = dataFilter;\n            _bookRepository = bookRepository;\n        }\n\n        public async Task&lt;List&lt;Book&gt;&gt; GetAllBooksIncludingDeletedAsync()\n        {\n            //Temporary disable the ISoftDelete filter\n            using (_dataFilter.Disable&lt;ISoftDelete&gt;())\n            {\n                return await _bookRepository.GetListAsync();\n            }\n        }\n    }\n}\n</code></pre> <ul> <li>[\u6ce8\u5165] <code>IDataFilter</code> \u670d\u52a1\u5230\u4f60\u7684\u7c7b\u4e2d.</li> <li>\u5728 <code>using</code> \u8bed\u53e5\u4e2d\u4f7f\u7528 <code>Disable</code> \u65b9\u6cd5\u521b\u5efa\u4e00\u4e2a\u4ee3\u7801\u5757,\u5176\u4e2d\u7981\u7528\u4e86 <code>ISoftDelete</code> \u8fc7\u6ee4\u5668(\u59cb\u7ec8\u4e0e <code>using</code> \u642d\u914d\u4f7f\u7528,\u786e\u4fdd\u4ee3\u7801\u5757\u6267\u884c\u540e\u5c06\u8fc7\u6ee4\u91cd\u7f6e\u4e3a\u4e4b\u524d\u7684\u72b6\u6001).</li> </ul> <p><code>IDataFilter.Enable</code> \u65b9\u6cd5\u53ef\u4ee5\u542f\u7528\u8fc7\u6ee4. \u53ef\u4ee5\u5d4c\u5957\u4f7f\u7528 <code>Enable</code> \u548c <code>Disable</code> \u65b9\u6cd5\u5b9a\u4e49\u5185\u90e8\u4f5c\u7528\u57df.</p>"},{"location":"user-guide/zh/infrastructure/DataFiltering/#abpdatafilteroptions","title":"AbpDataFilterOptions","text":"<p><code>AbpDataFilterOptions</code> \u7528\u4e8e\u8bbe\u7f6e\u6570\u636e\u8fc7\u6ee4\u7cfb\u7edf.</p> <p>\u4e0b\u9762\u7684\u793a\u4f8b\u4ee3\u7801\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u7981\u7528\u4e86 <code>ISoftDelete</code> \u8fc7\u6ee4,\u9664\u975e\u663e\u793a\u542f\u7528,\u5728\u67e5\u8be2\u6570\u636e\u5e93\u65f6\u4f1a\u5305\u542b\u6807\u8bb0\u4e3a\u5df2\u5220\u9664\u7684\u5b9e\u4f53:</p> C#<pre><code>Configure&lt;AbpDataFilterOptions&gt;(options =&gt;\n{\n    options.DefaultStates[typeof(ISoftDelete)] = new DataFilterState(isEnabled: false);\n});\n</code></pre> <p>\u66f4\u6539\u5168\u5c40\u8fc7\u6ee4\u7684\u9ed8\u8ba4\u503c\u9700\u8981\u5c0f\u5fc3,\u7279\u522b\u662f\u5728\u4f60\u4f7f\u7528\u9884\u6784\u5efa\u7684\u6a21\u5757\u65f6\u8be5\u6a21\u5757\u53ef\u80fd\u662f\u5728\u9ed8\u8ba4\u542f\u7528\u8f6f\u5220\u9664\u8fc7\u6ee4\u7684\u60c5\u51b5\u4e0b\u5f00\u53d1\u7684. \u4f46\u4f60\u53ef\u4ee5\u5b89\u5168\u7684\u4e3a\u81ea\u5df1\u5b9a\u4e49\u7684\u6570\u636e\u8fc7\u6ee4\u6267\u884c\u6b64\u64cd\u4f5c.</p>"},{"location":"user-guide/zh/infrastructure/DataFiltering/#_3","title":"\u81ea\u5b9a\u4e49\u6570\u636e\u8fc7\u6ee4","text":"<p>\u5b9a\u4e49\u548c\u5b9e\u73b0\u65b0\u7684\u8fc7\u6ee4\u5f88\u5927\u7a0b\u5e8f\u4e0a\u53d6\u51b3\u4e0e\u6570\u636e\u5e93\u63d0\u4f9b\u8005. ABP \u4e3a\u6240\u6709\u7684\u6570\u636e\u5e93\u63d0\u4f9b\u8005\u5b9e\u73b0\u4e86\u9884\u6784\u5efa\u7684\u8fc7\u6ee4.</p> <p>\u9996\u5148\u4e3a\u8fc7\u6ee4\u5b9a\u4e49\u4e00\u4e2a\u63a5\u53e3 (\u5982 <code>ISoftDelete</code> \u548c <code>IMultiTenant</code>) \u7136\u540e\u7528\u5b9e\u4f53\u5b9e\u73b0\u5b83.</p> <p>\u793a\u4f8b:</p> C#<pre><code>public interface IIsActive\n{\n    bool IsActive { get; }\n}\n</code></pre> <p><code>IIsActive</code> \u63a5\u53e3\u53ef\u4ee5\u8fc7\u6ee4\u6d3b\u8dc3/\u6d88\u6781\u6570\u636e,\u4efb\u4f55[\u5b9e\u4f53]\u90fd\u53ef\u4ee5\u5b9e\u73b0\u5b83:</p> C#<pre><code>public class Book : AggregateRoot&lt;Guid&gt;, IIsActive\n{\n    public string Name { get; set; }\n\n    public bool IsActive { get; set; } //Defined by IIsActive\n}\n</code></pre>"},{"location":"user-guide/zh/infrastructure/DataFiltering/#entityframework-core","title":"EntityFramework Core","text":"<p>ABP \u4f7f\u7528EF Core \u7684\u5168\u5c40\u8fc7\u6ee4\u7cfb\u7edf\u7528\u4e8e[EF Core \u96c6\u6210]. \u6240\u4ee5\u5b83\u5f88\u597d\u7684\u96c6\u6210\u5230 EF Core \u4e2d,\u5373\u4f7f\u4f60\u76f4\u63a5\u4f7f\u7528 <code>DbContext</code> \u5b83\u4e5f\u53ef\u4ee5\u6b63\u5e38\u5de5\u4f5c.</p> <p>\u5b9e\u73b0\u81ea\u5b9a\u4e49\u8fc7\u6ee4\u7684\u6700\u4f73\u65b9\u6cd5\u662f\u4e3a\u91cd\u5199\u4f60\u7684 <code>DbContext</code> \u7684 <code>ShouldFilterEntity</code> \u548c <code>CreateFilterExpression</code> \u65b9\u6cd5. \u793a\u4f8b:</p> C#<pre><code>protected bool IsActiveFilterEnabled =&gt; DataFilter?.IsEnabled&lt;IIsActive&gt;() ?? false;\n\nprotected override bool ShouldFilterEntity&lt;TEntity&gt;(IMutableEntityType entityType)\n{\n    if (typeof(IIsActive).IsAssignableFrom(typeof(TEntity)))\n    {\n        return true;\n    }\n\n    return base.ShouldFilterEntity&lt;TEntity&gt;(entityType);\n}\n\nprotected override Expression&lt;Func&lt;TEntity, bool&gt;&gt; CreateFilterExpression&lt;TEntity&gt;()\n{\n    var expression = base.CreateFilterExpression&lt;TEntity&gt;();\n\n    if (typeof(IIsActive).IsAssignableFrom(typeof(TEntity)))\n    {\n        Expression&lt;Func&lt;TEntity, bool&gt;&gt; isActiveFilter =\n            e =&gt; !IsActiveFilterEnabled || EF.Property&lt;bool&gt;(e, \"IsActive\");\n        expression = expression == null\n            ? isActiveFilter\n            : CombineExpressions(expression, isActiveFilter);\n    }\n\n    return expression;\n}\n</code></pre> <ul> <li>\u6dfb\u52a0 <code>IsActiveFilterEnabled</code> \u5c5e\u6027\u7528\u4e8e\u68c0\u67e5\u662f\u5426\u542f\u7528\u4e86 <code>IIsActive</code> . \u5185\u90e8\u4f7f\u7528\u4e86\u4e4b\u524d\u4ecb\u7ecd\u5230\u7684 <code>IDataFilter</code> \u670d\u52a1.</li> <li>\u91cd\u5199 <code>ShouldFilterEntity</code> \u548c <code>CreateFilterExpression</code> \u65b9\u6cd5\u68c0\u67e5\u7ed9\u5b9a\u5b9e\u4f53\u662f\u5426\u5b9e\u73b0 <code>IIsActive</code> \u63a5\u53e3,\u5728\u5fc5\u8981\u65f6\u7ec4\u5408\u8868\u8fbe\u5f0f.</li> </ul>"},{"location":"user-guide/zh/infrastructure/DataSeeding/","title":"\u79cd\u5b50\u6570\u636e","text":""},{"location":"user-guide/zh/infrastructure/DataSeeding/#_2","title":"\u4ecb\u7ecd","text":"<ul> <li>\u4f7f\u7528\u6570\u636e\u5e93\u7684\u67d0\u4e9b\u5e94\u7528\u7a0b\u5e8f(\u6216\u6a21\u5757),\u53ef\u80fd\u9700\u8981\u6709\u4e00\u4e9b\u521d\u59cb\u6570\u636e\u624d\u80fd\u591f\u6b63\u5e38\u542f\u52a8\u548c\u8fd0\u884c. \u4f8b\u5982\u7ba1\u7406\u5458\u7528\u6237\u548c\u89d2\u8272\u5fc5\u987b\u5728\u4e00\u5f00\u59cb\u5c31\u53ef\u7528. \u5426\u5219\u4f60\u5c31\u65e0\u6cd5\u767b\u5f55\u5230\u5e94\u7528\u7a0b\u5e8f\u521b\u5efa\u65b0\u7528\u6237\u548c\u89d2\u8272.</li> <li>\u6570\u636e\u79cd\u5b50\u4e5f\u53ef\u7528\u4e8e\u6d4b\u8bd5\u7684\u76ee\u7684,\u4f60\u7684\u81ea\u52a8\u6d4b\u8bd5\u53ef\u4ee5\u5047\u5b9a\u6570\u636e\u5e93\u4e2d\u6709\u4e00\u4e9b\u53ef\u7528\u7684\u521d\u59cb\u6570\u636e.</li> </ul>"},{"location":"user-guide/zh/infrastructure/DataSeeding/#idataseedcontributor","title":"IDataSeedContributor","text":"<p>\u5c06\u6570\u636e\u79cd\u5b50\u5316\u5230\u6570\u636e\u5e93\u9700\u8981\u5b9e\u73b0<code>IDataSeedContributor</code>\u63a5\u53e3.</p> <p>\u793a\u4f8b: \u5982\u679c\u6ca1\u6709\u56fe\u4e66,\u5219\u5411\u6570\u636e\u5e93\u64ad\u79cd\u4e00\u4e2a\u521d\u59cb\u56fe\u4e66</p> C#<pre><code>namespace Acme.BookStore\n{\n    public class BookStoreDataSeedContributor : IDataSeedContributor, ITransientDependency\n    {\n        private readonly IRepository&lt;Book, Guid&gt; _bookRepository;\n        private readonly IGuidGenerator _guidGenerator;\n        private readonly ICurrentTenant _currentTenant;\n\n        public BookStoreDataSeedContributor(\n            IRepository&lt;Book, Guid&gt; bookRepository,\n            IGuidGenerator guidGenerator,\n            ICurrentTenant currentTenant)\n        {\n            _bookRepository = bookRepository;\n            _guidGenerator = guidGenerator;\n            _currentTenant = currentTenant;\n        }\n\n        public async Task SeedAsync(DataSeedContext context)\n        {\n            using (_currentTenant.Change(context?.TenantId))\n            {\n                if (await _bookRepository.GetCountAsync() &gt; 0)\n                {\n                    return;\n                }\n\n                var book = new Book(\n                    id: _guidGenerator.Create(),\n                    name: \"The Hitchhiker's Guide to the Galaxy\",\n                    type: BookType.ScienceFiction,\n                    publishDate: new DateTime(1979, 10, 12),\n                    price: 42\n                );\n\n                await _bookRepository.InsertAsync(book);\n            }\n        }\n    }\n}\n</code></pre> <ul> <li><code>IDataSeedContributor</code> \u5b9a\u4e49\u4e86 <code>SeedAsync</code> \u65b9\u6cd5\u7528\u4e8e\u6267\u884c \u6570\u636e\u79cd\u5b50\u903b\u8f91.</li> <li>\u901a\u5e38\u68c0\u67e5\u6570\u636e\u5e93\u662f\u5426\u5df2\u7ecf\u5b58\u5728\u79cd\u5b50\u6570\u636e.</li> <li>\u4f60\u53ef\u4ee5\u6ce8\u5165\u670d\u52a1,\u68c0\u67e5\u6570\u636e\u64ad\u79cd\u6240\u9700\u7684\u4efb\u4f55\u903b\u8f91.</li> </ul> <p>\u6570\u636e\u79cd\u5b50\u8d21\u732e\u8005\u7531 ABP \u6846\u67b6\u81ea\u52a8\u53d1\u73b0,\u5e76\u4f5c\u4e3a\u6570\u636e\u64ad\u79cd\u8fc7\u7a0b\u7684\u4e00\u90e8\u5206\u6267\u884c.</p>"},{"location":"user-guide/zh/infrastructure/DataSeeding/#_3","title":"\u6a21\u5757\u5316","text":"<p>\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u5177\u6709\u591a\u4e2a\u79cd\u5b50\u6570\u636e\u8d21\u732e\u8005(<code>IDataSeedContributor</code>)\u7c7b. \u4efb\u4f55\u53ef\u91cd\u7528\u6a21\u5757\u4e5f\u53ef\u4ee5\u5b9e\u73b0\u6b64\u63a5\u53e3\u64ad\u79cd\u5176\u81ea\u5df1\u7684\u521d\u59cb\u6570\u636e.</p>"},{"location":"user-guide/zh/infrastructure/MultiTenancy/","title":"\u591a\u79df\u6237","text":""},{"location":"user-guide/zh/infrastructure/MultiTenancy/#_2","title":"\u5b9a\u4e49\u5b9e\u4f53","text":"<p>\u4f60\u53ef\u4ee5\u5728\u4f60\u7684\u5b9e\u4f53\u4e2d\u5b9e\u73b0 IMultiTenant \u63a5\u53e3\u6765\u5b9e\u73b0\u591a\u79df\u6237,\u4f8b\u5982:</p> C#<pre><code>namespace MyCompany.MyProject\n{\n    public class Product : AggregateRoot, IMultiTenant\n    {\n        public Guid? TenantId { get; set; } //IMultiTenant \u5b9a\u4e49\u4e86 TenantId \u5c5e\u6027\n\n        public string Name { get; set; }\n\n        public float Price { get; set; }\n    }\n}\n</code></pre> <p>\u5b9e\u73b0 IMultiTenant \u63a5\u53e3,\u9700\u8981\u5728\u5b9e\u4f53\u4e2d\u5b9a\u4e49\u4e00\u4e2a TenantId \u7684\u5c5e\u6027</p>"},{"location":"user-guide/zh/infrastructure/MultiTenancy/#_3","title":"\u83b7\u53d6\u5f53\u524d\u79df\u6237","text":"<p>\u4f60\u7684\u4ee3\u7801\u4e2d\u53ef\u80fd\u9700\u8981\u83b7\u53d6\u5f53\u524d\u79df\u6237(\u5148\u4e0d\u7ba1\u5b83\u5177\u4f53\u662f\u600e\u4e48\u53d6\u5f97\u7684).\u5bf9\u4e8e\u8fd9\u79cd\u60c5\u51b5\u4f60\u53ef\u4ee5\u6ce8\u5165\u5e76\u4f7f\u7528 ICurrentTenant \u63a5\u53e3.\u4f8b\u5982:</p> C#<pre><code>namespace MyCompany.MyProject\n{\n    public class MyService : ITransientDependency\n    {\n        private readonly ICurrentTenant _currentTenant;\n\n        public MyService(ICurrentTenant currentTenant)\n        {\n            _currentTenant = currentTenant;\n        }\n\n        public void DoIt()\n        {\n            var tenantId = _currentTenant.Id;\n            //\u5728\u4f60\u7684\u4ee3\u7801\u4e2d\u4f7f\u7528tenantId\n        }\n    }\n}\n</code></pre>"},{"location":"user-guide/zh/infrastructure/MultiTenancy/#_4","title":"\u6539\u53d8\u5f53\u524d\u79df\u6237","text":"C#<pre><code>namespace MultiTenancyDemo.Products\n{\n    public class ProductManager : DomainService\n    {\n        private readonly IRepository&lt;Product, Guid&gt; _productRepository;\n\n        public ProductManager(IRepository&lt;Product, Guid&gt; productRepository)\n        {\n            _productRepository = productRepository;\n        }\n\n        public async Task&lt;long&gt; GetProductCountAsync(Guid? tenantId)\n        {\n            using (CurrentTenant.Change(tenantId))\n            {\n                return await _productRepository.GetCountAsync();\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"user-guide/zh/infrastructure/MultiTenancy/#_5","title":"\u786e\u5b9a\u5f53\u524d\u79df\u6237","text":"<p>\u591a\u79df\u6237\u7684\u5e94\u7528\u7a0b\u5e8f\u8fd0\u884c\u7684\u65f6\u5019\u9996\u5148\u8981\u505a\u7684\u5c31\u662f\u786e\u5b9a\u5f53\u524d\u79df\u6237. Volo.Abp.MultiTenancy \u53ea\u63d0\u4f9b\u4e86\u7528\u4e8e\u786e\u5b9a\u5f53\u524d\u79df\u6237\u7684\u62bd\u8c61(\u79f0\u4e3a\u79df\u6237\u89e3\u6790\u5668),\u4f46\u662f\u5e76\u6ca1\u6709\u73b0\u6210\u7684\u5b9e\u73b0. Volo.Abp.AspNetCore.MultiTenancy \u5df2\u7ecf\u5b9e\u73b0\u4e86\u4ece\u5f53\u524d Web \u8bf7\u6c42(\u4ece\u5b50\u57df\u540d,\u8bf7\u6c42\u5934,cookie,\u8def\u7531...\u7b49)\u4e2d\u786e\u5b9a\u5f53\u524d\u79df\u6237.\u672c\u6587\u540e\u9762\u4f1a\u4ecb\u7ecd Volo.Abp.AspNetCore.MultiTenancy.</p>"},{"location":"user-guide/zh/infrastructure/MultiTenancy/#_6","title":"\u81ea\u5b9a\u4e49\u79df\u6237\u89e3\u6790\u5668","text":"<p>\u4f60\u53ef\u4ee5\u50cf\u4e0b\u9762\u8fd9\u6837,\u5728\u4f60\u6a21\u5757\u7684 ConfigureServices \u65b9\u6cd5\u4e2d\u5c06\u81ea\u5b9a\u4e49\u89e3\u6790\u5668\u5e76\u6dfb\u52a0\u5230 AbpTenantResolveOptions \u4e2d:</p> C#<pre><code>namespace MyCompany.MyProject\n{\n    [DependsOn(typeof(AbpMultiTenancyModule))]\n    public class MyModule : AbpModule\n    {\n        public override void ConfigureServices(ServiceConfigurationContext context)\n        {\n            Configure&lt;AbpTenantResolveOptions&gt;(options =&gt;\n            {\n                options.TenantResolvers.Add(new MyCustomTenantResolveContributor());\n            });\n\n            //...\n        }\n    }\n}\n</code></pre> <p><code>MyCustomTenantResolveContributor</code>\u5fc5\u987b\u50cf\u4e0b\u9762\u8fd9\u6837\u5b9e\u73b0 ITenantResolveContributor \u63a5\u53e3:</p> C#<pre><code>namespace MyCompany.MyProject\n{\n    public class MyCustomTenantResolveContributor : ITenantResolveContributor\n    {\n        public override Task ResolveAsync(ITenantResolveContext context)\n        {\n            context.TenantIdOrName = ... //\u4ece\u5176\u4ed6\u5730\u65b9\u83b7\u53d6\u79df\u6237id\u6216\u79df\u6237\u540d\u5b57...\n        }\n    }\n}\n</code></pre> <p>\u5982\u679c\u80fd\u786e\u5b9a\u79df\u6237 id \u6216\u79df\u6237\u540d\u5b57\u53ef\u4ee5\u5728\u79df\u6237\u89e3\u6790\u5668\u4e2d\u8bbe\u7f6e TenantIdOrName.\u5982\u679c\u4e0d\u80fd\u786e\u5b9a,\u90a3\u5c31\u7a7a\u7740\u8ba9\u4e0b\u4e00\u4e2a\u89e3\u6790\u5668\u6765\u786e\u5b9a\u5b83.</p>"},{"location":"user-guide/zh/infrastructure/MultiTenancy/#_7","title":"\u79df\u6237\u4fe1\u606f","text":"<p>ITenantStore \u8ddf TenantConfiguration \u7c7b\u4e00\u8d77\u5de5\u4f5c,\u5e76\u4e14\u5305\u542b\u4e86\u51e0\u4e2a\u79df\u6237\u5c5e\u6027:</p> <ul> <li>Id:\u79df\u6237\u7684\u552f\u4e00 Id.</li> <li>Name: \u79df\u6237\u7684\u552f\u4e00\u540d\u79f0.</li> <li>ConnectionStrings:\u5982\u679c\u8fd9\u4e2a\u79df\u6237\u6709\u4e13\u95e8\u7684\u6570\u636e\u5e93\u6765\u5b58\u50a8\u6570\u636e.\u5b83\u53ef\u4ee5\u63d0\u4f9b\u6570\u636e\u5e93\u7684\u5b57\u7b26\u4e32(\u5b83\u53ef\u4ee5\u5177\u6709\u9ed8\u8ba4\u7684\u8fde\u63a5\u5b57\u7b26\u4e32\u548c\u6bcf\u4e2a\u6a21\u5757\u7684\u8fde\u63a5\u5b57\u7b26\u4e32).</li> </ul>"},{"location":"user-guide/zh/infrastructure/MultiTenancy/#_8","title":"\u591a\u79df\u6237\u4e2d\u95f4\u4ef6","text":"<p>Volo.Abp.AspNetCore.MultiTenancy \u5305\u542b\u4e86\u591a\u79df\u6237\u4e2d\u95f4\u4ef6...</p> C#<pre><code>app.UseMultiTenancy();\n</code></pre>"},{"location":"user-guide/zh/infrastructure/MultiTenancy/#web","title":"\u4ece Web \u8bf7\u6c42\u4e2d\u786e\u5b9a\u5f53\u524d\u79df\u6237","text":"<p>Volo.Abp.AspNetCore.MultiTenancy \u6dfb\u52a0\u4e86\u4e0b\u9762\u8fd9\u4e9b\u79df\u6237\u89e3\u6790\u5668,\u4ece\u5f53\u524d Web \u8bf7\u6c42(\u6309\u4f18\u5148\u7ea7\u6392\u5e8f)\u4e2d\u786e\u5b9a\u5f53\u524d\u79df\u6237.</p> <ul> <li>CurrentUserTenantResolveContributor: \u5982\u679c\u5f53\u524d\u7528\u6237\u5df2\u767b\u5f55,\u4ece\u5f53\u524d\u7528\u6237\u7684\u58f0\u660e\u4e2d\u83b7\u53d6\u79df\u6237 Id. \u51fa\u4e8e\u5b89\u5168\u8003\u8651,\u5e94\u8be5\u59cb\u7ec8\u5c06\u5176\u505a\u4e3a\u7b2c\u4e00\u4e2a Contributor.</li> <li>QueryStringTenantResolveContributor: \u5c1d\u8bd5\u4ece query string \u53c2\u6570\u4e2d\u83b7\u53d6\u5f53\u524d\u79df\u6237,\u9ed8\u8ba4\u53c2\u6570\u540d\u4e3a\"__tenant\".</li> <li>RouteTenantResolveContributor:\u5c1d\u8bd5\u4ece\u5f53\u524d\u8def\u7531\u4e2d\u83b7\u53d6(URL \u8def\u5f84),\u9ed8\u8ba4\u662f\u53d8\u91cf\u540d\u662f\"__tenant\".\u6240\u4ee5,\u5982\u679c\u4f60\u7684\u8def\u7531\u4e2d\u5b9a\u4e49\u4e86\u8fd9\u4e2a\u53d8\u91cf,\u5c31\u53ef\u4ee5\u4ece\u8def\u7531\u4e2d\u786e\u5b9a\u5f53\u524d\u79df\u6237.</li> <li>HeaderTenantResolveContributor: \u5c1d\u8bd5\u4ece HTTP header \u4e2d\u83b7\u53d6\u5f53\u524d\u79df\u6237,\u9ed8\u8ba4\u7684 header \u540d\u79f0\u662f\"__tenant\".</li> <li>CookieTenantResolveContributor: \u5c1d\u8bd5\u4ece\u5f53\u524d cookie \u4e2d\u83b7\u53d6\u5f53\u524d\u79df\u6237.\u9ed8\u8ba4\u7684 Cookie \u540d\u79f0\u662f\"__tenant\".</li> </ul> <p>\u5982\u679c\u4f60\u4f7f\u7528 nginx \u4f5c\u4e3a\u53cd\u5411\u4ee3\u7406\u670d\u52a1\u5668,\u8bf7\u6ce8\u610f\u5982\u679c<code>TenantKey</code>\u5305\u542b\u4e0b\u5212\u7ebf\u6216\u5176\u4ed6\u7279\u6b8a\u5b57\u7b26\u53ef\u80fd\u5b58\u5728\u95ee\u9898, \u8bf7\u53c2\u8003: http://nginx.org/en/docs/http/ngx_http_core_module.html#ignore_invalid_headers &gt; http://nginx.org/en/docs/http/ngx_http_core_module.html#underscores_in_headers</p> <p>\u53ef\u4ee5\u4f7f\u7528 AbpAspNetCoreMultiTenancyOptions \u4fee\u6539\u9ed8\u8ba4\u7684\u53c2\u6570\u540d\"__tenant\".\u4f8b\u5982:</p> C#<pre><code>services.Configure&lt;AbpAspNetCoreMultiTenancyOptions&gt;(options =&gt;\n{\n    options.TenantKey = \"MyTenantKey\";\n});\n</code></pre>"},{"location":"user-guide/zh/infrastructure/authorization/","title":"\u6388\u6743","text":"<p>\u6388\u6743\u7528\u4e8e\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u5224\u65ad\u662f\u5426\u5141\u8bb8\u7528\u6237\u6267\u884c\u67d0\u4e9b\u7279\u5b9a\u7684\u64cd\u4f5c.</p> <p>ABP \u6269\u5c55\u4e86ASP.NET Core \u6388\u6743, \u5c06\u6743\u9650\u6dfb\u52a0\u4e3a\u81ea\u52a8\u7b56\u7565\u5e76\u4e14\u4f7f\u6388\u6743\u7cfb\u7edf\u5728 \u5e94\u7528\u670d\u52a1 \u540c\u6837\u53ef\u7528.</p>"},{"location":"user-guide/zh/infrastructure/authorization/#authorize-attribute","title":"Authorize Attribute","text":"<p>ASP.NET Core \u5b9a\u4e49\u4e86 Authorize\u7279\u6027\u7528\u4e8e\u5728\u63a7\u5236\u5668,\u63a7\u5236\u5668\u65b9\u6cd5\u4ee5\u53ca\u9875\u9762\u4e0a\u6388\u6743. \u73b0\u5728 ABP \u5c06\u5b83\u5e26\u5230\u4e86\u5e94\u7528\u670d\u52a1.</p> <p>\u793a\u4f8b:</p> C#<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Threading.Tasks;\nusing Microsoft.AspNetCore.Authorization;\nusing Volo.Abp.Application.Services;\n\nnamespace Acme.BookStore\n{\n    [Authorize]\n    public class AuthorAppService : ApplicationService, IAuthorAppService\n    {\n        public Task&lt;List&lt;AuthorDto&gt;&gt; GetListAsync()\n        {\n            ...\n        }\n\n        [AllowAnonymous]\n        public Task&lt;AuthorDto&gt; GetAsync(Guid id)\n        {\n            ...\n        }\n\n        [Authorize(\"BookStore_Author_Create\")]\n        public Task CreateAsync(CreateAuthorDto input)\n        {\n            ...\n        }\n    }\n}\n</code></pre> <ul> <li><code>Authorize</code>\u7528\u6237\u5fc5\u987b\u767b\u9646\u5230\u5e94\u7528\u7a0b\u5e8f\u624d\u53ef\u4ee5\u8bbf\u95ee <code>AuthorAppService</code> \u4e2d\u7684\u65b9\u6cd5. \u6240\u4ee5<code>GetListAsync</code> \u65b9\u6cd5\u4ec5\u53ef\u7528\u4e8e\u901a\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u7684\u7528\u6237.</li> <li><code>AllowAnonymous</code> \u7981\u7528\u8eab\u4efd\u9a8c\u8bc1. \u6240\u4ee5 <code>GetAsync</code> \u65b9\u6cd5\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u8bbf\u95ee,\u5305\u62ec\u672a\u6388\u6743\u7684\u7528\u6237.</li> <li><code>[Authorize(\"BookStore_Author_Create\")]</code> \u5b9a\u4e49\u4e86\u4e00\u4e2a\u7b56\u7565 (\u53c2\u9605 \u57fa\u4e8e\u7b56\u7565\u7684\u6388\u6743),\u5b83\u7528\u4e8e\u68c0\u67e5\u5f53\u524d\u7528\u6237\u7684\u6743\u9650.\"BookStore_Author_Create\" \u662f\u4e00\u4e2a\u7b56\u7565\u540d\u79f0. \u5982\u679c\u4f60\u60f3\u8981\u4f7f\u7528\u7b56\u7565\u7684\u6388\u6743\u65b9\u5f0f,\u9700\u8981\u5728 ASP.NET Core \u6388\u6743\u7cfb\u7edf\u4e2d\u9884\u5148\u5b9a\u4e49\u5b83.</li> </ul>"},{"location":"user-guide/zh/infrastructure/authorization/#_2","title":"\u5b9a\u4e49\u6743\u9650","text":"<p>\u521b\u5efa\u4e00\u4e2a\u7ee7\u627f\u81ea <code>PermissionDefinitionProvider</code> \u7684\u7c7b,\u5982\u4e0b\u6240\u793a:</p> C#<pre><code>using Volo.Abp.Authorization.Permissions;\n\nnamespace Acme.BookStore.Permissions\n{\n    public class BookStorePermissionDefinitionProvider : PermissionDefinitionProvider\n    {\n        public override void Define(IPermissionDefinitionContext context)\n        {\n            var myGroup = context.AddGroup(\"BookStore\");\n\n            myGroup.AddPermission(\"BookStore_Author_Create\");\n        }\n    }\n}\n</code></pre> <p>ABP \u4f1a\u81ea\u52a8\u53d1\u73b0\u8fd9\u4e2a\u7c7b,\u4e0d\u9700\u8981\u8fdb\u884c\u914d\u7f6e!</p> <p>\u5728 <code>Define</code> \u65b9\u6cd5\u4e2d\u6dfb\u52a0\u6743\u9650\u7ec4\u6216\u8005\u83b7\u53d6\u5df2\u5b58\u5728\u7684\u6743\u9650\u7ec4,\u5e76\u5411\u6743\u9650\u7ec4\u4e2d\u6dfb\u52a0\u6743\u9650. \u5728\u5b9a\u4e49\u6743\u9650\u540e\u5c31\u53ef\u4ee5\u5728 ASP.NET Core \u6743\u9650\u7cfb\u7edf\u4e2d\u5f53\u505a\u7b56\u7565\u540d\u79f0\u4f7f\u7528. \u5728\u89d2\u8272\u7684\u6743\u9650\u7ba1\u7406\u6a21\u6001\u6846\u4e2d\u540c\u6837\u53ef\u4ee5\u770b\u5230: </p>"},{"location":"user-guide/zh/infrastructure/authorization/#_3","title":"\u591a\u79df\u6237","text":"<p>\u5728\u5b9a\u4e49\u65b0\u6743\u9650\u65f6\u53ef\u4ee5\u8bbe\u7f6e\u591a\u79df\u6237\u9009\u9879. \u6709\u4e0b\u9762\u4e09\u4e2a\u503c:</p> <ul> <li>Host: \u6743\u9650\u4ec5\u9002\u7528\u4e8e\u5bbf\u4e3b.</li> <li>Tenant: \u6743\u9650\u4ec5\u9002\u7528\u4e8e\u79df\u6237.</li> <li>Both (\u9ed8\u8ba4): \u6743\u9650\u9002\u7528\u4e0e\u5bbf\u4e3b\u548c\u79df\u6237.</li> </ul> <p>\u5982\u679c\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u4e0d\u662f\u591a\u79df\u6237\u7684,\u53ef\u4ee5\u5ffd\u7565\u8fd9\u4e2a\u9009\u9879.</p> <p><code>AddPermission</code> \u65b9\u6cd5\u7684\u7b2c\u4e09\u4e2a\u53c2\u6570\u7528\u4e8e\u8bbe\u7f6e\u591a\u79df\u6237\u9009\u9879:</p> C#<pre><code>myGroup.AddPermission(\n    \"BookStore_Author_Create\",\n    LocalizableString.Create&lt;BookStoreResource&gt;(\"Permission:BookStore_Author_Create\"),\n    multiTenancySide: MultiTenancySides.Tenant //set multi-tenancy side!\n);\n</code></pre>"},{"location":"user-guide/zh/infrastructure/authorization/#_4","title":"\u524d\u7aef\u6743\u9650","text":""},{"location":"user-guide/zh/infrastructure/authorization/#_5","title":"\u83dc\u5355\u6743\u9650","text":"TypeScript<pre><code>import type { AppRouteModule } from \"/@/router/types\";\nimport { LAYOUT } from \"/@/router/constant\";\nimport { t } from \"/@/hooks/web/useI18n\";\nconst tenant: AppRouteModule = {\n  path: \"/tenant\",\n  name: \"Tenant\",\n  component: LAYOUT,\n  meta: {\n    orderNo: 30,\n    icon: \"ant-design:contacts-outlined\",\n    title: t(\"routes.tenant.tenantManagement\"),\n  },\n  children: [\n    {\n      path: \"Tenant\",\n      name: \"Tenant\",\n      component: () =&gt; import(\"/@/views/tenants/Tenant.vue\"),\n      meta: {\n        title: t(\"routes.tenant.tenantList\"),\n        icon: \"ant-design:switcher-filled\",\n        policy: \"AbpTenantManagement.Tenants\", //\u83dc\u5355\u6743\u9650\n      },\n    },\n  ],\n};\n\nexport default tenant;\n</code></pre>"},{"location":"user-guide/zh/infrastructure/authorization/#_6","title":"\u6309\u94ae\u6743\u9650","text":"TypeScript<pre><code>&lt;template&gt;\n  &lt;div&gt;\n    &lt;BasicTable @register=\"registerTable\" size=\"small\"&gt;\n      &lt;template #action=\"{ record }\"&gt;\n        &lt;TableAction\n          :actions=\"[\n            {\n              icon: 'ant-design:edit-outlined',\n              auth: 'AbpIdentity.Users.Update', // \u6309\u94ae\u6743\u9650\n              label: t('common.editText'),\n              onClick: handleEdit.bind(null, record),\n            },\n          ]\"\n          :dropDownActions=\"[\n            {\n              auth: 'AbpIdentity.Users.Delete', // \u6309\u94ae\u6743\u9650\n              label: t('common.delText'),\n              onClick: handleDelete.bind(null, record),\n            },\n            {\n              auth: 'System.Users.Enable', // \u6309\u94ae\u6743\u9650\n              label: !record.isActive\n                ? t('common.enabled')\n                : t('common.disEnabled'),\n              onClick: handleLock.bind(null, record),\n            },\n          ]\"\n        /&gt;\n      &lt;/template&gt;\n    &lt;/BasicTable&gt;\n    &lt;CreateAbpUser\n      @register=\"registerCreateAbpUserModal\"\n      @reload=\"reload\"\n      :bodyStyle=\"{ 'padding-top': '0' }\"\n    /&gt;\n    &lt;EditAbpUser\n      @register=\"registerEditAbpUserModal\"\n      @reload=\"reload\"\n      :bodyStyle=\"{ 'padding-top': '0' }\"\n    /&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n</code></pre>"},{"location":"user-guide/zh/infrastructure/batch/","title":"\u6279\u91cf\u64cd\u4f5c","text":"<p>EFCore7.0 \u4e4b\u540e,\u63d0\u4f9b\u4e86\u6279\u91cf\u66f4\u65b0\u548c\u6279\u91cf\u5220\u9664,\u4f46\u662f\u4e0d\u63d0\u4f9b\u6279\u91cf\u65b0\u589e, \u5fae\u8f6f EFCore \u6279\u91cf\u64cd\u4f5c\u6587\u6863</p>"},{"location":"user-guide/zh/infrastructure/batch/#_2","title":"\u5b89\u88c5","text":"<ul> <li>\u6dfb\u52a0\u4ee5\u4e0b NuGet \u5305\u5230\u4f60\u7684\u9879\u76ee</li> <li>Lion.AbpPro.EntityFrameworkCore.Mysql</li> <li>\u6dfb\u52a0 [DependsOn(typeof(AbpProEntityFrameworkCoreMysqlModule))] \u5230\u4f60\u7684\u9879\u76ee\u6a21\u5757\u7c7b.</li> </ul>"},{"location":"user-guide/zh/infrastructure/batch/#_3","title":"\u539f\u7406","text":"<ul> <li>\u901a\u8fc7 MySqlBulkCopy \u6765\u5b9e\u73b0\u6279\u91cf\u65b0\u589e\u5b98\u65b9\u6587\u6863</li> <li>\u5b9e\u73b0 Abp \u6279\u91cf\u64cd\u4f5c\u63a5\u53e3 IEfCoreBulkOperationProvider</li> </ul> C#<pre><code>public class EfCoreBulkOperationProvider : IEfCoreBulkOperationProvider, ITransientDependency\n{\n    /// &lt;summary&gt;\n    /// \u6279\u91cf\u65b0\u589e\n    /// &lt;/summary&gt;\n    ///&lt;remarks&gt;\n    /// &lt;para&gt;\n    /// - mysql\u542f\u7528:SET GLOBAL local_infile = true;\n    /// &lt;/para&gt;\n    /// &lt;para&gt;\n    /// - \u6570\u636e\u5e93\u8fde\u63a5\u5b57\u7b26\u4e32\u9700\u8981\u52a0\u4e0a\uff1aAllowLoadLocalInfile=true\n    /// &lt;/para&gt;\n    /// - abp\u7684\u5ba1\u8ba1\u5b57\u6bb5\u9700\u8981\u624b\u52a8\u8d4b\u503c\uff0c\u6bd4\u5982\u521b\u5efa\u4eba,\u521b\u5efa\u65f6\u95f4,\u6216\u8005\u4f7f\u7528AuditPropertySetter\n    /// &lt;para&gt;\n    /// - \u53ea\u652f\u6301\u5355\u8868,\u6bd4\u5982\u6709\u4e00\u4e2aBlog\u8868\u548cPost\u8868\u4e00\u5bf9\u591a\u5173\u7cfb,\u9700\u8981\u8c03\u7528\u4e24\u6b21 InsertManyAsync\n    /// &lt;/para&gt;\n    /// &lt;/remarks&gt;\n    public virtual async Task InsertManyAsync&lt;TDbContext, TEntity&gt;(IEfCoreRepository&lt;TEntity&gt; repository, IEnumerable&lt;TEntity&gt; entities, bool autoSave, CancellationToken cancellationToken)\n        where TDbContext : IEfCoreDbContext where TEntity : class, IEntity\n    {\n        var dbContext = await repository.GetDbContextAsync();\n        var dbTransaction = dbContext.Database.CurrentTransaction?.GetDbTransaction();\n        await dbContext.BulkInsertAsync(entities, dbTransaction as MySqlTransaction, cancellationToken);\n        if (autoSave)\n        {\n            await dbContext.SaveChangesAsync(cancellationToken);\n        }\n    }\n}\n</code></pre>"},{"location":"user-guide/zh/infrastructure/batch/#_4","title":"\u793a\u4f8b","text":"C#<pre><code>namespace Lion.AbpPro.EntityFrameworkCore.Tests.Services;\n\npublic class BlogAppService : ApplicationService\n{\n    private readonly IBlogRepository _blogRepository;\n    private readonly IRepository&lt;Post, Guid&gt; _postRepository;\n    private readonly IRepository&lt;Comment, Guid&gt; _commentRepository;\n    private readonly IdentityRoleManager _identityRoleManager;\n\n    public BlogAppService(IBlogRepository blogRepository, IdentityRoleManager identityRoleManager, IRepository&lt;Post, Guid&gt; postRepository, IRepository&lt;Comment, Guid&gt; commentRepository)\n    {\n        _blogRepository = blogRepository;\n        _identityRoleManager = identityRoleManager;\n        _postRepository = postRepository;\n        _commentRepository = commentRepository;\n    }\n\n\n    /// &lt;summary&gt;\n    /// \u6279\u91cf\u63d2\u516510000\u6761\u6570\u636e\n    /// &lt;/summary&gt;\n    public async Task CreateAsync(int qty = 10000)\n    {\n        // mock \u6570\u636e\n        var list = GenFu.GenFu.ListOf&lt;Blog&gt;(qty);\n        var stopwatch = new Stopwatch();\n        stopwatch.Start();\n        await _blogRepository.InsertManyAsync(list);\n        stopwatch.Stop();\n        Logger.LogInformation($\"\u6279\u91cf\u63d2\u5165{list.Count}\u6761,\u8017\u65f6(\u5355\u4f4d:\u6beb\u79d2):{stopwatch.ElapsedMilliseconds}\");\n    }\n\n    /// &lt;summary&gt;\n    /// \u6279\u91cf\u63d2\u516510000\u6761\u6570\u636e\n    /// &lt;/summary&gt;\n    public async Task CreateAllAsync(int qty = 10000)\n    {\n        // mock \u6570\u636e\n        var blogs = GenFu.GenFu.ListOf&lt;Blog&gt;(qty);\n        var posts = new List&lt;Post&gt;();\n        var comments = new List&lt;Comment&gt;();\n        // blog\u548cpost\u4e00\u5bf9\u591a,post\u548ccomment\u4e00\u5bf9\u591a\n        // \u6709\u4e3b\u5916\u952e\u5173\u7cfb,\u6240\u4ee5\u5faa\u73afmock\u6570\u636e\n        foreach (var blog in blogs)\n        {\n            posts.Add(new Post(GuidGenerator.Create(), blog.Id, \"name\"));\n        }\n\n\n        foreach (var post in posts)\n        {\n            comments.Add(new Comment(GuidGenerator.Create(), 1, post.Id, \"content\"));\n        }\n\n        var stopwatch = new Stopwatch();\n        stopwatch.Start();\n        // \u9700\u8981\u6267\u884c\u4e09\u6b21,\u4e0d\u4f1a\u56e0\u4e3aef\u6709\u5b9a\u4e49\u5173\u7cfb\u800c\u4e00\u6b21\u6027\u63d2\u5165posts\u548ccomments\n        await _blogRepository.InsertManyAsync(blogs);\n        await _postRepository.InsertManyAsync(posts);\n        await _commentRepository.InsertManyAsync(comments);\n        stopwatch.Stop();\n        Logger.LogInformation($\"\u6279\u91cf\u63d2\u5165blogs:{blogs.Count},posts:{posts.Count},comments:{comments.Count}\u6761,\u8017\u65f6(\u5355\u4f4d:\u6beb\u79d2):{stopwatch.ElapsedMilliseconds}\");\n    }\n\n    /// &lt;summary&gt;\n    /// \u6279\u91cf\u63d2\u516510000\u6761\u6570\u636e,\u5e76\u4e14\u6d4b\u8bd5\u4e8b\u52a1\u662f\u5426\u548c\u5176\u5b83\u4e1a\u52a1\u903b\u8f91\u4fdd\u6301\u4e00\u81f4\n    /// \u6d4b\u8bd5\u7ed3\u679c\uff1a\u5728\u4e00\u4e2a\u4e8b\u52a1\u5185\n    /// &lt;/summary&gt;\n    public async Task CreateTransactionAsync(int qty = 10)\n    {\n        var list = GenFu.GenFu.ListOf&lt;Blog&gt;(qty);\n        var stopwatch = new Stopwatch();\n        stopwatch.Start();\n        await _blogRepository.InsertManyAsync(list);\n        stopwatch.Stop();\n        Logger.LogInformation($\"\u6279\u91cf\u63d2\u5165{list.Count}\u6761,\u8017\u65f6(\u5355\u4f4d:\u6beb\u79d2):{stopwatch.ElapsedMilliseconds}\");\n        await _identityRoleManager.CreateAsync(new IdentityRole(GuidGenerator.Create(), GuidGenerator.Create().ToString()));\n        throw new UserFriendlyException(\"test\");\n    }\n\n    /// &lt;summary&gt;\n    /// \u6279\u91cf\u66f4\u65b0\n    /// &lt;see cref=\"https://learn.microsoft.com/zh-cn/ef/core/saving/execute-insert-update-delete\"/&gt;\n    /// &lt;/summary&gt;\n    public async Task BatchUpdateAsync(int qty = 10000)\n    {\n        using (var uow = UnitOfWorkManager.Begin(new AbpUnitOfWorkOptions(true), true))\n        {\n            var list = GenFu.GenFu.ListOf&lt;Blog&gt;(qty);\n            await _blogRepository.InsertManyAsync(list);\n            await uow.CompleteAsync();\n        }\n\n        var stopwatch = new Stopwatch();\n        stopwatch.Start();\n        var dbSet = await _blogRepository.GetDbSetAsync();\n        await dbSet.ExecuteUpdateAsync(setters =&gt; setters\n            .SetProperty(x =&gt; x.IsDeleted, x =&gt; true)\n            .SetProperty(x =&gt; x.Name, x =&gt; \"test\"));\n        stopwatch.Stop();\n        Logger.LogInformation($\"\u6279\u91cf\u66f4\u65b0{qty}\u6761,\u8017\u65f6(\u5355\u4f4d:\u6beb\u79d2):{stopwatch.ElapsedMilliseconds}\");\n    }\n\n    /// &lt;summary&gt;\n    /// \u6279\u91cf\u5220\u9664\n    /// &lt;see cref=\"https://learn.microsoft.com/zh-cn/ef/core/saving/execute-insert-update-delete\"/&gt;\n    /// &lt;/summary&gt;\n    public async Task BatchDeleteAsync(int qty = 10000)\n    {\n        using (var uow = UnitOfWorkManager.Begin(new AbpUnitOfWorkOptions(true), true))\n        {\n            var list = GenFu.GenFu.ListOf&lt;Blog&gt;(qty);\n            await _blogRepository.InsertManyAsync(list);\n            await uow.CompleteAsync();\n        }\n\n        var stopwatch = new Stopwatch();\n        stopwatch.Start();\n        var dbSet = await _blogRepository.GetDbSetAsync();\n        await dbSet.ExecuteDeleteAsync();\n        stopwatch.Stop();\n        Logger.LogInformation($\"\u6279\u91cf\u5220\u9664{qty}\u6761,\u8017\u65f6(\u5355\u4f4d:\u6beb\u79d2):{stopwatch.ElapsedMilliseconds}\");\n    }\n}\n</code></pre>"},{"location":"user-guide/zh/infrastructure/cache/","title":"\u7f13\u5b58","text":"<p>ABP \u6846\u67b6\u6269\u5c55\u4e86 ASP.NET Core \u7684\u5206\u5e03\u5f0f\u7f13\u5b58\u7cfb\u7edf. ABP vNext Pro \u5df2\u96c6\u6210 Redis \u505a\u4e3a\u7f13\u5b58\u3002</p>"},{"location":"user-guide/zh/infrastructure/cache/#_2","title":"\u914d\u7f6e","text":"appsetting.json<pre><code>\"Redis\":\n  {\n     \"Configuration\": \"localhost,password=1q2w3E*,defaultdatabase=1\"\n  }\n</code></pre>"},{"location":"user-guide/zh/infrastructure/cache/#abpdistributedcacheoptions","title":"AbpDistributedCacheOptions","text":"<p>\u793a\u4f8b\uff1a\u4e3a\u5e94\u7528\u7a0b\u5e8f\u8bbe\u7f6e\u7f13\u5b58\u952e\u524d\u7f00</p> AbpProHttpApiHostModule.cs<pre><code>Configure&lt;AbpDistributedCacheOptions&gt;(options =&gt;\n{\n    options.KeyPrefix = \"MyApp1\";\n});\n</code></pre>"},{"location":"user-guide/zh/infrastructure/cache/#_3","title":"\u53ef\u7528\u9009\u9879","text":"<ul> <li><code>HideErrors</code> (<code>bool</code>, \u9ed8\u8ba4: <code>true</code>): \u542f\u7528/\u7981\u7528\u9690\u85cf\u4ece\u7f13\u5b58\u670d\u52a1\u5668\u5199\u5165/\u8bfb\u53d6\u503c\u65f6\u7684\u9519\u8bef.</li> <li><code>KeyPrefix</code> (<code>string</code>, \u9ed8\u8ba4: <code>null</code>): \u5982\u679c\u4f60\u7684\u7f13\u5b58\u670d\u52a1\u5668\u7531\u591a\u4e2a\u5e94\u7528\u7a0b\u5e8f\u5171\u540c\u4f7f\u7528, \u5219\u53ef\u4ee5\u4e3a\u5e94\u7528\u7a0b\u5e8f\u7684\u7f13\u5b58\u952e\u8bbe\u7f6e\u4e00\u4e2a\u524d\u7f00. \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b, \u4e0d\u540c\u7684\u5e94\u7528\u7a0b\u5e8f\u4e0d\u80fd\u8986\u76d6\u5f7c\u6b64\u7684\u7f13\u5b58\u5185\u5bb9.</li> <li><code>GlobalCacheEntryOptions</code> (<code>DistributedCacheEntryOptions</code>): \u7528\u4e8e\u8bbe\u7f6e\u4fdd\u5b58\u7f13\u5185\u5bb9\u5374\u6ca1\u6709\u6307\u5b9a\u9009\u9879\u65f6, \u9ed8\u8ba4\u7684\u5206\u5e03\u5f0f\u7f13\u5b58\u9009\u9879 (\u4f8b\u5982 <code>AbsoluteExpiration</code> \u548c <code>SlidingExpiration</code>). <code>SlidingExpiration</code>\u7684\u9ed8\u8ba4\u503c\u8bbe\u7f6e\u4e3a 20 \u5206\u949f.</li> </ul>"},{"location":"user-guide/zh/infrastructure/cache/#_4","title":"\u4f7f\u7528\u65b9\u5f0f","text":"<p>\u793a\u4f8b: \u5728\u7f13\u5b58\u4e2d\u5b58\u50a8\u56fe\u4e66\u540d\u79f0\u548c\u4ef7\u683c</p> C#<pre><code>namespace MyProject\n{\n    public class BookCacheItem\n    {\n        public string Name { get; set; }\n\n        public float Price { get; set; }\n    }\n}\n</code></pre> <p>\u4f60\u53ef\u4ee5\u6ce8\u5165 <code>IDistributedCache&lt;BookCacheItem&gt;</code> \u670d\u52a1\u7528\u4e8e get/set <code>BookCacheItem</code> \u5bf9\u8c61.</p> C#<pre><code>using System;\nusing System.Threading.Tasks;\nusing Microsoft.Extensions.Caching.Distributed;\nusing Volo.Abp.Caching;\nusing Volo.Abp.DependencyInjection;\n\nnamespace MyProject\n{\n    public class BookService : ITransientDependency\n    {\n        private readonly IDistributedCache&lt;BookCacheItem&gt; _cache;\n\n        public BookService(IDistributedCache&lt;BookCacheItem&gt; cache)\n        {\n            _cache = cache;\n        }\n\n        public async Task&lt;BookCacheItem&gt; GetAsync(Guid bookId)\n        {\n            return await _cache.GetOrAddAsync(\n                bookId.ToString(), //\u7f13\u5b58\u952e\n                async () =&gt; await GetBookFromDatabaseAsync(bookId),\n                () =&gt; new DistributedCacheEntryOptions\n                {\n                    AbsoluteExpiration = DateTimeOffset.Now.AddHours(1)\n                }\n            );\n        }\n\n        private Task&lt;BookCacheItem&gt; GetBookFromDatabaseAsync(Guid bookId)\n        {\n            //TODO: \u4ece\u6570\u636e\u5e93\u83b7\u53d6\u6570\u636e\n        }\n    }\n}\n</code></pre> <ul> <li>\u793a\u4f8b\u670d\u52a1\u4ee3\u7801\u4e2d\u7684 <code>GetOrAddAsync()</code> \u65b9\u6cd5\u4ece\u7f13\u5b58\u4e2d\u83b7\u53d6\u56fe\u4e66\u9879. <code>GetOrAddAsync</code>\u662f ABP \u6846\u67b6\u5728 ASP.NET Core \u5206\u5e03\u5f0f\u7f13\u5b58\u65b9\u6cd5\u4e2d\u6dfb\u589e\u7684\u9644\u52a0\u65b9\u6cd5.</li> <li>\u5982\u679c\u6ca1\u6709\u5728\u7f13\u5b58\u4e2d\u627e\u5230\u56fe\u4e66,\u5b83\u4f1a\u8c03\u7528\u5de5\u5382\u65b9\u6cd5 (\u672c\u793a\u4f8b\u4e2d\u662f <code>GetBookFromDatabaseAsync</code>)\u4ece\u539f\u59cb\u6570\u636e\u6e90\u4e2d\u83b7\u53d6\u56fe\u4e66\u9879.</li> <li><code>GetOrAddAsync</code> \u6709\u4e00\u4e2a\u53ef\u9009\u53c2\u6570 <code>DistributedCacheEntryOptions</code> , \u53ef\u7528\u4e8e\u8bbe\u7f6e\u7f13\u5b58\u7684\u751f\u547d\u5468\u671f.</li> </ul>"},{"location":"user-guide/zh/infrastructure/cache/#_5","title":"\u6279\u91cf\u64cd\u4f5c","text":"<p>ABP \u7684\u5206\u5e03\u5f0f\u7f13\u5b58\u63a5\u53e3\u5b9a\u4e49\u4e86\u4ee5\u4e0b\u6279\u91cf\u64cd\u4f5c\u65b9\u6cd5,\u5f53\u4f60\u9700\u8981\u5728\u4e00\u4e2a\u65b9\u6cd5\u4e2d\u8c03\u7528\u591a\u6b21\u7f13\u5b58\u64cd\u4f5c\u65f6,\u8fd9\u4e9b\u65b9\u6cd5\u53ef\u4ee5\u63d0\u9ad8\u6027\u80fd</p> <ul> <li><code>SetManyAsync</code> \u548c <code>SetMany</code> \u65b9\u6cd5\u53ef\u4ee5\u7528\u6765\u5411\u7f13\u5b58\u4e2d\u8bbe\u7f6e\u591a\u4e2a\u503c.</li> <li><code>GetManyAsync</code> \u548c <code>GetMany</code> \u65b9\u6cd5\u53ef\u4ee5\u7528\u6765\u4ece\u7f13\u5b58\u4e2d\u83b7\u53d6\u591a\u4e2a\u503c.</li> <li><code>GetOrAddManyAsync</code> \u548c <code>GetOrAddMany</code> \u65b9\u6cd5\u53ef\u4ee5\u7528\u6765\u4ece\u7f13\u5b58\u4e2d\u83b7\u53d6\u5e76\u6dfb\u52a0\u7f3a\u5c11\u7684\u503c.</li> <li><code>RefreshManyAsync</code> \u548c <code>RefreshMany</code> \u65b9\u6cd5\u53ef\u4ee5\u6765\u7528\u91cd\u7f6e\u591a\u4e2a\u503c\u7684\u6eda\u52a8\u8fc7\u671f\u65f6\u95f4.</li> <li><code>RemoveManyAsync</code> \u548c <code>RemoveMany</code> \u65b9\u6cd5\u53ef\u4ee5\u7528\u6765\u4ece\u7f13\u5b58\u4e2d\u5220\u9664\u591a\u4e2a\u503c.</li> </ul> <p>\u8fd9\u4e9b\u4e0d\u662f\u6807\u51c6\u7684 ASP.NET Core \u7f13\u5b58\u65b9\u6cd5, \u6240\u4ee5\u67d0\u4e9b\u63d0\u4f9b\u7a0b\u5e8f\u53ef\u80fd\u4e0d\u652f\u6301. [ABP Redis \u96c6\u6210\u5305]\u5b9e\u73b0\u4e86\u5b83\u4eec. \u5982\u679c\u63d0\u4f9b\u7a0b\u5e8f\u4e0d\u652f\u6301,\u4f1a\u56de\u9000\u5230 <code>SetAsync</code> \u548c <code>GetAsync</code> ... \u65b9\u6cd5(\u5faa\u73af\u8c03\u7528).</p>"},{"location":"user-guide/zh/infrastructure/cap/","title":"dotnetcore.cap","text":"<p>\u5206\u5e03\u5f0f\u4e8b\u4ef6\u603b\u7ebf\u7cfb\u7edf\u5141\u8bb8\u53d1\u5e03\u548c\u8ba2\u9605\u8de8\u5e94\u7528/\u670d\u52a1\u8fb9\u754c\u4f20\u8f93\u7684\u4e8b\u4ef6. \u4f60\u53ef\u4ee5\u4f7f\u7528\u5206\u5e03\u5f0f\u4e8b\u4ef6\u603b\u7ebf\u5728\u5fae\u670d\u52a1\u6216\u5e94\u7528\u7a0b\u5e8f\u4e4b\u95f4\u5f02\u6b65\u53d1\u9001\u548c\u63a5\u6536\u6d88\u606f.</p>"},{"location":"user-guide/zh/infrastructure/cap/#_1","title":"\u5b89\u88c5","text":"<ul> <li>\u6dfb\u52a0\u4ee5\u4e0b NuGet \u5305\u5230\u4f60\u7684\u9879\u76ee</li> <li>Lion.AbpPro.CAP</li> <li>Lion.AbpPro.CAP.EntityFrameworkCore</li> <li>DotNetCore.CAP.MySql (\u5982\u679c\u662f\u5176\u5b83\u6570\u636e\u5e93,\u8bf7\u5b89\u88c5\u5bf9\u5e94\u7c7b\u578b)</li> <li>DotNetCore.CAP.RabbitMQ (\u5982\u679c\u662f\u5176\u5b83\u4e2d\u95f4\u4ef6,\u8bf7\u5b89\u88c5\u5bf9\u5e94\u7c7b\u578b)</li> <li>\u6dfb\u52a0 [DependsOn(typeof(AbpProCapEntityFrameworkCoreModule))] \u5230\u4f60\u7684\u9879\u76ee\u6a21\u5757\u7c7b.</li> </ul>"},{"location":"user-guide/zh/infrastructure/cap/#_2","title":"\u914d\u7f6e","text":"<p>Mysql,\u548c RabbitMq \u4e3a\u4f8b</p> C#<pre><code>public override void ConfigureServices(ServiceConfigurationContext context)\n{\n        context.AddAbpCap(capOptions =&gt;\n        {\n            // \u6307\u5b9a\u6570\u636e\u6570\u636e\u5e93\u8fde\u63a5\u5b57\u7b26\u4e32\n            capOptions.SetCapDbConnectionString(configuration[\"ConnectionStrings:Default\"]);\n            capOptions.UseEntityFramework&lt;AbpProDbContext&gt;();\n            // \u4f7f\u7528rabbitmq,\u914d\u7f6ehost,username,password\n            capOptions.UseRabbitMQ(option =&gt;\n            {\n                option.HostName = configuration.GetValue&lt;string&gt;(\"Cap:RabbitMq:HostName\");\n                option.UserName = configuration.GetValue&lt;string&gt;(\"Cap:RabbitMq:UserName\");\n                option.Password = configuration.GetValue&lt;string&gt;(\"Cap:RabbitMq:Password\");\n            });\n\n            var hostingEnvironment = context.Services.GetHostingEnvironment();\n            bool auth = !hostingEnvironment.IsDevelopment();\n            // \u542f\u7528\u9762\u677f\n            capOptions.UseDashboard(options =&gt;\n            {\n                options.UseAuth = auth;\n                options.AuthorizationPolicy = LionAbpProCapPermissions.CapManagement.Cap;\n            });\n        });\n}\n</code></pre> <ul> <li>\u5373\u53ef\u4f7f\u7528 Abp vNext \u6807\u51c6\u5199\u6cd5,\u53d1\u9001\u5206\u5e03\u5f0f\u4e8b\u4ef6\u548c\u8ba2\u9605\u4e8b\u4ef6</li> </ul>"},{"location":"user-guide/zh/infrastructure/config/","title":"\u914d\u7f6e","text":""},{"location":"user-guide/zh/infrastructure/config/#_2","title":"\u65e5\u5fd7","text":""},{"location":"user-guide/zh/infrastructure/config/#_3","title":"\u65e5\u5fd7\u7ea7\u522b","text":"<p>Debug \u2192 Information \u2192 Warning \u2192 Error \u2192 Fatal</p> JSON<pre><code>\"Serilog\": {\n  \"Using\": [\n    \"Serilog.Sinks.Console\",\n    \"Serilog.Sinks.File\"\n  ],\n  \"MinimumLevel\": {\n    // \u9ed8\u8ba4\u5168\u5c40\u65e5\u5fd7\u7ea7\u522b\n    \"Default\": \"Information\",\n    \"Override\": {\n      //\u540d\u79f0\u7a7a\u95f4\u4e3a Microsoft \u65e5\u5fd7\u7ea7\u522b\n      \"Microsoft\": \"Information\",\n      //\u540d\u79f0\u7a7a\u95f4\u4e3a Volo.Abp \u65e5\u5fd7\u7ea7\u522b\n      \"Volo.Abp\": \"Information\",\n      //\u540d\u79f0\u7a7a\u95f4\u4e3a Hangfire \u65e5\u5fd7\u7ea7\u522b\n      \"Hangfire\": \"Information\",\n      //\u540d\u79f0\u7a7a\u95f4\u4e3a DotNetCore.CAP \u65e5\u5fd7\u7ea7\u522b\n      \"DotNetCore.CAP\": \"Information\",\n      //\u540d\u79f0\u7a7a\u95f4\u4e3a Serilog.AspNetCore \u65e5\u5fd7\u7ea7\u522b\n      \"Serilog.AspNetCore\": \"Information\",\n      //\u540d\u79f0\u7a7a\u95f4\u4e3a Microsoft.EntityFrameworkCore \u65e5\u5fd7\u7ea7\u522b\n      \"Microsoft.EntityFrameworkCore\": \"Warning\",\n      //\u540d\u79f0\u7a7a\u95f4\u4e3a Microsoft.AspNetCore \u65e5\u5fd7\u7ea7\u522b\n      \"Microsoft.AspNetCore\": \"Information\"\n    }\n  },\n  \"WriteTo\": [\n    {\n      // \u8f93\u51fa\u5230\u63a7\u5236\u53f0\u65e5\u5fd7\n      \"Name\": \"Console\"\n    },\n    {\n      // \u8f93\u51fa\u5230\u6587\u4ef6\n      \"Name\": \"File\",\n      \"Args\": {\n        \"path\": \"logs/logs-.txt\",\n         // \u6309\u5929\u8f93\u51fa\n        \"rollingInterval\": \"Day\"\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"user-guide/zh/infrastructure/config/#es","title":"\u5199\u5165 ES","text":"<p>\u5148\u51b3\u6761\u4ef6\uff1a\u642d\u5efa\u597d ES \u73af\u5883</p> <ul> <li>Enabled:\u662f\u5426\u542f\u7528</li> <li>Url:es \u5730\u5740</li> <li>IndexFormat:es \u7d22\u5f15</li> <li>UserName:\u7528\u6237\u540d</li> <li>Password:\u5bc6\u7801</li> <li>SearchIndexFormat:es \u65e5\u5fd7\u67e5\u8be2\u7d22\u5f15\u6a21\u5f0f</li> </ul> JSON<pre><code>\"ElasticSearch\": {\n  \"Enabled\": \"false\",\n  \"Url\": \"http://es.cn\",\n  \"IndexFormat\": \"Lion.AbpPro.development.{0:yyyy.MM.dd}\",\n  \"UserName\": \"elastic\",\n  \"Password\": \"aVVhjQ95RP7nbwNy\",\n  \"SearchIndexFormat\": \"Lion.AbpPro.development*\"\n},\n</code></pre> <ul> <li>\u67e5\u770b Lion.AbpPro.HttpApi.Host.Program.cs</li> </ul> C#<pre><code>public class Program\n{\n    public static void Main(string[] args)\n    {\n        CreateHostBuilder(args).Build().Run();\n\n    }\n    private static IHostBuilder CreateHostBuilder(string[] args) =&gt;\n        Host.CreateDefaultBuilder(args)\n            .ConfigureWebHostDefaults(webBuilder =&gt;\n            {\n                webBuilder.ConfigureKestrel((context, options) =&gt; { options.Limits.MaxRequestBodySize = 1024 * 50; });\n                webBuilder.UseStartup&lt;Startup&gt;();\n            })\n            .UseSerilog((context, loggerConfiguration) =&gt;\n            {\n                // \u914d\u7f6eES\u65e5\u5fd7\n                SerilogToEsExtensions.SetSerilogConfiguration(\n                    loggerConfiguration,\n                    context.Configuration);\n            }).UseAutofac();\n}\n</code></pre>"},{"location":"user-guide/zh/infrastructure/config/#cors","title":"\u8de8\u57df(CORS)","text":"<ul> <li>\u5141\u8bb8\u6307\u5b9a\u7b56\u7565</li> </ul> JSON<pre><code>\"App\": {\n    // \u9017\u53f7\u5206\u9694\n    \"CorsOrigins\": \"http://*.com,http://localhost:4200\"\n  },\n</code></pre> <ul> <li>\u914d\u7f6e\u8de8\u57df</li> </ul> C#<pre><code>private void ConfigureCors(ServiceConfigurationContext context)\n{\n    var configuration = context.Services.GetConfiguration();\n    context.Services.AddCors(options =&gt;\n    {\n        options.AddPolicy(DefaultCorsPolicyName, builder =&gt;\n        {\n            builder\n                .WithOrigins(\n                    configuration[\"App:CorsOrigins\"]\n                        .Split(\",\", StringSplitOptions.RemoveEmptyEntries)\n                        .Select(o =&gt; o.RemovePostFix(\"/\"))\n                        .ToArray()\n                )\n                .WithAbpExposedHeaders()\n                .SetIsOriginAllowedToAllowWildcardSubdomains()\n                .AllowAnyHeader()\n                .AllowAnyMethod()\n                .AllowCredentials();\n        });\n    });\n}\n</code></pre>"},{"location":"user-guide/zh/infrastructure/config/#accesstoken","title":"AccessToken","text":"<ul> <li>Audience:\u63a5\u6536\u5bf9\u8c61</li> <li>Issuer:\u7b7e\u53d1\u4e3b\u4f53</li> <li>SecurityKey:\u5bc6\u94a5</li> <li>ExpirationTime:\u8fc7\u671f\u65f6\u95f4(\u5355\u4f4d\u5c0f\u65f6)</li> </ul> JSON<pre><code>  \"Jwt\": {\n    \"Audience\": \"Lion.AbpPro\",\n    \"SecurityKey\": \"dzehzRz9a8asdfasfdadfasdfasdfafsdadfasbasdf=\",\n    \"Issuer\": \"Lion.AbpPro\",\n    \"ExpirationTime\": 30\n  }\n</code></pre>"},{"location":"user-guide/zh/infrastructure/elastic/","title":"ElasticSearch","text":""},{"location":"user-guide/zh/infrastructure/elastic/#_1","title":"\u5b89\u88c5","text":"<ul> <li>\u6dfb\u52a0\u4ee5\u4e0b NuGet \u5305\u5230\u4f60\u7684\u9879\u76ee</li> <li>Lion.AbpPro.ElasticSearch</li> <li>\u6dfb\u52a0 [DependsOn(typeof(AbpProElasticSearchModule))] \u5230\u4f60\u7684\u9879\u76ee\u6a21\u5757\u7c7b.</li> </ul>"},{"location":"user-guide/zh/infrastructure/elastic/#_2","title":"\u914d\u7f6e","text":"JSON<pre><code>{\n  \"ElasticSearch\": {\n    \"Host\": \"http://localhost:9200\",\n    \"UserName\": \"admin\",\n    \"Password\": \"1q2w3E*\"\n  }\n}\n</code></pre>"},{"location":"user-guide/zh/infrastructure/elastic/#_3","title":"\u793a\u4f8b","text":"<ul> <li>\u5b9e\u73b0 Student \u7684\u589e\u5220\u67e5\u6539</li> </ul>"},{"location":"user-guide/zh/infrastructure/elastic/#_4","title":"\u5b9a\u4e49\u5b66\u751f\u7c7b","text":"<ul> <li>\u5b9e\u73b0 IElasticSearchEntity \u63a5\u53e3,\u6b64\u63a5\u53e3\u6709\u4e3b\u952e Id,\u521b\u5efa\u65f6\u95f4\u5b57\u6bb5,\u4e5f\u662f\u6cdb\u578b\u7ea6\u675f\u3002</li> </ul> C#<pre><code>public class Student : IElasticSearchEntity\n{\n    public Guid Id { get; set; }\n\n    public DateTime CreationTime { get; set; }\n\n    public double Price { get; set; }\n\n    public string Name { get; set; }\n\n    public int Age { get; set; }\n}\n</code></pre>"},{"location":"user-guide/zh/infrastructure/elastic/#_5","title":"\u5b9a\u4e49\u63a5\u53e3","text":"C#<pre><code>public interface IStudentElasticSearchRepository : IBasicElasticSearchRepository&lt;Student&gt;\n{\n}\n</code></pre>"},{"location":"user-guide/zh/infrastructure/elastic/#_6","title":"\u5b9e\u73b0\u63a5\u53e3","text":"C#<pre><code>public class StudentElasticSearchRepository : ElasticSearchRepository&lt;Student&gt;, IStudentElasticSearchRepository, ITransientDependency\n{\n    public StudentElasticSearchRepository(IElasticsearchProvider elasticsearchProvider) : base(elasticsearchProvider)\n    {\n    }\n\n    // index \u53ea\u80fd\u662f\u5c0f\u5199\n    protected override string IndexName =&gt; \"Students\".ToLower();\n}\n</code></pre>"},{"location":"user-guide/zh/infrastructure/elastic/#curd","title":"CURD","text":"C#<pre><code>// \u6ce8\u5165\nprivate readonly IStudentElasticSearchRepository _studentElasticSearchRepository;\npublic StudentElasticSearchRepositoryTests(IStudentElasticSearchRepository studentElasticSearchRepository)\n{\n    _studentElasticSearchRepository = studentElasticSearchRepository;\n}\n\n// var student = new Student\n//          {\n//              Id = Guid.NewGuid(),\n//              Name = \"\u97e9\u7acb\",\n//              Age = 10,\n//              CreationTime = DateTime.Now,\n//              Price = 100.3,\n//          };\n\n// \u6839\u636e\u4e3b\u952eId\u67e5\u8be2\nvar result = await _studentElasticSearchRepository.FindAsync(student.Id);\n\n// \u65b0\u589e\nawait _studentElasticSearchRepository.InsertAsync(student);\n\n// \u6279\u91cf\u65b0\u589e\nawait _studentElasticSearchRepository.InsertManyAsync(students);\n\n// \u66f4\u65b0\nawait _studentElasticSearchRepository.UpdateAsync(student);\n\n// \u5220\u9664\nawait _studentElasticSearchRepository.DeleteAsync(student.Id);\n\n// \u5206\u9875\u67e5\u8be2\nvar mustFilters = new List&lt;Func&lt;QueryContainerDescriptor&lt;Student&gt;, QueryContainer&gt;&gt;();\nmustFilters.Add(e =&gt; e.Term(f =&gt; f.Field(b =&gt; b.Name.Suffix(\"keyword\")).Value(\"\u97e9\u7acb\")));\nvar result = await _studentElasticSearchRepository.PageAsync(mustFilters);\n</code></pre>"},{"location":"user-guide/zh/infrastructure/elastic/#_7","title":"\u5176\u5b83\u64cd\u4f5c","text":"<ul> <li>\u5728 StudentElasticSearchRepository \u4e2d\u4f7f\u7528 Client \u5373\u53ef\u83b7\u53d6\u5230 es \u539f\u751f api \u5bf9\u8c61\u3002</li> <li>\u66f4\u591a\u793a\u4f8b\u8bf7\u67e5\u770b\u5355\u5143\u6d4b\u8bd5(StudentElasticSearchRepositoryTests.cs)</li> </ul>"},{"location":"user-guide/zh/infrastructure/exception-handler/","title":"\u5f02\u5e38\u5904\u7406","text":"<p>ABP \u63d0\u4f9b\u4e86\u7528\u4e8e\u5904\u7406 Web \u5e94\u7528\u7a0b\u5e8f\u5f02\u5e38\u7684\u6807\u51c6\u6a21\u578b.</p> <ul> <li>\u81ea\u52a8\u5904\u7406\u6240\u6709\u5f02\u5e38.\u5982\u679c\u662f API/AJAX \u8bf7\u6c42,\u4f1a\u5411\u5ba2\u6237\u7aef\u8fd4\u56de\u4e00\u4e2a\u6807\u51c6\u683c\u5f0f\u5316\u540e\u7684\u9519\u8bef\u6d88\u606f .</li> <li>\u81ea\u52a8\u9690\u85cf\u5185\u90e8\u8be6\u7ec6\u9519\u8bef\u5e76\u8fd4\u56de\u6807\u51c6\u9519\u8bef\u6d88\u606f.</li> <li>\u4e3a\u5f02\u5e38\u6d88\u606f\u7684\u672c\u5730\u5316\u63d0\u4f9b\u4e00\u79cd\u53ef\u914d\u7f6e\u7684\u65b9\u5f0f.</li> <li>\u81ea\u52a8\u4e3a\u6807\u51c6\u5f02\u5e38\u8bbe\u7f6e*HTTP \u72b6\u6001\u4ee3\u7801,\u5e76\u63d0\u4f9b\u53ef\u914d\u7f6e\u9009\u9879,\u4ee5\u6620\u5c04\u81ea\u5b9a\u4e49\u5f02\u5e38.</li> </ul>"},{"location":"user-guide/zh/infrastructure/exception-handler/#_2","title":"\u81ea\u52a8\u5904\u7406\u5f02\u5e38","text":"<p>\u5f53\u6ee1\u8db3\u4e0b\u9762\u4efb\u610f\u4e00\u4e2a\u6761\u4ef6\u65f6,<code>AbpExceptionFilter</code> \u4f1a\u5904\u7406\u6b64\u5f02\u5e38:</p> <ul> <li>\u5f53 controller action \u65b9\u6cd5\u8fd4\u56de\u7c7b\u578b\u662f object result(\u800c\u4e0d\u662f view result)\u5e76\u6709\u5f02\u5e38\u629b\u51fa\u65f6.</li> <li>\u5f53\u4e00\u4e2a\u8bf7\u6c42\u4e3a AJAX(Http \u8bf7\u6c42\u5934\u4e2d<code>X-Requested-With</code>\u4e3a<code>XMLHttpRequest</code>)\u65f6.</li> <li>\u5f53\u5ba2\u6237\u7aef\u63a5\u53d7\u7684\u8fd4\u56de\u7c7b\u578b\u4e3a<code>application/json</code>(Http \u8bf7\u6c42\u5934\u4e2d<code>accept</code> \u4e3a<code>application/json</code>)\u65f6.</li> </ul>"},{"location":"user-guide/zh/infrastructure/exception-handler/#_3","title":"\u9519\u8bef\u6d88\u606f\u683c\u5f0f","text":"JSON<pre><code>{\n  \"error\": {\n    \"code\": \"App:010042\",\n    \"message\": \"This topic is locked and can not add a new message\",\n    \"details\": \"A more detailed info about the error...\"\n  }\n}\n</code></pre> <ul> <li>\u9519\u8bef\u4ee3\u7801(code)\u662f\u5f02\u5e38\u4fe1\u606f\u4e2d\u4e00\u4e2a\u6709\u552f\u4e00\u503c\u5e76\u53ef\u9009\u7684\u5b57\u7b26\u4e32\u503c.\u629b\u51fa\u7684\u5f02\u5e38\u5e94\u5b9e\u73b0<code>IHasErrorCode</code> \u63a5\u53e3\u6765\u586b\u5145\u8be5\u5b57\u6bb5.</li> <li>\u9519\u8bef\u7684\u8be6\u7ec6\u4fe1\u606f(Details) \u662f\u53ef\u9009\u5c5e\u6027.\u629b\u51fa\u7684\u5f02\u5e38\u5e94\u5b9e\u73b0<code>IHasErrorDetails</code> \u63a5\u53e3\u6765\u586b\u5145\u8be5\u5b57\u6bb5.</li> </ul>"},{"location":"user-guide/zh/infrastructure/exception-handler/#_4","title":"\u9a8c\u8bc1\u9519\u8bef","text":"<p>\u5f53\u629b\u51fa\u7684\u5f02\u5e38\u5b9e\u73b0<code>IHasValidationErrors</code> \u63a5\u53e3\u65f6,validationErrors \u662f\u4e00\u4e2a\u53ef\u88ab\u586b\u5145\u7684\u6807\u51c6\u5b57\u6bb5.\u793a\u4f8b JSON \u5982\u4e0b:</p> JSON<pre><code>{\n  \"error\": {\n    \"code\": \"App:010046\",\n    \"message\": \"Your request is not valid, please correct and try again!\",\n    \"validationErrors\": [\n      {\n        \"message\": \"Username should be minimum length of 3.\",\n        \"members\": [\"userName\"]\n      },\n      {\n        \"message\": \"Password is required\",\n        \"members\": [\"password\"]\n      }\n    ]\n  }\n}\n</code></pre> <p><code>AbpValidationException</code>\u5df2\u7ecf\u5b9e\u73b0\u4e86<code>IHasValidationErrors</code>\u63a5\u53e3,\u5f53\u8bf7\u6c42\u8f93\u5165\u65e0\u6548\u65f6,\u6846\u67b6\u4f1a\u81ea\u52a8\u629b\u51fa\u6b64\u9519\u8bef. \u56e0\u6b64,\u9664\u975e\u4f60\u6709\u81ea\u5b9a\u4e49\u7684\u9a8c\u8bc1\u903b\u8f91,\u5426\u5219\u4e0d\u9700\u8981\u5904\u7406\u9a8c\u8bc1\u9519\u8bef.</p>"},{"location":"user-guide/zh/infrastructure/exception-handler/#_5","title":"\u4e1a\u52a1\u5f02\u5e38","text":"<p>\u5927\u591a\u6570\u5f02\u5e38\u90fd\u662f\u4e1a\u52a1\u5f02\u5e38.\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528<code>IBusinessException</code> \u63a5\u53e3\u6765\u6807\u8bb0\u5f02\u5e38\u4e3a\u4e1a\u52a1\u5f02\u5e38.</p> <p><code>BusinessException</code> \u9664\u4e86\u5b9e\u73b0<code>IHasErrorCode</code>,<code>IHasErrorDetails</code> ,<code>IHasLogLevel</code> \u63a5\u53e3\u5916,\u8fd8\u5b9e\u73b0\u4e86<code>IBusinessException</code> \u63a5\u53e3.\u5176\u9ed8\u8ba4\u65e5\u5fd7\u7ea7\u522b\u4e3a<code>Warning</code>.</p> <p>\u901a\u5e38\u4f60\u4f1a\u5c06\u4e00\u4e2a\u9519\u8bef\u4ee3\u7801\u5173\u8054\u81f3\u7279\u5b9a\u7684\u4e1a\u52a1\u5f02\u5e38.\u4f8b\u5982:</p> C#<pre><code>throw new BusinessException(QaErrorCodes.CanNotVoteYourOwnAnswer);\n</code></pre> <p><code>QaErrorCodes.CanNotVoteYourOwnAnswer</code> \u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u5e38\u91cf. \u5efa\u8bae\u4f7f\u7528\u4e0b\u9762\u7684\u9519\u8bef\u4ee3\u7801\u683c\u5f0f:</p> Text Only<pre><code>&lt;code-namespace&gt;:&lt;error-code&gt;\n</code></pre> <p>code-namespace,\u5e94\u5728\u6307\u5b9a\u7684\u6a21\u5757/\u5e94\u7528\u5c42\u4e2d\u4fdd\u8bc1\u5176\u552f\u4e00.\u4f8b\u5982:</p> Text Only<pre><code>Volo.Qa:010002\n</code></pre> <p><code>Volo.Qa</code>\u5728\u8fd9\u662f\u4f5c\u4e3a<code>code-namespace</code>. <code>code-namespace</code> \u540c\u6837\u53ef\u4ee5\u5728 \u672c\u5730\u5316 \u5f02\u5e38\u4fe1\u606f\u65f6\u4f7f\u7528.</p> <ul> <li>\u4f60\u53ef\u4ee5\u76f4\u63a5\u629b\u51fa\u4e00\u4e2a <code>BusinessException</code> \u5f02\u5e38,\u6216\u8005\u9700\u8981\u65f6\u53ef\u4ee5\u4ece\u8be5\u7c7b\u6d3e\u751f\u4f60\u81ea\u5df1\u7684 Exception \u7c7b\u578b.</li> <li>\u5bf9\u4e8e<code>BusinessException</code> \u7c7b\u578b,\u5176\u6240\u6709\u5c5e\u6027\u90fd\u662f\u53ef\u9009\u7684.\u4f46\u662f\u901a\u5e38\u4f1a\u8bbe\u7f6e<code>ErrorCode</code>\u6216<code>Message</code>\u5c5e\u6027.</li> </ul>"},{"location":"user-guide/zh/infrastructure/exception-handler/#_6","title":"\u4f7f\u7528\u9519\u8bef\u4ee3\u7801","text":"<p>\u901a\u8fc7\u4f7f\u7528\u9519\u8bef\u4ee3\u7801\u7684\u65b9\u5f0f\u6765\u5904\u7406\u672c\u5730\u5316,\u800c\u4e0d\u662f\u5728\u629b\u51fa\u5f02\u5e38\u7684\u65f6\u5019.</p> <p>\u9996\u5148,\u5728\u6a21\u5757\u914d\u7f6e\u4ee3\u7801\u4e2d\u5c06 code-namespace \u6620\u5c04\u81f3 \u672c\u5730\u5316\u8d44\u6e90:</p> C#<pre><code>services.Configure&lt;AbpExceptionLocalizationOptions&gt;(options =&gt;\n{\n    options.MapCodeNamespace(\"Volo.Qa\", typeof(QaResource));\n});\n</code></pre> <p>\u7136\u540e<code>Volo.Qa</code>\u547d\u540d\u7a7a\u95f4\u4e0b\u7684\u6240\u6709\u5f02\u5e38\u90fd\u5c06\u88ab\u5bf9\u5e94\u7684\u672c\u5730\u5316\u8d44\u6e90\u8fdb\u884c\u672c\u5730\u5316\u5904\u7406. \u672c\u5730\u5316\u8d44\u6e90\u4e2d\u5e94\u5305\u542b\u5bf9\u5e94\u9519\u8bef\u4ee3\u7801\u7684\u6587\u672c. \u4f8b\u5982:</p> JSON<pre><code>{\n  \"culture\": \"en\",\n  \"texts\": {\n    \"Volo.Qa:010002\": \"You can not vote your own answer!\"\n  }\n}\n</code></pre> <p>\u6700\u540e\u5c31\u53ef\u4ee5\u629b\u51fa\u4e00\u4e2a\u5305\u542b\u9519\u8bef\u4ee3\u7801\u7684\u4e1a\u52a1\u5f02\u5e38\u4e86:</p> C#<pre><code>throw new BusinessException(QaDomainErrorCodes.CanNotVoteYourOwnAnswer);\n</code></pre> <ul> <li>\u629b\u51fa\u6240\u6709\u5b9e\u73b0<code>IHasErrorCode</code> \u63a5\u53e3\u7684\u5f02\u5e38\u90fd\u5177\u6709\u76f8\u540c\u7684\u884c\u4e3a.\u56e0\u6b64,\u5bf9\u9519\u8bef\u4ee3\u7801\u7684\u672c\u5730\u5316,\u5e76\u4e0d\u662f<code>BusinessException</code>\u7c7b\u6240\u7279\u6709\u7684.</li> <li>\u4e3a\u9519\u8bef\u6d88\u606f\u5b9a\u4e49\u672c\u5730\u5316\u6587\u672c\u5e76\u4e0d\u662f\u5fc5\u987b\u7684. \u5982\u679c\u672a\u5b9a\u4e49,ABP \u4f1a\u5c06\u9ed8\u8ba4\u7684\u9519\u8bef\u6d88\u606f\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef. \u800c\u4e0d\u4f7f\u7528\u5f02\u5e38\u7684<code>Message</code>\u5c5e\u6027. \u5982\u679c\u4f60\u60f3\u8981\u53d1\u9001\u5f02\u5e38\u7684<code>Message</code>,\u4f7f\u7528<code>UserFriendlyException</code>(\u6216\u4f7f\u7528\u5b9e\u73b0<code>IUserFriendlyException</code>\u63a5\u53e3\u7684\u5f02\u5e38\u7c7b\u578b)</li> </ul>"},{"location":"user-guide/zh/infrastructure/exception-handler/#_7","title":"\u4f7f\u7528\u6d88\u606f\u7684\u683c\u5f0f\u5316\u53c2\u6570","text":"<p>\u5982\u679c\u6709\u53c2\u6570\u5316\u7684\u9519\u8bef\u6d88\u606f,\u5219\u53ef\u4ee5\u4f7f\u7528\u5f02\u5e38\u7684<code>Data</code>\u5c5e\u6027\u8fdb\u884c\u8bbe\u7f6e.\u4f8b\u5982:</p> C#<pre><code>throw new BusinessException(\"App:010046\")\n{\n    Data =\n    {\n        {\"UserName\", \"john\"}\n    }\n};\n</code></pre> <p>\u53e6\u5916\u6709\u4e00\u79cd\u66f4\u4e3a\u5feb\u6377\u7684\u65b9\u5f0f:</p> C#<pre><code>throw new BusinessException(\"App:010046\")\n    .WithData(\"UserName\", \"john\");\n</code></pre> <p>\u4e0b\u9762\u5c31\u662f\u4e00\u4e2a\u5305\u542b<code>UserName</code> \u53c2\u6570\u7684\u9519\u8bef\u6d88\u606f:</p> JSON<pre><code>{\n  \"culture\": \"en\",\n  \"texts\": {\n    \"App:010046\": \"Username should be unique. '{UserName}' is already taken!\"\n  }\n}\n</code></pre> <ul> <li><code>WithData</code> \u652f\u6301\u6709\u591a\u4e2a\u53c2\u6570\u7684\u94fe\u5f0f\u8c03\u7528 (\u5982<code>.WithData(...).WithData(...)</code>).</li> </ul>"},{"location":"user-guide/zh/infrastructure/exception-handler/#http","title":"HTTP \u72b6\u6001\u4ee3\u7801\u6620\u5c04","text":"<p>ABP \u5c1d\u8bd5\u6309\u7167\u4ee5\u4e0b\u89c4\u5219,\u81ea\u52a8\u6620\u5c04\u5e38\u89c1\u7684\u5f02\u5e38\u7c7b\u578b\u7684 HTTP \u72b6\u6001\u4ee3\u7801:</p> <ul> <li>\u5bf9\u4e8e <code>AbpAuthorizationException</code>:</li> <li>\u7528\u6237\u6ca1\u6709\u767b\u5f55,\u8fd4\u56de <code>401</code> (\u672a\u8ba4\u8bc1).</li> <li>\u7528\u6237\u5df2\u767b\u5f55,\u4f46\u662f\u5f53\u524d\u8bbf\u95ee\u672a\u6388\u6743,\u8fd4\u56de <code>403</code> (\u672a\u6388\u6743).</li> <li>\u5bf9\u4e8e <code>AbpValidationException</code> \u8fd4\u56de <code>400</code> (\u9519\u8bef\u7684\u8bf7\u6c42) .</li> <li>\u5bf9\u4e8e <code>EntityNotFoundException</code>\u8fd4\u56de <code>404</code> (\u672a\u627e\u5230).</li> <li>\u5bf9\u4e8e <code>IBusinessException</code> \u548c <code>IUserFriendlyException</code> (\u5b83\u662f<code>IBusinessException</code>\u7684\u6269\u5c55) \u8fd4\u56de<code>403</code> (\u672a\u6388\u6743) .</li> <li>\u5bf9\u4e8e <code>NotImplementedException</code> \u8fd4\u56de <code>501</code> (\u672a\u5b9e\u73b0) .</li> <li>\u5bf9\u4e8e\u5176\u4ed6\u5f02\u5e38 (\u57fa\u7840\u67b6\u6784\u4e2d\u672a\u5b9a\u4e49\u7684) \u8fd4\u56de <code>500</code> (\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef) .</li> </ul> <p><code>IHttpExceptionStatusCodeFinder</code> \u662f\u7528\u6765\u81ea\u52a8\u5224\u65ad HTTP \u72b6\u6001\u4ee3\u7801.\u9ed8\u8ba4\u7684\u5b9e\u73b0\u662f<code>DefaultHttpExceptionStatusCodeFinder</code>.\u53ef\u4ee5\u6839\u636e\u9700\u8981\u5bf9\u5176\u8fdb\u884c\u66f4\u6362\u6216\u6269\u5c55.</p>"},{"location":"user-guide/zh/infrastructure/exception-handler/#_8","title":"\u81ea\u5b9a\u4e49\u6620\u5c04","text":"<p>\u53ef\u4ee5\u91cd\u5199 HTTP \u72b6\u6001\u4ee3\u7801\u7684\u81ea\u52a8\u6620\u5c04,\u793a\u4f8b\u5982\u4e0b:</p> C#<pre><code>services.Configure&lt;AbpExceptionHttpStatusCodeOptions&gt;(options =&gt;\n{\n    options.Map(\"Volo.Qa:010002\", HttpStatusCode.Conflict);\n});\n</code></pre>"},{"location":"user-guide/zh/infrastructure/exception-handler/#_9","title":"\u53d1\u9001\u5f02\u5e38\u8be6\u60c5\u5230\u5ba2\u6237\u7aef","text":"<p>\u4f60\u53ef\u4ee5\u901a\u8fc7 <code>AbpExceptionHandlingOptions</code> \u7c7b\u7684 <code>SendExceptionsDetailsToClients</code> \u5c5e\u6027\u5f02\u5e38\u53d1\u9001\u5230\u5ba2\u6237\u7aef:</p> C#<pre><code>services.Configure&lt;AbpExceptionHandlingOptions&gt;(options =&gt;\n{\n    options.SendExceptionsDetailsToClients = true;\n});\n</code></pre>"},{"location":"user-guide/zh/infrastructure/freesql/","title":"CQRS","text":"<p>CQRS:\u547d\u4ee4\u67e5\u8be2\u804c\u8d23\u9694\u79bb,\u547d\u4ee4\u662f\u6307 \u63d2\u5165\u3001\u4fee\u6539\u3001\u5220\u9664\uff0c\u5c31\u662f\u66f4\u6539\u6570\u636e\u7684\u52a8\u4f5c.\u901a\u8fc7 Freesql \u89e3\u51b3\u5355\u4e00\u6570\u636e\u6a21\u578b\u5e26\u6765\u7684\u67e5\u8be2\u5c34\u5c2c\u573a\u9762\u3002 \u5f53\u524d\u67b6\u6784\u4e0b\uff0cFreesql \u548c ef \u4e0d\u5728\u4e00\u4e2a\u4e8b\u52a1\uff0c\u6700\u597d\u5b9e\u73b0\u5c31\u662f\u7528\u6765\u505a\u67e5\u8be2\uff0c\u6bd4\u5982\u5206\u9875\u67e5\u8be2\u3002 </p>"},{"location":"user-guide/zh/infrastructure/freesql/#_1","title":"\u914d\u7f6e","text":"C#<pre><code>public class AbpProFreeSqlModule : AbpModule\n{\n    public override void ConfigureServices(ServiceConfigurationContext context)\n    {\n        var configuration = context.Services.GetConfiguration();\n        var connectionString = configuration.GetConnectionString(\"Default\");\n        var freeSql = new FreeSql.FreeSqlBuilder()\n            .UseConnectionString(FreeSql.DataType.MySql, connectionString)\n            .Build();\n\n        context.Services.AddSingleton&lt;IFreeSql&gt;(freeSql);\n    }\n}\n</code></pre>"},{"location":"user-guide/zh/infrastructure/freesql/#_2","title":"\u4f7f\u7528","text":"<ul> <li>\u5728 Domain \u5c42\u6dfb\u52a0\u63a5\u53e3</li> </ul> C#<pre><code>public interface IUserFreeSqlBasicRepository\n{\n    Task&lt;List&lt;UserOutput&gt;&gt; GetListAsync();\n}\n</code></pre> <ul> <li>\u5728 Freesql \u5c42\u6dfb\u52a0\u5b9e\u73b0</li> </ul> C#<pre><code>public class UserFreeSqlBasicRepository : FreeSqlBasicRepository, IUserFreeSqlBasicRepository\n{\n    public async Task&lt;List&lt;UserOutput&gt;&gt; GetListAsync()\n    {\n        var sql = \"select id from AbpUsers\";\n        var result = await FreeSql.Select&lt;UserOutput&gt;()\n        .WithSql(sql)\n        .ToListAsync();\n        return result;\n    }\n}\n</code></pre>"},{"location":"user-guide/zh/infrastructure/frontend/","title":"\u524d\u7aef","text":"<p>Vben Admin \u6587\u6863</p>"},{"location":"user-guide/zh/infrastructure/frontend/#_2","title":"\u4ee3\u7801\u751f\u6210","text":"<p>\u524d\u7aef\u63a5\u53e3\uff0c\u53c2\u6570\uff0c\u81ea\u52a8\u751f\u6210\uff0c\u5168\u90e8\u91c7\u7528 Post \u65b9\u5f0f</p> <ul> <li>\u6240\u6709\u8bbf\u95ee\u540e\u7aef\u63a5\u53e3\u4ee3\u7801\u81ea\u52a8\u751f\u6210 NSwag</li> </ul>"},{"location":"user-guide/zh/infrastructure/frontend/#_3","title":"\u914d\u7f6e\u4ee3\u7406\u7684\u5730\u5740","text":"<ul> <li>nswag-&gt;nswag.json</li> </ul> JSON<pre><code>  \"documentGenerator\": {\n    \"fromDocument\": {\n      // \u4ee3\u7406\u5730\u5740\uff0c\u53ea\u6709\u751f\u6210\u7684\u65f6\u5019\u7528\uff0c\u4e0d\u533a\u5206\u73af\u5883\n      \"url\": \"http://localhost:44315/swagger/v1/swagger.json\",\n    }\n  }\n</code></pre> <ul> <li>\u5982\u679c\u63a5\u53e3\u53c2\u6570\u6216\u8005\u8fd4\u56de\u503c\u6709\u6539\u53d8\uff0c\u9700\u8981\u91cd\u65b0\u751f\u6210\u4ee3\u7406\uff0c\u6267\u884c:</li> </ul> Bash<pre><code>npm run nswag\n</code></pre>"},{"location":"user-guide/zh/infrastructure/frontend/#api","title":"\u540e\u7aef Api \u683c\u5f0f","text":"C#<pre><code>// \u4e00\u5b9a\u8981\u6253Tags\uff0c\u56e0\u4e3a\u524d\u7aef\u4f1a\u6839\u636e\u8fd9\u4e2a\u751f\u6210\u4ee3\u7406\u7c7b\n// \u5efa\u8bae\u53c2\u6570\u90fd\u5c01\u88c5\u4e3a\u4e00\u4e2aInput\n[SwaggerOperation(summary: \"\u767b\u5f55\", Tags = new[] {\"Account\"})]\npublic Task&lt;LoginOutput&gt; LoginAsync(LoginInput input)\n{\n    return _loginAppService.LoginAsync(input);\n}\n</code></pre>"},{"location":"user-guide/zh/infrastructure/frontend/#_4","title":"\u524d\u7aef\u591a\u73af\u5883","text":"<ul> <li>.env.development \u548c.env.production</li> <li>VITE_API_URL:\u540e\u7aef\u63a5\u53e3\u5730\u5740</li> <li>VITE_WEBSOCKE_URL: WEBSOCKE \u5730\u5740</li> </ul>"},{"location":"user-guide/zh/infrastructure/frontend/#_5","title":"\u6743\u9650\u914d\u7f6e","text":""},{"location":"user-guide/zh/infrastructure/frontend/#_6","title":"\u83dc\u5355\u6743\u9650","text":"TypeScript<pre><code>import type { AppRouteModule } from \"/@/router/types\";\nimport { LAYOUT } from \"/@/router/constant\";\nimport { t } from \"/@/hooks/web/useI18n\";\nconst tenant: AppRouteModule = {\n  path: \"/tenant\",\n  name: \"Tenant\",\n  component: LAYOUT,\n  meta: {\n    orderNo: 30,\n    icon: \"ant-design:contacts-outlined\",\n    title: t(\"routes.tenant.tenantManagement\"),\n  },\n  children: [\n    {\n      path: \"Tenant\",\n      name: \"Tenant\",\n      component: () =&gt; import(\"/@/views/tenants/Tenant.vue\"),\n      meta: {\n        title: t(\"routes.tenant.tenantList\"),\n        icon: \"ant-design:switcher-filled\",\n        policy: \"AbpTenantManagement.Tenants\", //\u83dc\u5355\u6743\u9650\n      },\n    },\n  ],\n};\n\nexport default tenant;\n</code></pre>"},{"location":"user-guide/zh/infrastructure/frontend/#_7","title":"\u6309\u94ae\u6743\u9650","text":"Text Only<pre><code>&lt;template&gt;\n  &lt;div&gt;\n    &lt;BasicTable @register=\"registerTable\" size=\"small\"&gt;\n      &lt;template #action=\"{ record }\"&gt;\n        &lt;TableAction\n          :actions=\"[\n            {\n              icon: 'ant-design:edit-outlined',\n              auth: 'AbpIdentity.Users.Update', // \u6309\u94ae\u6743\u9650\n              label: t('common.editText'),\n              onClick: handleEdit.bind(null, record),\n            },\n          ]\"\n          :dropDownActions=\"[\n            {\n              auth: 'AbpIdentity.Users.Delete', // \u6309\u94ae\u6743\u9650\n              label: t('common.delText'),\n              onClick: handleDelete.bind(null, record),\n            },\n            {\n              auth: 'System.Users.Enable', // \u6309\u94ae\u6743\u9650\n              label: !record.isActive\n                ? t('common.enabled')\n                : t('common.disEnabled'),\n              onClick: handleLock.bind(null, record),\n            },\n          ]\"\n        /&gt;\n      &lt;/template&gt;\n    &lt;/BasicTable&gt;\n    &lt;CreateAbpUser\n      @register=\"registerCreateAbpUserModal\"\n      @reload=\"reload\"\n      :bodyStyle=\"{ 'padding-top': '0' }\"\n    /&gt;\n    &lt;EditAbpUser\n      @register=\"registerEditAbpUserModal\"\n      @reload=\"reload\"\n      :bodyStyle=\"{ 'padding-top': '0' }\"\n    /&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n</code></pre>"},{"location":"user-guide/zh/infrastructure/log/","title":"Serilog","text":"<p>ABP \u6846\u67b6\u6ca1\u6709\u5b9e\u73b0\u4efb\u4f55\u65e5\u5fd7\u57fa\u7840\u8bbe\u65bd. \u5b83\u4f7f\u7528 ASP.NET Core \u65e5\u5fd7\u7cfb\u7edf.</p>"},{"location":"user-guide/zh/infrastructure/log/#_1","title":"\u65e5\u5fd7\u7b49\u7ea7","text":"<p>Debug \u2192 Information \u2192 Warning \u2192 Error \u2192 Fatal</p>"},{"location":"user-guide/zh/infrastructure/log/#_2","title":"\u5982\u4f55\u96c6\u6210","text":"Program.cs<pre><code>public class Program\n{\n    private static IHostBuilder CreateHostBuilder(string[] args) =&gt;\n        Host.CreateDefaultBuilder(args)\n            .ConfigureWebHostDefaults()\n            // \u4f7f\u7528Serilog\n            .UseSerilog((context, loggerConfiguration) =&gt;\n            {\n                SerilogToEsExtensions.SetSerilogConfiguration(\n                    loggerConfiguration,\n                    context.Configuration);\n            }).UseAutofac();\n}\n</code></pre> SerilogToEsExtensions.cs<pre><code>public static void SetSerilogConfiguration(LoggerConfiguration loggerConfiguration, IConfiguration configuration)\n{\n    // \u9ed8\u8ba4\u8bfb\u53d6 configuration \u4e2d \"Serilog\" \u8282\u70b9\u4e0b\u7684\u914d\u7f6e\n    loggerConfiguration\n        .ReadFrom.Configuration(configuration)\n        .Enrich.FromLogContext();\n    // \u5982\u679c\u8981\u518d\u65e5\u5fd7\u52a0\u4e0a\u81ea\u5b9a\u4e49\u5b57\u6bb5\n    loggerConfiguration.Enrich.WithProperty(\"Application\", applicationName);\n}\n</code></pre>"},{"location":"user-guide/zh/infrastructure/log/#_3","title":"\u914d\u7f6e","text":"appsetting.json<pre><code>\"Serilog\": {\n  \"Using\": [\n    \"Serilog.Sinks.Console\",\n    \"Serilog.Sinks.File\"\n  ],\n  \"MinimumLevel\": {\n    // \u9ed8\u8ba4\u5168\u5c40\u65e5\u5fd7\u7ea7\u522b\n    \"Default\": \"Information\",\n    \"Override\": {\n      //\u540d\u79f0\u7a7a\u95f4\u4e3a Microsoft \u65e5\u5fd7\u7ea7\u522b\n      \"Microsoft\": \"Information\",\n      //\u540d\u79f0\u7a7a\u95f4\u4e3a Volo.Abp \u65e5\u5fd7\u7ea7\u522b\n      \"Volo.Abp\": \"Information\",\n      //\u540d\u79f0\u7a7a\u95f4\u4e3a Hangfire \u65e5\u5fd7\u7ea7\u522b\n      \"Hangfire\": \"Information\",\n      //\u540d\u79f0\u7a7a\u95f4\u4e3a DotNetCore.CAP \u65e5\u5fd7\u7ea7\u522b\n      \"DotNetCore.CAP\": \"Information\",\n      //\u540d\u79f0\u7a7a\u95f4\u4e3a Serilog.AspNetCore \u65e5\u5fd7\u7ea7\u522b\n      \"Serilog.AspNetCore\": \"Information\",\n      //\u540d\u79f0\u7a7a\u95f4\u4e3a Microsoft.EntityFrameworkCore \u65e5\u5fd7\u7ea7\u522b\n      \"Microsoft.EntityFrameworkCore\": \"Warning\",\n      //\u540d\u79f0\u7a7a\u95f4\u4e3a Microsoft.AspNetCore \u65e5\u5fd7\u7ea7\u522b\n      \"Microsoft.AspNetCore\": \"Information\"\n    }\n  },\n  \"WriteTo\": [\n    {\n      // \u8f93\u51fa\u5230\u63a7\u5236\u53f0\u65e5\u5fd7\n      \"Name\": \"Console\"\n    },\n    {\n      // \u8f93\u51fa\u5230\u6587\u4ef6\n      \"Name\": \"File\",\n      \"Args\": {\n        \"path\": \"logs/logs-.txt\",\n         // \u6309\u5929\u8f93\u51fa\n        \"rollingInterval\": \"Day\"\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"user-guide/zh/infrastructure/log/#elasticsearch","title":"\u5199\u5165 ElasticSearch","text":"<p>AbpPro \u5df2\u7ecf\u96c6\u6210 ElasticSearch \u53ea\u9700\u8981\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u542f\u7528\u5373\u53ef\u3002</p> <ul> <li>Enabled:\u662f\u5426\u542f\u7528</li> <li>Url:es \u5730\u5740</li> <li>IndexFormat:es \u7d22\u5f15</li> <li>UserName:\u7528\u6237\u540d</li> <li>Password:\u5bc6\u7801</li> </ul> appsetting.json<pre><code>\"ElasticSearch\": {\n  \"Enabled\": \"false\",\n  \"Url\": \"http://es.cn\",\n  // \u7d22\u5f15\u540d\u5fc5\u987b\u5c0f\u5199\n  \"IndexFormat\": \"lion.abppro.development.{0:yyyy.MM.dd}\",\n  \"UserName\": \"elastic\",\n  \"Password\": \"aVVhjQ95RP7nbwNy\"\n},\n</code></pre>"},{"location":"user-guide/zh/infrastructure/log/#_4","title":"\u4f7f\u7528","text":"SampleAppService.cs<pre><code>public class SampleAppService : AbpProAppService,ISampleAppService\n{\n    private readonly ILogger&lt;SampleAppService&gt; _logger;\n\n    public SampleAppService(ILogger&lt;SampleAppService&gt; logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task TestAsync()\n    {\n        _logger.LogDebug(\"LogDebug\");\n        _logger.LogInformation(\"LogInformation\");\n        _logger.LogWarning(\"LogWarning\");\n        _logger.LogError(\"LogError\");\n        _logger.LogTrace(\"LogTrace\");\n        await Task.CompletedTask;\n    }\n}\n</code></pre>"},{"location":"user-guide/zh/infrastructure/log/#_5","title":"\u65e5\u5fd7\u8ffd\u52a0\u5b57\u6bb5","text":"C#<pre><code>/// &lt;summary&gt;\n/// \u81ea\u5b9a\u4e49\u8ffd\u52a0\u65e5\u5fd7\u5185\u5bb9\n/// &lt;/summary&gt;\n/// &lt;param name=\"logger\"&gt;&lt;/param&gt;\n/// &lt;param name=\"message\"&gt;\u65e5\u5fd7\u5185\u5bb9&lt;/param&gt;\n/// &lt;param name=\"level\"&gt;\u65e5\u5fd7\u7ea7\u522b&lt;/param&gt;\n/// &lt;param name=\"dictionary\"&gt;\u8ffd\u52a0\u5185\u5bb9&lt;/param&gt;\npublic static void Custom(this ILogger logger, string message, LogLevel level = LogLevel.Information, Dictionary&lt;string, object&gt; dictionary = null)\n{\n    if (dictionary == null || dictionary.Count == 0)\n    {\n        logger.Log(level, message);\n    }\n    else\n    {\n        using (logger.BeginScope(dictionary))\n        {\n            logger.Log(level, message);\n        }\n    }\n}\n</code></pre>"},{"location":"user-guide/zh/infrastructure/login/","title":"\u767b\u5f55","text":"<p>ABP vNext Pro \u6ca1\u6709\u96c6\u6210 IdentityServer4 \u6216\u8005 OpenIddict,\u800c\u662f\u76f4\u63a5\u4f7f\u7528\u9ed8\u8ba4\u7684 Asp Net Core Identity\u3002</p> <ul> <li>\u51cf\u5c11\u7cfb\u7edf\u590d\u6742\u5ea6</li> <li>\u5927\u90e8\u5206(IdentityServer4|OpenIddict)\u529f\u80fd\u7528\u4e0d\u4e0a</li> </ul>"},{"location":"user-guide/zh/infrastructure/login/#_2","title":"\u767b\u5f55\u63a5\u53e3","text":"AccountAppService.cs<pre><code>public virtual async Task&lt;LoginOutput&gt; LoginAsync(LoginInput input)\n{\n    var result = await _signInManager.PasswordSignInAsync(input.Name, input.Password, false, true);\n    if (result.IsNotAllowed)\n    {\n        throw new BusinessException(BasicManagementErrorCodes.UserLockedOut);\n    }\n    if (!result.Succeeded)\n    {\n        throw new BusinessException(BasicManagementErrorCodes.UserOrPasswordMismatch);\n    }\n    var user = await _userManager.FindByNameAsync(input.Name);\n    return await BuildResult(user);\n}\n</code></pre>"},{"location":"user-guide/zh/infrastructure/login/#accesstoken","title":"\u914d\u7f6e AccessToken","text":"appsetting.json<pre><code> \"Jwt\": {\n    \"Audience\": \"Lion.AbpPro\",\n    \"SecurityKey\": \"dzehzRz9a8asdfasfdadfasdfasdfafsdadfasbasdf=\",\n    \"Issuer\": \"Lion.AbpPro\",\n    \"ExpirationTime\": 30\n  }\n</code></pre> <ul> <li>Audience:\u63a5\u6536\u5bf9\u8c61</li> <li>Issuer:\u7b7e\u53d1\u4e3b\u4f53</li> <li>SecurityKey:\u5bc6\u94a5</li> <li>ExpirationTime:\u8fc7\u671f\u65f6\u95f4(\u5355\u4f4d\u5c0f\u65f6)</li> </ul>"},{"location":"user-guide/zh/modules/basic/","title":"\u57fa\u7840\u6a21\u5757","text":"<ul> <li>\u628aabp\u81ea\u5e26 \u8d26\u6237\u6a21\u5757\uff0c\u6743\u9650\u6a21\u5757\uff0cidentity\u6a21\u5757\uff0csetting\u6a21\u5757\uff0cfeature\u6a21\u5757\uff0c\u540e\u53f0\u4efb\u52a1\u6a21\u5757\uff0c\u79df\u6237\u6a21\u5757\u5c01\u88c5\u5230BasicManagement</li> </ul>"},{"location":"user-guide/zh/modules/basic/#_2","title":"\u5b89\u88c5","text":"<ul> <li>Lion.Abp.BasicManagement.Application</li> <li>Lion.Abp.BasicManagement.Application.Contracts</li> <li>Lion.Abp.BasicManagement.Domain</li> <li>Lion.Abp.BasicManagement.Domain.Shared</li> <li>Lion.Abp.BasicManagement.EntityFrameworkCore</li> <li>Lion.Abp.BasicManagement.HttpApi</li> <li>Lion.Abp.BasicManagement.HttpApi.Client</li> </ul>"},{"location":"user-guide/zh/modules/basic/#_3","title":"\u6a21\u5757\u4f9d\u8d56","text":"<ul> <li>\u6dfb\u52a0 DependsOn(typeof(BasicManagementXxxModule)) \u7279\u6027\u5230\u5bf9\u5e94\u6a21\u5757\u3002</li> <li>\u5728EntityFrameworkCore\u5c42\u6dfb\u52a0\u6570\u636e\u5e93\u914d\u7f6e\u5728AbpProDbContext.cs\u7684OnModelCreating()\u65b9\u6cd5\u4e2d\u6dfb\u52a0builder.ConfigureBasicManagement();</li> </ul>"},{"location":"user-guide/zh/modules/dic/","title":"\u6570\u636e\u5b57\u5178\u6a21\u5757","text":"<p>Abp \u81ea\u5e26\u7684 Setting \u6a21\u5757\u53ef\u80fd\u6ee1\u8db3\u4e0d\u4e86\u9700\u6c42\uff0c\u7279\u610f\u63d0\u4f9b\u6570\u636e\u5b57\u5178\u6a21\u5757\u3002 </p>"},{"location":"user-guide/zh/modules/dic/#_2","title":"\u5b89\u88c5","text":"<ul> <li>Lion.Abp.DataDictionaryManagement.Application</li> <li>Lion.Abp.DataDictionaryManagement.Application.Contracts</li> <li>Lion.Abp.DataDictionaryManagement.Domain</li> <li>Lion.Abp.DataDictionaryManagement.Domain.Shared</li> <li>Lion.Abp.DataDictionaryManagement.EntityFrameworkCore</li> <li>Lion.Abp.DataDictionaryManagement.HttpApi</li> <li>Lion.Abp.DataDictionaryManagement.HttpApi.Client</li> </ul>"},{"location":"user-guide/zh/modules/dic/#_3","title":"\u6a21\u5757\u4f9d\u8d56","text":"<ul> <li> <p>\u6dfb\u52a0 DependsOn(typeof(DataDictionaryManagementXxxModule)) \u7279\u6027\u5230\u5bf9\u5e94\u6a21\u5757\u3002</p> </li> <li> <p>\u5728 EntityFrameworkCore \u5c42\u6dfb\u52a0\u6570\u636e\u5e93\u914d\u7f6e\u5728 AbpProDbContext.cs \u7684 OnModelCreating()\u65b9\u6cd5\u4e2d\u6dfb\u52a0 builder.ConfigureDataDictionaryManagement();</p> </li> </ul>"},{"location":"user-guide/zh/modules/dic/#_4","title":"\u5b9e\u4f53","text":"<p>DataDictionary \u8868\u7ed3\u6784\uff1a</p> \u5b57\u6bb5\u540d \u63cf\u8ff0 \u7c7b\u578b Id Id Guid TenantId \u79df\u6237 id Guid? Code \u5b57\u5178\u7f16\u7801 string DisplayText \u663e\u793a\u540d string Description \u63cf\u8ff0 DateTime Details \u5b57\u5178\u660e\u7ec6 List IsDeleted \u662f\u5426\u5220\u9664 bool DeleterId \u5220\u9664\u4eba Guid? DeletionTime \u5220\u9664\u65f6\u95f4 DateTime LastModifierId \u6700\u540e\u4fee\u6539\u4eba Guid? LastModificationTime \u6700\u540e\u4fee\u6539\u65f6\u95f4 DateTime CreatorId \u521b\u5efa\u4eba Guid? CreationTime \u521b\u5efa\u65f6\u95f4 DateTime <p>DataDictionaryDetail \u8868\u7ed3\u6784\uff1a</p> \u5b57\u6bb5\u540d \u63cf\u8ff0 \u7c7b\u578b Id Id Guid DataDictionaryId \u6240\u5c5e\u5b57\u5178 Id Guid Order \u6392\u5e8f Int Code \u5b57\u5178\u7f16\u7801 string IsEnabled \u542f/\u505c\u7528(\u9ed8\u8ba4\u542f\u7528) bool DisplayText \u663e\u793a\u540d string Description \u63cf\u8ff0 DateTime IsDeleted \u662f\u5426\u5220\u9664 bool DeleterId \u5220\u9664\u4eba Guid? DeletionTime \u5220\u9664\u65f6\u95f4 DateTime LastModifierId \u6700\u540e\u4fee\u6539\u4eba Guid? LastModificationTime \u6700\u540e\u4fee\u6539\u65f6\u95f4 DateTime CreatorId \u521b\u5efa\u4eba Guid? CreationTime \u521b\u5efa\u65f6\u95f4 DateTime"},{"location":"user-guide/zh/modules/file/","title":"\u6587\u4ef6\u6a21\u5757","text":"<ul> <li>\u4e0e abp \u81ea\u5e26\u7684\u6587\u4ef6\u6a21\u5757\u4e0d\u4e00\u6837\uff0c\u6b64\u6a21\u5757\u63a5\u5165\u963f\u91cc\u4e91 oss \u4f5c\u4e3a\u4e91\u5b58\u50a8\u3002</li> <li>\u524d\u7aef\u4e0a\u4f20\u6587\u4ef6\u5230 OSS,\u6587\u4ef6\u6a21\u5757\u4fdd\u5b58\u76f8\u5bf9\u8def\u5f84\u3002</li> </ul>"},{"location":"user-guide/zh/modules/file/#_2","title":"\u5b89\u88c5","text":"<ul> <li>Lion.Abp.FileManagement.Application</li> <li>Lion.Abp.FileManagement.Application.Contracts</li> <li>Lion.Abp.FileManagement.Domain</li> <li>Lion.Abp.FileManagement.Domain.Shared</li> <li>Lion.Abp.FileManagement.EntityFrameworkCore</li> <li>Lion.Abp.FileManagement.HttpApi</li> <li>Lion.Abp.FileManagement.HttpApi.Client</li> </ul>"},{"location":"user-guide/zh/modules/file/#_3","title":"\u6a21\u5757\u4f9d\u8d56","text":"<ul> <li>\u6dfb\u52a0 DependsOn(typeof(FileManagementXxxModule)) \u7279\u6027\u5230\u5bf9\u5e94\u6a21\u5757\u3002</li> <li>\u5728 EntityFrameworkCore \u5c42\u6dfb\u52a0\u6570\u636e\u5e93\u914d\u7f6e\u5728 AbpProDbContext.cs \u7684 OnModelCreating()\u65b9\u6cd5\u4e2d\u6dfb\u52a0 builder.ConfigureFileManagement();</li> </ul>"},{"location":"user-guide/zh/modules/file/#_4","title":"\u5b9e\u4f53","text":"<p>File \u8868\u7ed3\u6784\uff1a</p> \u5b57\u6bb5\u540d \u63cf\u8ff0 \u7c7b\u578b Id Id Guid TenantId \u79df\u6237 id Guid? FileName \u6587\u4ef6\u540d\u79f0 string FilePath \u6587\u4ef6\u8def\u5f84 string IsDeleted \u662f\u5426\u5220\u9664 bool DeleterId \u5220\u9664\u4eba Guid? DeletionTime \u5220\u9664\u65f6\u95f4 DateTime LastModifierId \u6700\u540e\u4fee\u6539\u4eba Guid? LastModificationTime \u6700\u540e\u4fee\u6539\u65f6\u95f4 DateTime CreatorId \u521b\u5efa\u4eba Guid? CreationTime \u521b\u5efa\u65f6\u95f4 DateTime"},{"location":"user-guide/zh/modules/file/#oss","title":"OSS \u914d\u7f6e","text":"<p>\u963f\u91cc\u4e91 OSS \u914d\u7f6e</p> <ul> <li>\u5c06 OSS \u914d\u7f6e\u6dfb\u52a0\u5230 AppSetting</li> </ul>"},{"location":"user-guide/zh/modules/file/#appsetting","title":"AppSetting \u914d\u7f6e","text":"JSON<pre><code>  \"AliYun\": {\n    \"OSS\": {\n      \"AccessKeyId\": \"LTAI5tLkt3vvScGPVZ5qKJDc1S\",\n      \"AccessKeySecret\": \"BixV8vP5uPrbsdwjYzzsEXOPjkxPST12S\",\n      \"Endpoint\": \"oss-cn-shenzhen.aliyuncs.com\",\n      \"ContainerName\": \"lion-abp-pro\",\n      \"RegionId\": \"oss-cn-shenzhen\",\n      \"RoleArn\": \"acs:ram::1846393972471789:role/ramosst1t\"\n    }\n  }\n</code></pre>"},{"location":"user-guide/zh/modules/file/#_5","title":"\u4e0a\u4f20\u7ec4\u4ef6","text":"<ul> <li>\u524d\u7aef UploadOss.ts</li> </ul>"},{"location":"user-guide/zh/modules/setting/","title":"\u8bbe\u7f6e\u7ba1\u7406","text":"<p>\u5b98\u65b9 Setting \u6a21\u5757\u53c2\u8003\u6587\u6863</p> <p>\u914d\u7f6e\u7cfb\u7edf\u662f\u5728\u542f\u52a8\u65f6\u914d\u7f6e\u5e94\u7528\u7a0b\u5e8f\u5f88\u597d\u7684\u65b9\u5f0f. \u9664\u4e86\u914d\u7f6e\u4e4b\u5916, ABP \u63d0\u4f9b\u4e86\u53e6\u5916\u4e00\u79cd\u8bbe\u7f6e\u548c\u83b7\u53d6\u5e94\u7528\u7a0b\u5e8f\u8bbe\u7f6e\u7684\u65b9\u5f0f. \u8bbe\u7f6e\u5b58\u50a8\u5728\u52a8\u6001\u6570\u636e\u6e90(\u901a\u5e38\u662f\u6570\u636e\u5e93)\u4e2d\u7684\u952e\u503c\u5bf9. \u8bbe\u7f6e\u7cfb\u7edf\u9884\u6784\u5efa\u4e86\u7528\u6237,\u79df\u6237,\u5168\u5c40\u548c\u9ed8\u8ba4\u8bbe\u7f6e\u65b9\u6cd5\u5e76\u4e14\u53ef\u4ee5\u8fdb\u884c\u6269\u5c55.</p>"},{"location":"user-guide/zh/modules/setting/#_2","title":"\u5b9a\u4e49\u8bbe\u7f6e","text":"<p>\u4f7f\u7528\u8bbe\u7f6e\u4e4b\u524d\u9700\u8981\u5b9a\u4e49\u5b83. ABP \u662f \u6a21\u5757\u5316\u7684, \u4e0d\u540c\u7684\u6a21\u5757\u53ef\u4ee5\u62e5\u6709\u4e0d\u540c\u7684\u8bbe\u7f6e. \u53ea\u9700\u8981\u5b9e\u73b0 SettingDefinitionProvider \u7c7b\u65e2\u53ef. \u793a\u4f8b\u5982\u4e0b:</p> <p>\u548c\u5b98\u65b9 Setting \u6a21\u5757\u533a\u522b\uff0c\u503c\u6dfb\u52a0\u4e86 2 \u4e2a\u5c5e\u6027\uff0c\u4e00\u4e2a\u5206\u7ec4\uff0c\u4e00\u4e2a\u7ec4\u4ef6\u7c7b\u578b</p> C#<pre><code>public class CustomSettingProvider : SettingDefinitionProvider\n{\n    public override void Define(ISettingDefinitionContext context)\n    {\n     context.Add(\n        new SettingDefinition(\n                AbpProSettings.Other.Github,\n                \"https://github.com/WangJunZzz/abp-vnext-pro\",\n                L(\"DisplayName:\" + AbpProSettings.Other.Github),\n                L(\"Description:\" + AbpProSettings.Other.Github)\n            )\n            // \u5206\u7ec4\n            .WithProperty(AbpProSettings.Group.Default,AbpProSettings.Group.OtherManagement)\n            // \u524d\u7aef\u7ec4\u4ef6\u7c7b\u578b\n            .WithProperty(AbpProSettings.ControlType.Default,AbpProSettings.ControlType.TypeText));\n    }\n}\n</code></pre> <ul> <li> <p>SettingDefinition \u7c7b\u5177\u6709\u4ee5\u4e0b\u5c5e\u6027:</p> </li> <li> <p>Name: \u5e94\u7528\u7a0b\u5e8f\u4e2d\u8bbe\u7f6e\u7684\u552f\u4e00\u540d\u79f0. \u662f\u5177\u6709\u7ea6\u675f\u7684\u552f\u4e00\u5c5e\u6027, \u5728\u5e94\u7528\u7a0b\u5e8f\u83b7\u53d6/\u8bbe\u7f6e\u6b64\u8bbe\u7f6e\u7684\u503c (\u8bbe\u7f6e\u540d\u79f0\u5b9a\u4e49\u4e3a\u5e38\u91cf\u800c\u4e0d\u662f\u9b54\u6cd5\u5b57\u7b26\u4e32\u662f\u4e2a\u597d\u4e3b\u610f).</p> </li> <li>DefaultValue: \u8bbe\u7f6e\u7684\u9ed8\u8ba4\u503c.</li> <li>DisplayName: \u672c\u5730\u5316\u7684\u5b57\u7b26\u4e32,\u7528\u4e8e\u5728 UI \u4e0a\u663e\u793a\u540d\u79f0.</li> <li> <p>Description: \u672c\u5730\u5316\u7684\u5b57\u7b26\u4e32,\u7528\u4e8e\u5728 UI \u4e0a\u663e\u793a\u63cf\u8ff0.</p> </li> <li> <p>\u4e0a\u9762\u6dfb\u52a0\u4e86 2 \u4e2a\u5c5e\u6027\uff0c\u4e3a\u4e86\u9002\u914d vue \u524d\u7aef\uff0c\u4e00\u4e2a\u8bbe\u7f6e Setting \u5c5e\u4e8e\u54ea\u4e2a\u5206\u7ec4\uff0c\u4e00\u4e2a\u662f\u6839\u636e Setting \u7684\u7c7b\u578b\u6307\u5b9a\u5bf9\u5e94\u7684\u524d\u7aef\u7ec4\u4ef6\uff0c\u6bd4\u5982\u5b57\u7b26\u4e32\u5c31\u662f,Input \u7ec4\u4ef6\u3002</p> </li> <li>\u652f\u6301\u4ee5\u4e0b\u7ec4\u4ef6\uff1aText\uff0cCheckBox\uff0cNumber</li> </ul>"},{"location":"user-guide/zh/modules/setting/#_3","title":"\u8bfb\u53d6\u8bbe\u7f6e\u503c","text":"<p>ISettingProvider \u7528\u4e8e\u83b7\u53d6\u6307\u5b9a\u8bbe\u7f6e\u7684\u503c\u6216\u6240\u6709\u8bbe\u7f6e\u7684\u503c. \u793a\u4f8b\u7528\u6cd5:</p> C#<pre><code>public class MyService\n{\n    private readonly ISettingProvider _settingProvider;\n\n    //Inject ISettingProvider in the constructor\n    public MyService(ISettingProvider settingProvider)\n    {\n        _settingProvider = settingProvider;\n    }\n\n    public async Task FooAsync()\n    {\n        //Get a value as string.\n        string userName = await _settingProvider.GetOrNullAsync(\"Smtp.UserName\");\n\n        //Get a bool value and fallback to the default value (false) if not set.\n        bool enableSsl = await _settingProvider.GetAsync&lt;bool&gt;(\"Smtp.EnableSsl\");\n\n        //Get a bool value and fallback to the provided default value (true) if not set.\n        bool enableSsl = await _settingProvider.GetAsync&lt;bool&gt;(\n            \"Smtp.EnableSsl\", defaultValue: true);\n\n        //Get a bool value with the IsTrueAsync shortcut extension method\n        bool enableSsl = await _settingProvider.IsTrueAsync(\"Smtp.EnableSsl\");\n\n        //Get an int value or the default value (0) if not set\n        int port = (await _settingProvider.GetAsync&lt;int&gt;(\"Smtp.Port\"));\n\n        //Get an int value or null if not provided\n        int? port = (await _settingProvider.GetOrNullAsync(\"Smtp.Port\"))?.To&lt;int&gt;();\n    }\n}\n</code></pre> <p>ISettingProvider \u662f\u975e\u5e38\u5e38\u7528\u7684\u670d\u52a1,\u4e00\u4e9b\u57fa\u7c7b\u4e2d(\u5982 IApplicationService)\u5df2\u7ecf\u5c06\u5176\u5c5e\u6027\u6ce8\u5165. \u8fd9\u79cd\u60c5\u51b5\u4e0b\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 SettingProvider.</p> <ul> <li>ISettingProvider \u4f7f\u7528\u8bbe\u7f6e\u503c\u63d0\u4f9b\u7a0b\u5e8f\u6765\u83b7\u53d6\u8bbe\u7f6e\u503c. \u5982\u679c\u503c\u63d0\u4f9b\u7a0b\u5e8f\u65e0\u6cd5\u83b7\u53d6\u8bbe\u7f6e\u503c,\u5219\u4f1a\u56de\u9000\u5230\u4e0b\u4e00\u4e2a\u503c\u63d0\u4f9b\u7a0b\u5e8f.</li> <li>DefaultValueSettingValueProvider: \u4ece\u8bbe\u7f6e\u5b9a\u4e49\u7684\u9ed8\u8ba4\u503c\u4e2d\u83b7\u53d6\u503c.</li> <li>ConfigurationSettingValueProvider: \u4ece IConfiguration \u670d\u52a1\u4e2d\u83b7\u53d6\u503c.</li> <li>GlobalSettingValueProvider: \u83b7\u53d6\u8bbe\u7f6e\u7684\u5168\u5c40\u503c.</li> <li>TenantSettingValueProvider: \u83b7\u53d6\u5f53\u524d\u79df\u6237\u7684\u8bbe\u7f6e\u503c.</li> <li>UserSettingValueProvider: \u83b7\u53d6\u5f53\u524d\u7528\u6237\u7684\u8bbe\u7f6e\u503c.</li> </ul> <p>\u8bbe\u7f6e\u56de\u9000\u7cfb\u7edf\u4ece\u5e95\u90e8 (\u7528\u6237) \u5230 \u9876\u90e8(\u9ed8\u8ba4) \u65b9\u5411\u8d77\u4f5c\u7528.</p>"},{"location":"user-guide/zh/modules/signalr/","title":"\u5b9e\u65f6\u901a\u4fe1","text":"<p>\u96c6\u6210 Abp SignalR,\u5b9e\u73b0\u7c7b\u4f3c\u7ad9\u5185\u4fe1\u6a21\u5757\u3002</p> <ul> <li>\u53d1\u9001\u6d88\u606f\u4f1a\u5728\u524d\u7aef\u53f3\u4e0a\u89d2\uff0c\u6839\u636e\u4e0d\u540c\u6d88\u606f\u7b49\u7ea7\u6709\u4e0d\u540c\u7684\u7a97\u4f53\u63d0\u793a\u3002</li> </ul> <p></p> <ul> <li>\u5728\u53f3\u4e0a\u89d2\u706f\u6ce1\u6309\u94ae\u53ef\u4ee5\u770b\u5230\u63a5\u53d7\u7684\u6d88\u606f\u3002</li> </ul> <p></p>"},{"location":"user-guide/zh/modules/signalr/#_2","title":"\u5b89\u88c5","text":"<ul> <li>Lion.Abp.NotificationManagement.Application</li> <li>Lion.Abp.NotificationManagement.Application.Contracts</li> <li>Lion.Abp.NotificationManagement.Domain</li> <li>Lion.Abp.NotificationManagement.Domain.Shared</li> <li>Lion.Abp.NotificationManagement.EntityFrameworkCore</li> <li>Lion.Abp.NotificationManagement.HttpApi</li> <li>Lion.Abp.NotificationManagement.HttpApi.Client</li> </ul>"},{"location":"user-guide/zh/modules/signalr/#_3","title":"\u6a21\u5757\u4f9d\u8d56","text":"<ul> <li> <p>\u6dfb\u52a0 DependsOn(typeof(NotificationManagementXxxModule)) \u7279\u6027\u5230\u5bf9\u5e94\u6a21\u5757\u3002</p> </li> <li> <p>\u5728 EntityFrameworkCore \u5c42\u6dfb\u52a0\u6570\u636e\u5e93\u914d\u7f6e\u5728 AbpProDbContext.cs \u7684 OnModelCreating()\u65b9\u6cd5\u4e2d\u6dfb\u52a0 builder.ConfigureNotificationManagement();</p> </li> </ul>"},{"location":"user-guide/zh/modules/signalr/#_4","title":"\u5b9e\u4f53","text":"<p>Notification \u8868\u7ed3\u6784\uff1a</p> \u5b57\u6bb5\u540d \u63cf\u8ff0 \u7c7b\u578b Id Id Guid Title \u6d88\u606f\u6807\u9898 string Content \u6d88\u606f\u5185\u5bb9 string MessageType \u6d88\u606f\u7c7b\u578b MessageType MessageLevel \u6d88\u606f\u7b49\u7ea7 MessageLevel SenderId \u521b\u5efa\u4eba \u53d1\u9001\u4eba NotificationSubscriptions \u6d88\u606f\u8ba2\u9605\u8005\u96c6\u5408 List IsDeleted \u662f\u5426\u5220\u9664 bool DeleterId \u5220\u9664\u4eba Guid? DeletionTime \u5220\u9664\u65f6\u95f4 DateTime LastModifierId \u6700\u540e\u4fee\u6539\u4eba Guid? LastModificationTime \u6700\u540e\u4fee\u6539\u65f6\u95f4 DateTime CreatorId \u521b\u5efa\u4eba Guid? CreationTime \u521b\u5efa\u65f6\u95f4 DateTime <p>NotificationSubscription \u8868\u7ed3\u6784\uff1a</p> \u5b57\u6bb5\u540d \u63cf\u8ff0 \u7c7b\u578b Id Id Guid ReceiveId \u63a5\u6536\u4eba Guid Read \u662f\u5426\u5df2\u8bfb bool ReadTime \u5df2\u8bfb\u65f6\u95f4 DateTime? IsDeleted \u662f\u5426\u5220\u9664 bool DeleterId \u5220\u9664\u4eba Guid? DeletionTime \u5220\u9664\u65f6\u95f4 DateTime LastModifierId \u6700\u540e\u4fee\u6539\u4eba Guid? LastModificationTime \u6700\u540e\u4fee\u6539\u65f6\u95f4 DateTime CreatorId \u521b\u5efa\u4eba Guid? CreationTime \u521b\u5efa\u65f6\u95f4 DateTime"},{"location":"user-guide/zh/modules/signalr/#_5","title":"\u53d1\u9001\u6d88\u606f","text":"<ul> <li>\u6ce8\u5165 NotificationManager,NotificationAppService \u5373\u53ef\u53d1\u9001\u4e0d\u540c\u7ea7\u522b\uff0c\u4e0d\u540c\u7b49\u7ea7\u7684\u6d88\u606f\u3002</li> <li>\u53d1\u9001\u7ed9\u6307\u5b9a\u4eba</li> </ul> C#<pre><code>/// &lt;summary&gt;\n/// \u53d1\u9001\u8b66\u544a\u6587\u672c\u6d88\u606f\n/// &lt;/summary&gt;\n/// &lt;param name=\"title\"&gt;\u6807\u9898&lt;/param&gt;\n/// &lt;param name=\"content\"&gt;\u6d88\u606f\u5185\u5bb9&lt;/param&gt;\n/// &lt;param name=\"receiveIds\"&gt;\u63a5\u53d7\u4eba\uff0c\u53d1\u9001\u7ed9\u8c01\u3002&lt;/param&gt;\nawait _notificationManager.SendCommonWarningMessageAsync(title,content,receiveIds);\n</code></pre> <ul> <li>\u53d1\u9001\u7ed9\u6240\u6709\u4eba</li> </ul> C#<pre><code>/// &lt;summary&gt;\n/// \u53d1\u9001\u8b66\u544a\u6587\u672c\u6d88\u606f\n/// &lt;/summary&gt;\n/// &lt;param name=\"title\"&gt;\u6807\u9898&lt;/param&gt;\n/// &lt;param name=\"content\"&gt;\u6d88\u606f\u5185\u5bb9&lt;/param&gt;\nawait _notificationManager.SendBroadCastInformationMessageAsync(title,content);\n</code></pre>"},{"location":"user-guide/zh/modules/signalr/#_6","title":"\u4f9d\u8d56","text":"<ul> <li>\u5982\u679c\u670d\u52a1\u5206\u5e03\u5f0f\u90e8\u7f72\uff0c\u9700\u8981\u4f7f\u7528 Redis(\u9ed8\u8ba4\u4f9d\u8d56),\u89e3\u51b3 SignalR \u6d88\u606f\u91cd\u590d\u95ee\u9898\u3002</li> </ul> C#<pre><code>private void ConfigurationSignalR(ServiceConfigurationContext context)\n{\n    var redisConnection = context.Services.GetConfiguration()[\"Redis:Configuration\"];\n    if (redisConnection.IsNullOrWhiteSpace())\n    {\n        throw new UserFriendlyException(message: \"Redis\u8fde\u63a5\u5b57\u7b26\u4e32\u672a\u914d\u7f6e.\");\n    }\n    context.Services.AddSignalR()\n    .AddStackExchangeRedis(redisConnection, options =&gt; { options.Configuration.ChannelPrefix = \"Lion.AbpPro\"; });\n}\n</code></pre>"},{"location":"user-guide/zh/modules/signalr/#vue","title":"Vue \u5ba2\u6237\u7aef\u8fde\u63a5","text":"<ul> <li>\u5728\u7528\u6237\u767b\u9646\u6210\u529f\u4e4b\u540e\uff0c\u8fde\u63a5 SignalR,\u5e76\u4e14\u5e26\u81ea\u52a8\u91cd\u8fde\u673a\u5236\u3002\u6e90\u7801</li> <li>\u793a\u4f8b\u5982\u4e0b:</li> </ul> TypeScript<pre><code>const { startConnect } = useSignalR();\nonMounted(() =&gt; {\n  startConnect();\n});\n</code></pre>"},{"location":"user-guide/zh/problem/ef/","title":"EFCore","text":""},{"location":"user-guide/zh/problem/ef/#_1","title":"\u521b\u5efa\u65f6\u95f4,\u66f4\u65b0\u65f6\u95f4,\u5220\u9664\u65f6\u95f4","text":"<ul> <li> <p>\u5f53\u5b9e\u4f53\u7ee7\u627f\u4e86\u8fd9\u4e09\u4e2a\u5c5e\u6027\u5f97\u65f6\u5019,\u53ea\u6709\u5728\u65b0\u589e\u624d\u4f1a\u53c8\u521b\u5efa\u65f6\u95f4,\u5982\u679c\u60f3\u8981\u4e5f\u6709\u66f4\u65b0\u65f6\u95f4\u5982\u4f55\u5904\u7406\u5462\uff1f</p> </li> <li> <p>\u89e3\u51b3\u65b9\u5f0f:\u91cd\u5199 DbContext \u4e00\u4e0b\u65b9\u6cd5</p> </li> </ul> C#<pre><code>namespace Lion.AbpPro.EntityFrameworkCore\n{\n    [ConnectionStringName(\"Default\")]\n    public class AbpProDbContext :\n        AbpDbContext&lt;AbpProDbContext&gt;,\n        IAbpProDbContext\n    {\n        protected override void SetCreationAuditProperties(EntityEntry entry)\n        {\n            SetModificationAuditProperties(entry);\n            base.SetCreationAuditProperties(entry);\n        }\n\n        protected override void SetDeletionAuditProperties(EntityEntry entry)\n        {\n            SetModificationAuditProperties(entry);\n            base.SetDeletionAuditProperties(entry);\n        }\n    }\n}\n</code></pre>"},{"location":"user-guide/zh/problem/ef/#_2","title":"\u8bbe\u7f6e\u6570\u636e\u5e93\u5b57\u7b26\u96c6\u683c\u5f0f","text":"C#<pre><code>namespace Lion.AbpPro.EntityFrameworkCore\n{\n    [ConnectionStringName(\"Default\")]\n    public class AbpProDbContext :\n        AbpDbContext&lt;AbpProDbContext&gt;,\n        IAbpProDbContext\n    {\n        protected override void OnModelCreating(ModelBuilder builder)\n        {\n            builder.UseCollation(\"utf8mb4_unicode_ci\");\n            builder.UseGuidCollation(\"utf8mb4_unicode_ci\");\n            base.OnModelCreating(builder);\n        }\n    }\n}\n</code></pre>"},{"location":"user-guide/zh/problem/ef/#_3","title":"\u5168\u5c40\u8bbe\u7f6e\u5b57\u7b26\u4e32\u957f\u5ea6","text":"<ul> <li>\u5f53\u6570\u636e\u7c7b\u578b\u662f string \u65f6,\u9700\u8981\u7ed9\u6bcf\u4e2a\u5b57\u6bb5\u6307\u5b9a\u957f\u5ea6\u5f88\u9ebb\u70e6,\u4ee5\u4e0b\u63d0\u4f9b\u7edf\u4e00\u5904\u7406\u65b9\u5f0f\u3002</li> </ul> C#<pre><code>namespace Lion.Pro.EntityFrameworkCore;\n\n/// &lt;summary&gt;\n/// ef\u8fc1\u79fb\u5168\u5c40\u8bbe\u7f6e\n/// &lt;/summary&gt;\npublic static class LionDbContextGlobalSettingExtensions\n{\n    private const string Remark = \"Remark\";\n    private const string Description = \"Description\";\n    private const string CreationTime = \"CreationTime\";\n    private const string IndexPrefix = \"IX_Default_\";\n\n    public static void ConfigureGlobalSetting(this ModelBuilder builder)\n    {\n        ConfigureDefaultMaxLength(builder);\n        ConfigureIndexForCreationTime(builder);\n    }\n\n    /// &lt;summary&gt;\n    /// \u914d\u7f6e\u9ed8\u8ba4\u5b57\u7b26\u4e32\u957f\u5ea6\n    /// &lt;/summary&gt;\n    private static void ConfigureDefaultMaxLength(ModelBuilder builder)\n    {\n        var rules = ConfigureEntityMaxLengthOptions.Configure();\n        // \u5982\u679c\u662fabp\u8868\u4e0d\u5168\u5c40\u4fee\u6539\u957f\u5ea6\n        foreach (var property in builder.Model\n                     .GetEntityTypes()\n                     .Where(e =&gt; !e.GetTableName().StartsWith(AbpCommonDbProperties.DbTablePrefix))\n                     .SelectMany(t =&gt; t.GetProperties())\n                     .Where(e =&gt; e.ClrType == typeof(string)))\n        {\n            // \u9ed8\u8ba4\u8bbe\u7f6e128\u957f\u5ea6\n           if (property.GetMaxLength() == null)\n            {\n                property.SetMaxLength(128);\n            }\n\n        }\n    }\n\n    /// &lt;summary&gt;\n    /// \u521b\u5efa\u65f6\u95f4\u6dfb\u52a0\u7d22\u5f15\n    /// &lt;/summary&gt;\n    private static void ConfigureIndexForCreationTime(ModelBuilder builder)\n    {\n        foreach (var property in builder.Model\n                     .GetEntityTypes()\n                     .Where(e =&gt; !e.GetTableName().StartsWith(AbpCommonDbProperties.DbTablePrefix))\n                     .SelectMany(t =&gt; t.GetProperties())\n                     .Where(e =&gt; e.Name == CreationTime))\n        {\n            var entityType = builder.Model.GetEntityTypes().Where(e =&gt; e.ClrType == property.DeclaringEntityType.ClrType).ToList().FirstOrDefault();\n            var indexName = IndexPrefix + entityType.GetTableName() + \"_\" + property.Name;\n            if (entityType.FindIndex(indexName) == null)\n            {\n                entityType?.AddIndex(property, indexName);\n            }\n        }\n    }\n}\n</code></pre> C#<pre><code>namespace Lion.AbpPro.EntityFrameworkCore\n{\n    [ConnectionStringName(\"Default\")]\n    public class AbpProDbContext :\n        AbpDbContext&lt;AbpProDbContext&gt;,\n        IAbpProDbContext\n    {\n        protected override void OnModelCreating(ModelBuilder builder)\n        {\n            builder.ConfigureGlobalSetting();\n            base.OnModelCreating(builder);\n        }\n    }\n}\n</code></pre>"},{"location":"user-guide/zh/problem/ef/#abp","title":"\u5982\u4f55\u8bbe\u7f6e Abp \u8868\u524d\u7f00","text":"<ul> <li>\u5728 host \u5c42\u7684 Module \u4e0b\u4fee\u6539</li> </ul> C#<pre><code>public override void OnPreApplicationInitializatio(ApplicationInitializationContext context)\n {\n     // \u6bd4\u5982\u4fee\u6539\u4e3a\u5e26\u4e0b\u5212\u7ebf\n     AbpCommonDbProperties.DbTablePrefix = \"Abp_\";\n     base.OnPreApplicationInitialization(context);\n }\n</code></pre>"},{"location":"user-guide/zh/problem/problem/","title":"\u7f16\u8bd1","text":""},{"location":"user-guide/zh/problem/problem/#vs-256","title":"VS \u7f16\u8bd1\u9879\u76ee\u5b57\u7b26\u4e32\u8d85\u8fc7 256 \u4e2a\u5b57\u7b26","text":"<ul> <li>\u628a\u9879\u76ee\u62f7\u8d1d\u5230\u78c1\u76d8\u6839\u76ee\u5f55 OR \u4f7f\u7528 Rider \u5f00\u53d1</li> </ul>"}]}